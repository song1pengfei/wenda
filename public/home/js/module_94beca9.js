define("ihome:widget/address-dialog/address-dialog.js",function(i,e,t){var s=i("common:widget/lib/jquery/jquery.js"),a=i("common:widget/js/ui/dialog/dialog.js"),d=i("common:widget/js/util/event/event.js"),l=i("common:widget/js/ui/address/address.js");i("common:widget/lib/jquery.validate/jquery.validate.js");var n={},o=s.createClass(function(i){var e=this,t={title:"话费兑换",noCloseBtn:!1,url:"/activity/apicommon"};s.extend(t,i),e.opt=t;var d={content:"",width:420,height:320,autoDispose:!0,className:"exchange-dialog address-dialog"},l=t.noCloseBtn?"":'<span class="close-dialog grid-r">X</span>';d.content=['<div class="dialog-container f-12">','<div class="header">',l,'<div class="title f-bold">',t.title,"</div>","</div>",'<div class="line" style="padding-top: 10px;font-size:14px;text-align: center;">',"恭喜您在【"+t.actName+"】中获得话费奖励，满5元可兑！</div>",'<div class="line" style="padding-top: 5px;font-size:14px;padding-left:42px;">','你可以兑换 <span style="color: red">'+t.money+"元话费</span>","</div>",'<div class="main mt-10">','<form id="add-form" class="add-form">','<div class="line">','<label id="lbl-name" for="ipt-name">真实姓名：</label>','<input id="ipt-name" name="Name" value="',n.addName,'" />',"</div>",'<div class="line">','<label id="lbl-tel" for="ipt-tel">手机号码：</label>','<input id="ipt-tel" type="tel" name="Tel" value="',n.addPhone,'" />',"</div>","</form>",'<a class="submit-btn" id="submit-btn">确认提交</a>',"</div>",'<div class="footer mt-10">','<p class="f-red">奖品将于1个月内充值到位。如有疑问，请私信 du小佑。</p>',"</div>","</div>"].join("");var o=new a(d);s(".address-dialog").find(".close-dialog").click(function(){o.close()}),e.init(),s("#submit-btn").click(function(){e.validate()})}).extend({_init:function(){},submit:function(){var i=this,e=s.form.json(s("#add-form")[0]),t={name:e.Name,tel:e.Tel};options={},s.extend(t,i.opt.params),d.fire("dialog.close"),s.sio.callByServer(i.opt.url+"?t="+(new Date).getTime()+"&"+s.param(t),function(e){e.status?i.opt.errorDeal?i.opt.errorDeal(e):a.alert(e.msg):i.opt.successDeal(e)},"json")},validate:function(){s.validator.addMethod("notEmpty",function(i){return s.trim(i)&&"请选择"!==i},""),s("#add-form").validate({rules:{Province:"notEmpty",City:"notEmpty",ZipCode:{required:!0,maxlength:10},Address:{required:!0,maxlength:50},Name:{required:!0,maxlength:10},Tel:{required:!0,number:!0}},messages:{Province:"请选择省份",City:"请选择城市",ZipCode:{required:"请填写邮编",maxlength:"请填写正确的邮编"},Address:{required:"请填写地址",maxlength:"请填写正确的地址"},Name:{required:"请填写姓名",maxlength:"请填写正确的姓名"},Tel:{required:"请填写电话号码",phone:"请填写正确的电话号码"}},highlight:function(i,e){s(i).closest("input, .select").addClass(e)},unhighlight:function(i,e){s(i).closest("input, .select").removeClass(e)}});var i=s("#add-form").valid();i&&this.submit()},addressVisability:function(i){s("#sel-city").show(),s("#con-city").css("visibility",""),s("#lbl-city").css("visibility",""),"none"===s("#sel-district").css("display")?(s("#sel-district").show(),s("#con-district").css("visibility","hidden"),s("#lbl-district").css("visibility","hidden")):i.value["sel-district"]&&(s("#con-district").css("visibility",""),s("#lbl-district").css("visibility",""))},init:function(){var i=this,e={container:["#sel-province","#sel-city","#sel-district"],defaultValue:["北京","海淀区"]};s("#sel-province").data("save")&&(e.defaultValue=[s("#sel-province").data("save"),s("#sel-city").data("save"),s("#sel-district").data("save")]);var t=new l(e);i.addressVisability(t),t.on("change",function(){i.addressVisability(t)})}});t.exports={init:function(i){new o(i)}}});
;define("ihome:widget/banner/banner.js",function(i,e,t){function a(){f.animate({top:"0",opacity:"1",filter:"alpha(opacity=100)"},1200),setTimeout(function(){w.animate({opacity:"1",filter:"alpha(opacity=100)"},1200)},1e3),setTimeout(function(){m.animate({opacity:"1",filter:"alpha(opacity=100)"},500)},1300),setTimeout(function(){c.animate({width:"436px",height:"500px","margin-top":"-260px","margin-left":"-246px",opacity:"1",filter:"alpha(opacity=100)"},700)},600),setTimeout(function(){h.animate({width:"690px",height:"700px","margin-top":"-350px","margin-left":"-405px",opacity:"1",filter:"alpha(opacity=100)"},600)},900),setTimeout(function(){p.animate({width:"1040px",height:"700px","margin-top":"-350px","margin-left":"-600px",opacity:"1",filter:"alpha(opacity=100)"},500)},1200)}var s=i("common:widget/js/util/tangram/tangram.js"),n=i("common:widget/js/util/event/event.js"),r=i("common:widget/js/ui/base/base.js"),o=s(".wgt-banner"),l=s(".circle-wp"),d=s(".circle"),c=s(".circle-f"),h=s(".circle-s"),p=s(".circle-t"),v=s(".user-avatar-wp"),f=s(".user-avatar-wp .user-avatar"),m=s(".user-avatar-wp .avatar-mask"),w=s(".user-avatar-wp .user-name,.user-avatar-wp .user-rank"),u=s(".user-info"),g=s(".user-info .user .avatar-img"),x=s(".banner-shrink-btn"),C=s(".circle,.user-avatar,.avatar-mask,.user-name,.user-rank",o),b=415,y=function(){for(var i=decodeURIComponent(window.location.href),e=i.substr(i.indexOf("?")+1),t=e.split("&"),a={},s=0;s<t.length;s++){var n=t[s].split("=");a[n[0]]=n[1]}return a}();s.browser.ie<=9&&(1!=y.tab&&d.each(function(){s(this).css({width:.3*s(this).width()+"px",height:.3*s(this).height()+"px","margin-top":.3*-s(this).outerHeight()/2+"px","margin-left":.3*-s(this).outerWidth()/2+"px"})}),s.cookie.get("SHRINK")||1==y.tab||a());var k=r(function(){var i=this;i.shrinkSpeed=600,i.shrinkHeight=100}).extend({init:function(){var i=this;s.cookie.get("SHRINK")?(C.removeClass("animation"),x.find("i").removeClass("i-incline-down").addClass("i-incline-up"),x.find("span").text("展开"),v.css({left:parseInt(o.width()/2+b)+"px",top:"76px",visibility:"hidden"}),g.css("visibility","visible"),o.height(i.shrinkHeight),l.hide(),u.show()):C.addClass(1!=y.tab?"animation":"noAnimation"),i.bindEvent()},shrink:function(i){var e=this;w.css("visibility","hidden"),m.hide(),v.animate({left:parseInt(o.width()/2+b)+"px",top:"76px"},i,function(){g.css("visibility","visible"),v.css("visibility","hidden")}),o.animate({height:e.shrinkHeight+"px"},i),l.slideUp(i),u.slideDown(i)},expand:function(i){m.hide(),v.css({display:"block",visibility:"visible"}),g.css("visibility","hidden"),o.animate({height:"452px"},i),v.animate({left:"50%",top:"45px"},i,function(){w.css("visibility","visible"),setTimeout(function(){m.fadeIn()},200)}),l.slideDown(i),u.slideUp(i)},bindEvent:function(){var i=this;d.hover(function(i){var e=s(this),t=e.offset().left+e.width()/2;i.pageX>t?(e.removeClass("circle-shadow-l").find(".circle-txt div").eq(0).addClass("transform").removeClass("active"),e.addClass("circle-shadow-r").find(".circle-txt div").eq(1).removeClass("transform-l").addClass("active")):(e.removeClass("circle-shadow-r").find(".circle-txt div").eq(1).addClass("transform-l").removeClass("active"),e.addClass("circle-shadow-l").find(".circle-txt div").eq(0).removeClass("transform").addClass("active")),i.stopPropagation()},function(i){var e=s(this),t=e.offset().left+e.width()/2;i.pageX>t?e.removeClass("circle-shadow-r").find(".circle-txt div").eq(1).addClass("transform-l").removeClass("active"):e.removeClass("circle-shadow-l").find(".circle-txt div").eq(0).addClass("transform").removeClass("active"),i.stopPropagation()}),c.mousemove(function(i){var e=s(this),t=e.offset().left+e.width()/2;i.pageX>t?(e.removeClass("circle-shadow-l").find(".circle-txt div").eq(0).addClass("transform").removeClass("active"),e.addClass("circle-shadow-r").find(".circle-txt div").eq(1).removeClass("transform-l").addClass("active")):(e.removeClass("circle-shadow-r").find(".circle-txt div").eq(1).addClass("transform-l").removeClass("active"),e.addClass("circle-shadow-l").find(".circle-txt div").eq(0).removeClass("transform").addClass("active"))}),x.click(function(){var e=s(this),t=e.find("i");t.hasClass("i-incline-down")?(t.removeClass("i-incline-down").addClass("i-incline-up"),e.find("span").text("展开"),i.shrink(i.shrinkSpeed),s.cookie.set("SHRINK","1",{expires:31536e6,path:"/"})):(C.eq(0).hasClass("animation")||(C.addClass("animation"),s.browser.ie<=9&&a()),t.removeClass("i-incline-up").addClass("i-incline-down"),e.find("span").text("收起"),i.expand(i.shrinkSpeed),s.cookie.remove("SHRINK",{path:"/"}))}),s(".wgt-banner").mousemove(function(i){var e=(s(this),i.pageX,20),t=(s(window).width()-i.pageX)/s(window).width(),a=.5-e/s(window).width(),n=2*e/s(window).width(),r=100*(n*t+a);s(".wgt-banner-bg").css("left",r+"%")}),s(".wgt-banner .set-unsername-btn").click(function(i){n.fire("login.setUsername"),i.preventDefault()})}});t.exports=new k});
;define("ihome:widget/category/category.js",function(e,t,o){var s,a=e("common:widget/js/util/tangram/tangram.js"),c=function(){var e=a(".wgt-ihome-filter .search-key"),t=a(".wgt-category"),o=t.find(".show-close-btn"),c=t.height()+o.height();t.hasClass("expand")?e.css("bottom",s-c-12+"px"):e.css("bottom",s+"px")},i=function(){var e=25,t=a(".wgt-ihome-filter .search-key");t.css("bottom",parseInt(t.css("bottom"))-e+"px"),s=parseInt(t.css("bottom"));a(".wgt-reply-qts-list-wp");a(".wgt-category").find(".show-close-btn").on("click",function(e){e.preventDefault();var t=a(".wgt-category");t.hasClass("expand")?(t.removeClass("expand"),a.cookie.set("IK_IHOME_CATEGORY","close",{expires:2592e6,path:"/"})):(t.addClass("expand"),a.cookie.set("IK_IHOME_CATEGORY","expand",{expires:2592e6,path:"/"})),c()}),("expand"===a.cookie.get("IK_IHOME_CATEGORY")||"close"!=a.cookie.get("IK_IHOME_CATEGORY")&&a(".category-item").length>0)&&a(".wgt-category").find(".show-close-btn").trigger("click")};o.exports.init=i});
;define("ihome:widget/js/screenScroll/easing.js",function(n){var t=n("common:widget/lib/jquery/jquery.js");t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(n,e,u,a,r){return t.easing[t.easing.def](n,e,u,a,r)},easeInQuad:function(n,t,e,u,a){return u*(t/=a)*t+e},easeOutQuad:function(n,t,e,u,a){return-u*(t/=a)*(t-2)+e},easeInOutQuad:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t+e:-u/2*(--t*(t-2)-1)+e},easeInCubic:function(n,t,e,u,a){return u*(t/=a)*t*t+e},easeOutCubic:function(n,t,e,u,a){return u*((t=t/a-1)*t*t+1)+e},easeInOutCubic:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t+e:u/2*((t-=2)*t*t+2)+e},easeInQuart:function(n,t,e,u,a){return u*(t/=a)*t*t*t+e},easeOutQuart:function(n,t,e,u,a){return-u*((t=t/a-1)*t*t*t-1)+e},easeInOutQuart:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t+e:-u/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(n,t,e,u,a){return u*(t/=a)*t*t*t*t+e},easeOutQuint:function(n,t,e,u,a){return u*((t=t/a-1)*t*t*t*t+1)+e},easeInOutQuint:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t*t+e:u/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(n,t,e,u,a){return-u*Math.cos(t/a*(Math.PI/2))+u+e},easeOutSine:function(n,t,e,u,a){return u*Math.sin(t/a*(Math.PI/2))+e},easeInOutSine:function(n,t,e,u,a){return-u/2*(Math.cos(Math.PI*t/a)-1)+e},easeInExpo:function(n,t,e,u,a){return 0==t?e:u*Math.pow(2,10*(t/a-1))+e},easeOutExpo:function(n,t,e,u,a){return t==a?e+u:u*(-Math.pow(2,-10*t/a)+1)+e},easeInOutExpo:function(n,t,e,u,a){return 0==t?e:t==a?e+u:(t/=a/2)<1?u/2*Math.pow(2,10*(t-1))+e:u/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(n,t,e,u,a){return-u*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOutCirc:function(n,t,e,u,a){return u*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOutCirc:function(n,t,e,u,a){return(t/=a/2)<1?-u/2*(Math.sqrt(1-t*t)-1)+e:u/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i))+e},easeOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*a-r)*Math.PI/i)+u+e},easeInOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(2==(t/=a/2))return e+u;if(i||(i=.3*a*1.5),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)+e:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)*.5+u+e},easeInBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*(t/=a)*t*((r+1)*t-r)+e},easeOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*((t=t/a-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),(t/=a/2)<1?u/2*t*t*(((r*=1.525)+1)*t-r)+e:u/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(n,e,u,a,r){return a-t.easing.easeOutBounce(n,r-e,0,a,r)+u},easeOutBounce:function(n,t,e,u,a){return(t/=a)<1/2.75?7.5625*u*t*t+e:2/2.75>t?u*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?u*(7.5625*(t-=2.25/2.75)*t+.9375)+e:u*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(n,e,u,a,r){return r/2>e?.5*t.easing.easeInBounce(n,2*e,0,a,r)+u:.5*t.easing.easeOutBounce(n,2*e-r,0,a,r)+.5*a+u}})});
;define("ihome:widget/js/screenScroll/jquery.mousewheel.js",function(e){!function(t){var n=e("common:widget/lib/jquery/jquery.js");t(n)}(function(e){function t(t){var s=t||window.event,a=h.call(arguments,1),u=0,r=0,d=0,f=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(r=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(r=-1*d,d=0),u=0===d?r:d,"deltaY"in s&&(d=-1*s.deltaY,u=d),"deltaX"in s&&(r=s.deltaX,0===d&&(u=-1*r)),0!==d||0!==r){if(1===s.deltaMode){var c=e.data(this,"mousewheel-line-height");u*=c,d*=c,r*=c}else if(2===s.deltaMode){var m=e.data(this,"mousewheel-page-height");u*=m,d*=m,r*=m}return f=Math.max(Math.abs(d),Math.abs(r)),(!o||o>f)&&(o=f,i(s,f)&&(o/=40)),i(s,f)&&(u/=40,r/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/o),r=Math[r>=1?"floor":"ceil"](r/o),d=Math[d>=1?"floor":"ceil"](d/o),t.deltaX=r,t.deltaY=d,t.deltaFactor=o,t.deltaMode=0,a.unshift(t,u,r,d),l&&clearTimeout(l),l=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function i(e,t){return r.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var l,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(e.event.fixHooks)for(var u=s.length;u;)e.event.fixHooks[s[--u]]=e.event.mouseHooks;var r=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",r.getLineHeight(this)),e.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})});
;define("ihome:widget/js/screenScroll/screenContainer.js",function(e,n,t){var o=e("common:widget/lib/jquery/jquery.js"),r=e("common:widget/js/util/event/event.js"),i=[],c=!1,s=0,a={el:o(".screen-container-inner"),start:function(){i[0].enter(),o(".wheel").click(o.proxy(a.nextScreen,a)),o(window).on("resize",o.proxy(a.resetPosition,a))},addScreen:function(e){i.push(e),e.on("enter:start",o.proxy(a.disableWheel,a)),e.on("enter:done",o.proxy(a.enableWheel,a))},disableWheel:function(){c=!0,o(".wheel").removeClass("wheel-enabled")},enableWheel:function(){c=!1,s!=i.length-1&&o(".wheel").addClass("wheel-enabled")},nextScreen:function(){a.goToScreen(s+1)},prevScreen:function(){a.goToScreen(s-1)},goToScreen:function(e){if(!(c||e>=i.length||0>e||e==s)){var n=i[s],t=i[e];i[s].leave(),s=e,t.enter();var r=this;r.el.transition({"margin-top":-o(window).height()*e+"px"},900,"easeInOutQuad",function(){t.trigger("screen:scrolled"),n.destroy(),r.trigger("goto:end",t)}),r.trigger("goto:start",t)}},resetPosition:function(){this.el.css("margin-top",-o("body").height()*s)}};r.create(a),o(document).mousewheel(function(e){e.deltaFactor*e.deltaY<0?a.nextScreen():a.prevScreen()}),o(window).keydown(function(e){var e=e||event,n=e.keyCode||e.which||e.charCode;switch(n){case 38:case 33:a.prevScreen();break;case 40:case 34:a.nextScreen()}}),t.exports=a});
;define("ihome:widget/js/screenScroll/screen.js",function(e,t,n){var i=e("common:widget/js/util/tangram/tangram.js"),a=i.createClass(function(e){this.id=e,this.el=i(".screen."+e),this.html=i("#t-"+this.id).html(),this.rendered=!1,this.enterAnimates=[],this.leaveAnimates=[],this._enter=null,this._leave=null,this.enterAnimating=!1,this.leaveAnimating=!1}).extend({render:function(){this.el.html(this.html),this.rendered=!0,this.fire("render")},destroy:function(){this.el.empty(),this.rendered=!1,this.fire("destroy")},$:function(){return this.el.find.apply(this.el,arguments)},enter:function(){this.rendered||this.render(),this.startEnterAnimate()},leave:function(){this.rendered&&this.startLeaveAnimate()},addEnterAnimate:function(e){this.enterAnimates.push(e)},addLeaveAnimate:function(e){this.leaveAnimates.push(e)},startEnterAnimate:function(){var e=this;if(!e.enterAnimating){if(e.leaveAnimating)return void e._leave.done(i.proxy(e.startEnterAnimate,e));e.enterAnimating=!0,e._enter=i.when.apply(i,i.map(e.enterAnimates,function(t){var n=i.Deferred();return t.call(e,n),n})),e.fire("enter:start"),e._enter.done(function(){e.enterAnimating=!1,e.fire("enter:done")})}},startLeaveAnimate:function(){var e=this;return e.enterAnimating?void e._enter.done(i.proxy(e.startLeaveAnimate,e)):void(e.leaveAnimating||(e.leaveAnimating=!0,e._leave=i.when.apply(i,i.map(e.leaveAnimates,function(t){var n=i.Deferred();return t.call(e,n),n})),e.fire("leave:start"),e._leave.done(function(){e.leaveAnimating=!1,e.fire("leave:done")})))},enterSlide:function(e,t,n,a,r){n=n||1e3,a=a||"easeOutQuart",this.addEnterAnimate(function(s){var o=this.$(e),l={},m={};"bottom"==t&&(l.y=i("body").height()+o.position().top,m.y=0),"right"==t&&(l.x=i("body").width()+o.position().left,m.x=0),"left"==t&&(l.x=-o.width()-2*o.position().left,m.x=0),"top"==t&&(l.y=-o.height()-o.position().top,m.y=0),o.css(l).offset(),r&&o.delay(r),o.transition(m,n,a,function(){s.resolve()})})},enterBubble:function(e,t,n,i,a){n=n||1e3,i=i||"easeOutQuart",this.addEnterAnimate(function(r){var s=this.$(e);s.css({scale:0,transformOrigin:t}).offset(),a&&s.delay(a),s.transition({scale:1},n,i,function(){r.resolve()})})},enterFall:function(e,t,n,i){t=t||1500,this.addEnterAnimate(function(a){var r=this.$(e),s=r.height(),o=r.css("margin-top"),l=r.css("top");r.css({top:0,marginTop:-s}),i&&r.delay(i);var m={duration:t,easing:n,complete:function(){r.css({top:"",marginTop:""}),a.resolve()}};r.animate({top:l,marginTop:o},m)})},initBubble:function(e,t){if(i("html").hasClass("modern")){var n=this,a=null,r=null,s=null;n.on("render",function(){a=i.ajax(t),a.done(function(t){n.$(e).css("background-image","none").append(t.documentElement),r=Snap(n.$(e).find("svg").get(0)),r.select("#spark").attr("transform","scale(0)")})}),n.on("enter:start",function(){a.done(function(){var e=r.select("#spark");clearTimeout(s),s=setTimeout(function t(){e.animate({transform:"scale(1.15)"},300,mina.easeinout,function(){e.animate({"fill-opacity":0},200,mina.easein,function(){e.attr("transform","scale(0)").attr("fill-opacity",1),clearTimeout(s),s=setTimeout(t,600)})})})})}),n.on("leave:start",function(){clearTimeout(s)})}}});n.exports=a});
;define("ihome:widget/guide/screen1.js",function(e,n,i){var o=(e("common:widget/lib/jquery/jquery.js"),e("ihome:widget/js/screenScroll/screen.js")),s=(e("common:widget/js/util/event/event.js"),e("ihome:widget/js/screenScroll/screenContainer.js"),new o("screen-1"));s.addEnterAnimate(function(e){window.setTimeout(function(){e.resolve()},1500)}),i.exports=s});
;define("ihome:widget/guide/screen2.js",function(e,n,i){var o=(e("common:widget/lib/jquery/jquery.js"),e("ihome:widget/js/screenScroll/screen.js")),s=(e("common:widget/js/util/event/event.js"),e("ihome:widget/js/screenScroll/screenContainer.js"),new o("screen-2"));s.addEnterAnimate(function(e){window.setTimeout(function(){e.resolve()},1500)}),i.exports=s});
;define("ihome:widget/guide/screen3.js",function(e,n,i){var o=(e("common:widget/lib/jquery/jquery.js"),e("ihome:widget/js/screenScroll/screen.js")),s=(e("common:widget/js/util/event/event.js"),e("ihome:widget/js/screenScroll/screenContainer.js"),new o("screen-3"));s.addEnterAnimate(function(e){window.setTimeout(function(){e.resolve()},1500)}),i.exports=s});
;define("ihome:widget/guide/guide.js",function(e,i,n){var t=e("common:widget/js/util/tangram/tangram.js"),s=e("common:widget/js/util/template/template.js");e("ihome:widget/js/screenScroll/easing.js"),e("ihome:widget/js/screenScroll/jquery.mousewheel.js");var o,d="t:guide",r=t("body"),a=s(d,{}),c=function(){this.init()};t.extend(c.prototype,{init:function(){o=t(a),r.append(o),r.addClass("body-guide");var i=e("ihome:widget/js/screenScroll/screenContainer.js"),n=e("ihome:widget/guide/screen1.js"),s=e("ihome:widget/guide/screen2.js"),d=e("ihome:widget/guide/screen3.js");i.addScreen(n),i.addScreen(s),i.addScreen(d),t.support.transition||(t.fn.transition=t.fn.animate),i.start(),this.screenContainer=i},close:function(){o=o.remove()},show:function(){r.append(o)}}),n.exports=c});
;define("ihome:widget/hq-notice/hq-notice.js",function(t,i,e){var n=t("common:widget/js/util/tangram/tangram.js"),o=t("common:widget/js/ui/dialog/dialog.js"),s={init:function(t){this.$el=n(t),this.bind()},timer:function(t){var i=n(t);if(i.length)var e=i.data("time"),o=setInterval(function(){if(e-=1,0>=e)return i.text("已结束"),void clearInterval(o);var t=parseInt(e/86400,10),n=parseInt(e%86400/3600,10),s=parseInt(e%3600/60,10);i.text(t+"天"+n+"小时"+s+"分钟")},1e3)},bind:function(){var t=this;this.$el.on("click",".rule",function(){t.toggle(this)}).on("click","img.hq-notice-img",function(){t.toggle(n(this).siblings(".rule"))}).on("click",".my-tel-fee",function(){var i=n(this).find("em"),e=i.text(),o=i.data("rznum");t.showFee(e,o)}).on("click",".fee",function(){var t=n(this).data("fee"),i=n(this).data("amount"),e=[];e.push('<div style="line-height:60px;text-align: center;">'),e.push("认证满"+i+"个即可领取"+t+"元话费"),e.push("</div>");new o({title:"知道提示",dialogClass:"ihome-fee-tip",content:e.join(""),autoDispose:!0,width:300,height:180,buttons:[{text:"确定",click:function(){n(this).dialog("close")}}]})})},toggle:function(t){var i=n(t);i.toggleClass("rule-up"),i.siblings(".rule-box")[i.hasClass("rule-up")?"slideDown":"slideUp"]()},showFee:function(t,i){var e=[];e.push('<div style="line-height:60px;text-align: center;">'),e.push(10>i?"认证满10个即可领取5元话费。":"满5满10可兑，活动结束后统一发放。"),e.push("</div>");new o({title:"知道提示",dialogClass:"ihome-fee-tip",content:e.join(""),autoDispose:!0,width:300,height:200,buttons:[{text:"确定",click:function(){n(this).dialog("close")}}]})}};e.exports=s});
;define("ihome:widget/ihome-mavin-news/ihome-mavin-news.js",function(i,e,n){function o(i){var i=a(i);a("a",i).on("click",function(){m.send({module:"ihome",page:"index",area:"ihome-mavin-news",action:"click"})}),a(".wgt-ihome-mavin-news .i-mavin-news-close").on("click",function(){a(".wgt-ihome-mavin-news").fadeOut();var i=(new Date).Format("yyyy-MM-dd");a.cookie.set("ifMavinClose",i,{path:"/",expires:31536e6})})}var a=i("common:widget/js/util/tangram/tangram.js"),m=i("common:widget/js/util/log/log.js");n.exports.init=o});
;define("ihome:widget/join-ihome/join-ihome.js",function(e,o,i){var n=e("common:widget/lib/jquery/jquery.js"),t=e("common:widget/js/ui/base/base.js"),r=e("common:widget/lib/juicer/juicer.js"),s=t(function(){var e=this;e.oriHeight=n("body").height()}).extend({init:function(){if(1==F.context("user").isLogin&&1!=n.cookie.get("IK_JOIN_IHOME")&&(n.cookie.set("IK_JOIN_IHOME","1",{path:"/",expires:2592e6}),n.cookie.set("IK_FORCE_UHOME","0",{expires:2592e6,path:"/"}),!(n.browser.ie<=7))){var e=this,o=(n(window).width(),n(window).height());scrollElem=n.browser.ie||n.browser.firefox?document.documentElement:document.body,e.layer=n("<div/>").prop({"class":"join-ihome-layer",id:"join-ihome-layer"}).appendTo("body"),e.container=n("<div/>").prop({"class":"wgt-join-ihome",id:"wgt-join-ihome"}).appendTo("body"),e.render(),e.eventHandler(),n("body").css({height:o,overflow:"hidden"});var i=setInterval(function(){0!=n(scrollElem).scrollTop()?n(scrollElem).scrollTop(0):setTimeout(function(){clearInterval(i)},500)},500)}},render:function(){var e=this,o=n("#tpl-join-ihome").html(),i=F.context("user").name;n.string(i).getByteLength()>12&&(i=n.string(i).subByte(12,"...")),e.container.html(r(o,{uname:i})),n(e.container).find(".hi").css("left",n(e.container).find(".user-name").width()-35)},close:function(){var e=this;e.layer.remove(),e.container.remove(),n("body").css({height:e.oriHeight,overflow:""})},eventHandler:function(){var e=this;e.container.delegate(".close-join-ihome","click",function(o){o.preventDefault(),e.close()})}});i.exports=new s});
;define("ihome:widget/js/card/card.js",function(e,a,t){var s=e("common:widget/js/util/tangram/tangram.js"),n=e("common:widget/js/util/template/template.js"),i=e("common:widget/js/ui/tip/tip.js"),p={exp:[0,80,400,800,2e3,4e3,7e3,1e4,14e3,18e3,22e3,32e3,45e3,6e4,1e5,15e4,25e4,4e5,7e5,1e6],adp:[0,0,10,10,15,15,20,20,25,25,27,27,29,29,31,31,33,33,35,35],bst:[0,2,5,10,30,70,120,200,300,450,650,900,1300,1800,2500,3500,5e3,7e3,1e4,15e3]},r=['<p class="card-tip-title">我的当前等级<em>LV<#=gradeIndex#></em></p>','<p class="card-bar mt-10">',"<span>经验值</span>",'<span class="progress-bar"><em style="width: <#=expRate#>%;"></em></span>','<span class="f-gray"><em><#=exp#></em>/<#=upgradeExp#></span>',"</p>",'<p class="card-bar mt-5 mb-10">',"<span>采纳数</span>",'<span class="progress-bar"><em style="width: <#=bstRate#>%;"></em></span>','<span class="f-gray"><#=bst#>/<#=upgradeBst#></span>',"</p>",'<p class="card-desc f-gray">当<em>经验值、采纳数</em>都满足条件时才能升级</p>'].join(""),d=['<p class="card-tip-title">管理员等级<em>LV<#=gradeIndex#></em></p>','<p class="card-bar mt-10">',"<span>操作权限</span>",'<span class="ml-5 f-bold"><#=type#></span>',"</p>",'<p class="card-bar mt-5 mb-10">',"<span>操作分</span>",'<span class="progress-bar"><em style="width: <#=opRate#>%;"></em></span>','<span class="f-gray"><em><#=finishScore#></em>/<#=needScore#></span>',"</p>"].join("");t.exports=function(e,a){var t,o=F.context("user"),m=s(e.target);if(1==o.isLogin){if("uadmin"==e.type){var a=s.extend({gradeIndex:o.uadmin.grade,type:["初级","中级","高级","超级"][o.uadmin.type-1],finishScore:o.uadmin.finishScore,needScore:o.uadmin.needScore,opRate:parseInt(o.uadmin.finishScore)/parseInt(o.uadmin.needScore)*100},a);r=d}else{var a=s.extend({gradeIndex:o.gradeIndex,exp:o.experience,upgradeExp:p.exp[o.gradeIndex]||0,bst:o.adoptNum||0,upgradeBst:p.bst[o.gradeIndex]||0},a);a.expRate=a.exp/a.upgradeExp*100,a.bstRate=a.bst/a.upgradeBst*100}var e=s.extend({target:null,width:"316px",tooltipClass:"card-tip-white tip-white",direction:"top",content:n(r,a||{}),closebox:!1,autoDispose:!1},e),c=timerHide=null;m.mouseenter(function(){clearTimeout(timerHide),t||(t=new i(e),t.getTipContainer().mouseenter(function(){clearTimeout(timerHide),c=setTimeout(function(){t.show()},200)}).mouseleave(function(){clearTimeout(c),timerHide=setTimeout(function(){t.hide()},200)})),c=setTimeout(function(){t.show()},200)}).mouseleave(function(){clearTimeout(c),t&&"show"==t.getStatus()&&(timerHide=setTimeout(function(){t.hide()},200))})}}});
;define("ihome:widget/js/custom-style/custom-style.js",function(e){var s=e("common:widget/js/util/tangram/tangram.js"),i={radio:function(e){var i=!!this.checked,d=!!this.disabled,a=s(this).clone(!0),t=s("<div />").addClass("custom-radio").append("<i />").append(a).insertAfter(this);i&&t.find("i").addClass("checked"),d&&t.find("i").addClass("disabled"),s(this).remove(),a.on("click",function(){s(document.getElementsByName(a[0].name)).each(function(){s(this).prev().removeClass("checked")}),s(this).prev().hasClass("hovered")&&s(this).prev().removeClass("hovered"),s(this).prev().addClass("checked"),s.isFunction(e)&&e.call(a[0])}),a.on("mouseover",function(){s(this).prev().hasClass("checked")||s(this).prev().addClass("hovered")}),a.on("mouseout",function(){s(this).prev().removeClass("hovered")})},checkbox:function(e){var i=!!this.checked,d=!!this.disabled,a=s(this).clone(!0),t=s("<div />").addClass("custom-checkbox").append("<i />").append(a).insertAfter(this);i&&t.find("i").addClass("checked"),d&&t.find("i").addClass("disabled"),s(this).remove(),a.on("click",function(){var i=s(this).prev();i.hasClass("hovered")&&i.removeClass("hovered"),i.hasClass("checked")?i.removeClass("checked"):i.addClass("checked"),s.isFunction(e)&&e.call(a[0])}),a.on("mouseover",function(){s(this).prev().hasClass("checked")||s(this).prev().addClass("hovered")}),a.on("mouseout",function(){s(this).prev().removeClass("hovered")})}};s.fn.customStyle=function(e,d){return i[e]&&s(this).each(function(){i[e].call(this,d)}),this}});
;define("ihome:widget/js/editor/config/config.js",function(i,e,o){var t=(i("common:widget/js/util/tangram/tangram.js"),i("common:widget/js/util/uri/uri.js"),['body{margin:0;padding:6px 8px;font:15px/20px "Microsoft Yahei",arial,"\\5B8B\\4F53";cursor:text;}',"p{margin:1px 0;padding:0;cursor:text;word-wrap:break-word;vertical-align:baseline \\0;}","p img{vertical-align:bottom;*vertical-align:-3px;}","img{border:0;}","iframe{width:430px;height:145px;border:1px solid #ccc;}","#initContent{color:#ccc;}","ol,ul{margin-top:0;margin-bottom:0;margin-left:0;padding-left:2em;}","ol{*margin-left:2px;}","body.view{padding:6px 8px;}","strong{color:#4c4c4c;}","em{font-style:normal;color:#e0435d;}","strong em, em strong{color:#e0435d;}"]);"undefined"!=typeof UEDITOR_CONFIG&&(UEDITOR_CONFIG.initialStyle=t.join(""));var r=1==F.context("user").isLogin,n=[["insertimage"]],a=["登录就能传图片，图文解答更文艺","登录就能用符号，重要内容好强调","登录就能用编号，段落层次更清晰","登录就能自排版，凌乱布局变整洁","登录就能插地图，地理位置好示意","搭配图片来解答, 瞬间凸显文艺范儿","使用符号来强调，重要内容立体现","使用编号标段落，层次突出条理清","智能排版一键按，凌乱布局变整洁","插入地图好示意，地理位置轻松找","您今日上传的图片数目已经超过限制！","上传网盘共分享，传递知识助大家","登录就能传附件，分享知识助大家","回答加粗，别出心裁更突出","5级以上且有5个优质答案的用户，可以使用加粗特权哦~","选择加红，让答案与众不同","5级以上有10个优质答案的用户，可以使用加红特权哦~"],l={txttip:["该提问求助发自手机，请精简回答，方便查看","您的回答会被数十乃至数万的网友学习和参考，所以请一定对自己的回答负责，尽可能保障您的回答准确、详细和有效","提问者正在等待您的回答","您的回答会被数十乃至数万的网友学习和参考，所以请一定对自己的回答负责，尽可能保障您的回答准确、详细和有效","详细的问题说明，有助于回答者给出准确的答案","回答积累经验值，升级即可获得抽奖机会"],modify:!1,refer:"",isrefer:!1,curEditor:null,hostname:"//zhidao.baidu.com",errorClew:["请您输入文字内容"],logNum:"2038"};o.exports={ikEditorHoverTitle:a,optionList:l,initialFrameHeight:145,initialMaxFrameHeight:330,zIndex:1e3,buttonConfig:{insertimage:{title:"图片",hoverTitle:r?a[5]:a[0],overflowMsg:a[10]}},editorStyles:{answer:{toolbars:n,maximumWords:9999,initialContent:"",isLogin:r,addons:{authcode:"new_reply",submitBtn:"提交回答",anonymouse:!0}}},imgErrorNum:{0:"图片提交成功",1:'<p class="ik-neweditor-clew">图片提交失败！</p>',2:'<p class="ik-neweditor-clew">图片今日上传张数超限！</p>',3:'<p class="ik-neweditor-clew">图片文件过大！</p>',4:' <p class="ik-neweditor-clew">图片类型错误！</p><p class="ik-neweditor-clewmore">注：大小不超过5M，支持JPG/PNG/BMP/GIF等格式</p>',265:'<p class="ik-neweditor-clew">网络异常，请您登录或注册后提交回答！</p>'}}});
;define("ihome:widget/js/editor/editor.js",function(t,e,i){{var n=t("common:widget/js/util/tangram/tangram.js"),o=t("common:widget/js/ui/base/base.js"),r=t("common:widget/js/logic/editor/editor.js"),c=t("common:widget/js/logic/editor/prototype/prototype.js"),a=t("common:widget/js/logic/editor/addon/addon.js"),s=t("ihome:widget/js/editor/config/config.js");t("common:widget/js/ui/tip/tip.js"),t("common:widget/js/ui/dialog/dialog.js"),t("common:widget/js/util/event/event.js")}r.config.buttonConfig=s.buttonConfig,r.config.wangpanLoaderJs=s.wangpanLoaderJs,r.config.initialFrameHeight=s.initialFrameHeight,r.config.initialMaxFrameHeight=s.initialMaxFrameHeight,r.config.zIndex=s.zIndex;var d=o(function(t){var e=n("#"+t.id);if(!e)return!1;var i=this;i.type=t.type,i.style=s.editorStyles[i.type],t.config&&n.object.merge(i.style,t.config,{overwrite:1,recursive:1});var o=new r(i.style);o.render(e.get(0)),o.ready(function(){function e(){o.setContent('<p id="initContent">请在此输入您的回答</p>'),t.content||o.addListener("click",i)}function i(){n(o.getContent()).find("img").size()||o.setContent(""),o.focus(),o.removeListener("click",i)}e()}),i.instance=o,i.container=e.get(0),i.config=s,a.init(i),o.container.style.width="",o.ui.getDom("iframeholder").style.width="",i.afterInit(),t.content&&i.setContent(t.content)});d.extend(c),d.extend({editorSubmit:function(){var t=this;t.config.optionList.modify=!1,n("#initContent")&&t.instance.fireEvent("click");var e={co:t.uploadFile(t.filterHighlight(t.filterMapClew(t.instance.getContent()))),cite:"",rich:1};return t.authcode&&t.authcode.submitParam(e),t.anonymouse&&t.anonymouse.prop("checked")&&(e.anoy=1),e}}),i.exports=d});
;define("ihome:widget/js/excanvas/excanvas.js",function(){document.createElement("canvas").getContext||!function(){function t(){return this.context_||(this.context_=new l(this))}function e(t,e){var i=C.call(arguments,2);return function(){return t.apply(e,i.concat(C.call(arguments)))}}function i(t){var e=t.srcElement;switch(t.propertyName){case"width":e.style.width=e.attributes.width.nodeValue+"px",e.getContext().clearRect();break;case"height":e.style.height=e.attributes.height.nodeValue+"px",e.getContext().clearRect()}}function r(t){var e=t.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function s(){return[[1,0,0],[0,1,0],[0,0,1]]}function n(t,e){for(var i=s(),r=0;3>r;r++)for(var n=0;3>n;n++){for(var a=0,o=0;3>o;o++)a+=t[r][o]*e[o][n];i[r][n]=a}return i}function a(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function o(t){var e,i=1;if(t=String(t),"rgb"==t.substring(0,3)){var r=t.indexOf("(",3),s=t.indexOf(")",r+1),n=t.substring(r+1,s).split(",");e="#";for(var a=0;3>a;a++)e+=T[Number(n[a])];4==n.length&&"a"==t.substr(3,1)&&(i=n[3])}else e=t;return{color:e,alpha:i}}function h(t){switch(t){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function l(t){this.m_=s(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*S,this.globalAlpha=1,this.canvas=t;var e=t.ownerDocument.createElement("div");e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight+"px",e.style.overflow="hidden",e.style.position="absolute",t.appendChild(e),this.element_=e,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function c(t,e,i,r){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:r.x,y:r.y}),t.currentX_=r.x,t.currentY_=r.y}function u(t){for(var e=0;3>e;e++)for(var i=0;2>i;i++)if(!isFinite(t[e][i])||isNaN(t[e][i]))return!1;return!0}function _(t,e,i){if(u(e)&&(t.m_=e,i)){var r=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=v(x(r))}}function f(t){this.type_=t,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function p(){}var y=Math,d=y.round,g=y.sin,m=y.cos,x=y.abs,v=y.sqrt,S=10,w=S/2,C=Array.prototype.slice,b={init:function(t){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var i=t||document;i.createElement("canvas"),i.attachEvent("onreadystatechange",e(this.init_,this,i))}},init_:function(t){if(t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var i=t.getElementsByTagName("canvas"),r=0;r<i.length;r++)this.initElement(i[r])},initElement:function(e){if(!e.getContext){e.getContext=t,e.innerHTML="",e.attachEvent("onpropertychange",i),e.attachEvent("onresize",r);var s=e.attributes;s.width&&s.width.specified?e.style.width=s.width.nodeValue+"px":e.width=e.clientWidth,s.height&&s.height.specified?e.style.height=s.height.nodeValue+"px":e.height=e.clientHeight}return e}};b.init();for(var T=[],P=0;16>P;P++)for(var k=0;16>k;k++)T[16*P+k]=P.toString(16)+k.toString(16);var E=l.prototype;E.clearRect=function(){this.element_.innerHTML=""},E.beginPath=function(){this.currentPath_=[]},E.moveTo=function(t,e){var i=this.get_Coords(t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},E.lineTo=function(t,e){var i=this.get_Coords(t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},E.bezierCurveTo=function(t,e,i,r,s,n){var a=this.get_Coords(s,n),o=this.get_Coords(t,e),h=this.get_Coords(i,r);c(this,o,h,a)},E.quadraticCurveTo=function(t,e,i,r){var s=this.get_Coords(t,e),n=this.get_Coords(i,r),a={x:this.currentX_+2/3*(s.x-this.currentX_),y:this.currentY_+2/3*(s.y-this.currentY_)},o={x:a.x+(n.x-this.currentX_)/3,y:a.y+(n.y-this.currentY_)/3};c(this,a,o,n)},E.arc=function(t,e,i,r,s,n){i*=S;var a=n?"at":"wa",o=t+m(r)*i-w,h=e+g(r)*i-w,l=t+m(s)*i-w,c=e+g(s)*i-w;o!=l||n||(o+=.125);var u=this.get_Coords(t,e),_=this.get_Coords(o,h),f=this.get_Coords(l,c);this.currentPath_.push({type:a,x:u.x,y:u.y,radius:i,xStart:_.x,yStart:_.y,xEnd:f.x,yEnd:f.y})},E.rect=function(t,e,i,r){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.closePath()},E.strokeRect=function(t,e,i,r){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.closePath(),this.stroke(),this.currentPath_=s},E.fillRect=function(t,e,i,r){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.closePath(),this.fill(),this.currentPath_=s},E.createLinearGradient=function(t,e,i,r){var s=new f("gradient");return s.x0_=t,s.y0_=e,s.x1_=i,s.y1_=r,s},E.createRadialGradient=function(t,e,i,r,s,n){var a=new f("gradientradial");return a.x0_=t,a.y0_=e,a.r0_=i,a.x1_=r,a.y1_=s,a.r1_=n,a},E.drawImage=function(t){var e,i,r,s,n,a,o,h,l=t.runtimeStyle.width,c=t.runtimeStyle.height;t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var u=t.width,_=t.height;if(t.runtimeStyle.width=l,t.runtimeStyle.height=c,3==arguments.length)e=arguments[1],i=arguments[2],n=a=0,o=r=u,h=s=_;else if(5==arguments.length)e=arguments[1],i=arguments[2],r=arguments[3],s=arguments[4],n=a=0,o=u,h=_;else{if(9!=arguments.length)throw Error("Invalid number of arguments");n=arguments[1],a=arguments[2],o=arguments[3],h=arguments[4],e=arguments[5],i=arguments[6],r=arguments[7],s=arguments[8]}var f=this.get_Coords(e,i),p=[],g=10,m=10;if(p.push(" <g_vml_:group",' coordsize="',S*g,",",S*m,'"',' coordorigin="0,0"',' style="width:',g,"px;height:",m,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]){var x=[];x.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",d(f.x/S),",","Dy=",d(f.y/S),"");var v=f,w=this.get_Coords(e+r,i),C=this.get_Coords(e,i+s),b=this.get_Coords(e+r,i+s);v.x=y.max(v.x,w.x,C.x,b.x),v.y=y.max(v.y,w.y,C.y,b.y),p.push("padding:0 ",d(v.x/S),"px ",d(v.y/S),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",x.join(""),", sizingmethod='clip');")}else p.push("top:",d(f.y/S),"px;left:",d(f.x/S),"px;");p.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',S*r,"px;"," height:",S*s,'px;"',' cropleft="',n/u,'"',' croptop="',a/_,'"',' cropright="',(u-n-o)/u,'"',' cropbottom="',(_-a-h)/_,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},E.stroke=function(t){var e=[],i=o(t?this.fillStyle:this.strokeStyle),r=i.color,s=i.alpha*this.globalAlpha,n=10,a=10;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',n,"px;height:",a,'px;"',' coordorigin="0 0" coordsize="',S*n," ",S*a,'"',' stroked="',!t,'"',' path="');for(var l={x:null,y:null},c={x:null,y:null},u=0;u<this.currentPath_.length;u++){var _,f=this.currentPath_[u];switch(f.type){case"moveTo":_=f,e.push(" m ",d(f.x),",",d(f.y));break;case"lineTo":e.push(" l ",d(f.x),",",d(f.y));break;case"close":e.push(" x "),f=null;break;case"bezierCurveTo":e.push(" c ",d(f.cp1x),",",d(f.cp1y),",",d(f.cp2x),",",d(f.cp2y),",",d(f.x),",",d(f.y));break;case"at":case"wa":e.push(" ",f.type," ",d(f.x-this.arcScaleX_*f.radius),",",d(f.y-this.arcScaleY_*f.radius)," ",d(f.x+this.arcScaleX_*f.radius),",",d(f.y+this.arcScaleY_*f.radius)," ",d(f.xStart),",",d(f.yStart)," ",d(f.xEnd),",",d(f.yEnd))}f&&((null==l.x||f.x<l.x)&&(l.x=f.x),(null==c.x||f.x>c.x)&&(c.x=f.x),(null==l.y||f.y<l.y)&&(l.y=f.y),(null==c.y||f.y>c.y)&&(c.y=f.y))}if(e.push(' ">'),t)if("object"==typeof this.fillStyle){var p=this.fillStyle,g=0,m={x:0,y:0},x=0,v=1;if("gradient"==p.type_){var w=p.x0_/this.arcScaleX_,C=p.y0_/this.arcScaleY_,b=p.x1_/this.arcScaleX_,T=p.y1_/this.arcScaleY_,P=this.get_Coords(w,C),k=this.get_Coords(b,T),E=k.x-P.x,M=k.y-P.y;g=180*Math.atan2(E,M)/Math.PI,0>g&&(g+=360),1e-6>g&&(g=0)}else{var P=this.get_Coords(p.x0_,p.y0_),X=c.x-l.x,Y=c.y-l.y;m={x:(P.x-l.x)/X,y:(P.y-l.y)/Y},X/=this.arcScaleX_*S,Y/=this.arcScaleY_*S;var L=y.max(X,Y);x=2*p.r0_/L,v=2*p.r1_/L-x}var j=p.colors_;j.sort(function(t,e){return t.offset-e.offset});for(var A=j.length,V=j[0].color,z=j[A-1].color,H=j[0].alpha*this.globalAlpha,R=j[A-1].alpha*this.globalAlpha,W=[],u=0;A>u;u++){var O=j[u];W.push(O.offset*v+x+" "+O.color)}e.push('<g_vml_:fill type="',p.type_,'"',' method="none" focus="100%"',' color="',V,'"',' color2="',z,'"',' colors="',W.join(","),'"',' opacity="',R,'"',' g_o_:opacity2="',H,'"',' angle="',g,'"',' focusposition="',m.x,",",m.y,'" />')}else e.push('<g_vml_:fill color="',r,'" opacity="',s,'" />');else{var D=this.lineScale_*this.lineWidth;1>D&&(s*=D),e.push("<g_vml_:stroke",' opacity="',s,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',h(this.lineCap),'"',' weight="',D,'px"',' color="',r,'" />')}e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},E.fill=function(){this.stroke(!0)},E.closePath=function(){this.currentPath_.push({type:"close"})},E.get_Coords=function(t,e){var i=this.m_;return{x:S*(t*i[0][0]+e*i[1][0]+i[2][0])-w,y:S*(t*i[0][1]+e*i[1][1]+i[2][1])-w}},E.save=function(){var t={};a(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=n(s(),this.m_)},E.restore=function(){a(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},E.translate=function(t,e){var i=[[1,0,0],[0,1,0],[t,e,1]];_(this,n(i,this.m_),!1)},E.rotate=function(t){var e=m(t),i=g(t),r=[[e,i,0],[-i,e,0],[0,0,1]];_(this,n(r,this.m_),!1)},E.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e;var i=[[t,0,0],[0,e,0],[0,0,1]];_(this,n(i,this.m_),!0)},E.transform=function(t,e,i,r,s,a){var o=[[t,e,0],[i,r,0],[s,a,1]];_(this,n(o,this.m_),!0)},E.setTransform=function(t,e,i,r,s,n){var a=[[t,e,0],[i,r,0],[s,n,1]];_(this,a,!0)},E.clip=function(){},E.arcTo=function(){},E.createPattern=function(){return new p},f.prototype.addColorStop=function(t,e){e=o(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},G_vmlCanvasManager=b,CanvasRenderingContext2D=l,CanvasGradient=f,CanvasPattern=p}()});
;define("ihome:widget/js/item-display/item-display.js",function(i,e,t){function o(i){var e=Math.floor(i/86400),t=Math.floor(i/3600)%24,o=Math.floor(i/60)%60,n="";return e&&(n+=e+"天"),"00"!==t&&(n+=t+"小时"),"00"!==o&&(n+=o+"分钟"),n}var n=i("common:widget/js/util/tangram/tangram.js"),a=i("common:widget/js/ui/base/base.js"),s=i("common:widget/js/util/event/event.js"),d=(i("common:widget/js/logic/login/login.js"),i("common:widget/js/logic/submit/submit.js")),r=(i("common:widget/js/util/log/log.js"),i("common:widget/js/ui/carousel/carousel.js"),i("common:widget/js/ui/dialog/dialog.js")),m=i("common:widget/js/logic/task/task.js"),c=function(i,e){var t=i.item_id,o=i.number,n=i.view_id,a=i.series_level;e=e?1:0===o?1:0;var s=38==t?520:470;r.iframe({width:500,height:s,titleText:"我的物品",content:"/static/ihome/item/html/wppop.html?v=2.1&itemId="+t+"&num="+o+"&view="+n+"&show="+e+"&lv="+a,close:function(){window.top.ikUitemUsed&&(location.reload(!0),window.top.ikUitemUsed=!1)}})};window.showGiftBoxAward=function(i){if(!(128>i||i>131)){var e={128:"铜宝箱",129:"银宝箱",130:"金宝箱",131:"钻石宝箱"},t=e[""+i];m.openAward({name:"宝箱开启",reward:[{name:t,itemId:i,type:"item",value:1}]},function(){window.location.reload(!0)},function(){n(".finish-award-gift-box").trigger("click")})}},window.showLuckyCard=function(){n.ajax({url:"/shop/naconsume?cmd=card",dataType:"json",success:function(i){var e=i.data;10503==i.errno?r.alert("不要半途而废，再抽一次吧！"):(m.openAward({name:"幸运卡开启",reward:[{name:e.name,itemId:e.gid,type:"item",value:1}]},function(){window.location.reload(!0)},function(){n(".finish-award-gift-box").trigger("click")}),n(".finish-award").addClass("lucky-card"),n(".lucky-card img").prop("src",e.icon))}})},window.expCard=function(i){n.ajax({url:"/shop/naconsume?cmd=prop&gid="+i,dataType:"json",success:function(i){0==i.errno?(r.alert(i.data.msg),n(".dialog-btn").on("click",function(){location.reload()})):r.alert(i.errmsg)},error:function(){r.alert("使用失败")}})};var l=function(i,e){var t=decodeURI(e.item_name),o="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/item/img/"+e.item_id+"/item_s_"+e.series_level+".gif";return['<div class="item" index="'+i+'">','<img src="'+o+'" alt="'+t+'" />','<div class="item-name">'+t+"</div>","1"===e.number_from_task?"":'<div class="item-num">'+e.number_from_task+"</div>","</div>"].join("")},u=a(function(i){var e=this;e.options={fromTask:!1,viewSize:7,displayType:["honour","treasure","property"],target:null,button:!0,autoRender:!0},n.extend(e.options,i),n.sio("/ihome/myitem/ucenter").callByServer(function(i){e.items=[],n(e.options.displayType).each(function(){e.items=e.items.concat(i[this])}),e.items=n(e.items).filter(function(){return e.options.fromTask&&this.number_from_task>0&&!(this.id>=86&&this.id<=91||39==this.id)?!0:!1}),e.options.autoRender&&e.render()})}).extend({render:function(){var i=this,e=[];n(i.items).each(function(i,t){e.push(l(i,t))}),n(i.options.target).html(e.join("")),n(i.options.target).find(".item").on("click",function(){c(i.items[this.getAttribute("index")])})},fill:function(i){var e=this;n(e.options.target).empty();for(var t=i;t<Math.min(i+e.options.viewSize,e.items.length);t++){var o=e.items[t];n("<li>").html(l(o)).data("itemid",o.item_id).data("number",o.number).data("viewid",o.view_id).data("level",o.series_level).appendTo(n(e.options.target))}u.setup(e.options.target)}});u.setup=function(i){var e={86:{shopid:"902",time:"1天0小时0分钟",days:"1",type:"replyBold"},87:{shopid:"901",time:"7天0小时0分钟",days:"7",type:"replyBold"},88:{shopid:"900",time:"30天0小时0分钟",days:"30",type:"replyBold"},89:{shopid:"899",time:"1天0小时0分钟",days:"1",type:"replyRed"},90:{shopid:"898",time:"7天0小时0分钟",days:"7",type:"replyRed"},91:{shopid:"897",time:"30天0小时0分钟",days:"30",type:"replyRed"}};n(i).find("li").each(function(i,t){var a={item_id:n(t).data("itemid"),number:n(t).data("number"),view_id:n(t).data("viewid"),series_level:n(t).data("level")};n(t).click(function(){var i=!1;n.each(e,function(e,m){if(e===a.item_id){i=!0;var c=window.F.context("privilegeCard")[m.type],l=n(t).find(".item-name").text(),u="",p="马上使用",f="replyBold"===m.type?"可以在回答提问时，使用加粗字体":"可以在回答提问时，使用加红字体";1===c.is_card&&(u='<p class="f-red f-bold">使用中 剩余时间：'+o(c.remain_time)+'<a href="/ihome?type=recommend" class="ml-5 f-normal">>马上去答题>></a></p>',p="确定");var h=r.alert(['<div class="pvl-item-dialog f-12">','<p><span class="f-red">功能介绍：</span>',f,"</p>",'<p><span class="f-red">有效时间：</span>',m.time,"</p>",u,"</div>"].join(""),{width:320,height:180,title:l,buttons:[{text:p,click:function(){if(h.close(),1!==c.is_card){var i={cm:100900,itemid:a.item_id,number:1};s.fire("login.check",{isLogin:function(){new d({params:i,hasJump:!1,autoRefresh:!0,close:function(){window.location.reload(!0)},beforeJump:function(){var i=new r({width:350,height:160,title:"知道提示",content:'<div class="mt-20">使用成功！</div>',autoDispose:!0});setTimeout(function(){i.close()},1e3)}})}})}}}]})}}),i||c(a)}),n(t).find(".btn-item-get").click(function(i){i.preventDefault(),i.stopPropagation();var t=!1;n.each(e,function(i,e){i===a.item_id&&(t=!0,window.open("http://zhidao.baidu.com/shop/view?id="+e.shopid))}),t||c(a,1)}),n(t).find(".btn-item-use").click(function(i){i.preventDefault()})})},t.exports=u});
;define("ihome:widget/js/jcrop/jcrop.jquery.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js");t.Jcrop=function(e,n){function o(e){return Math.round(e)+"px"}function r(e){return J.baseClass+"-"+e}function i(){return t.fx.step.hasOwnProperty("backgroundColor")}function a(e){var n=t(e).offset();return[n.left,n.top]}function s(e){return[e.pageX-P[0],e.pageY-P[1]]}function c(e){"object"!=typeof e&&(e={}),J=t.extend(J,e),t.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof J[t]&&(J[t]=function(){})})}function u(e,t,n){if(P=a(Y),pt.setCursor("move"===e?e:e+"-resize"),"move"===e)return pt.activateHandlers(l(t),b,n);var o=lt.getFixed(),r=h(e),i=lt.getCorner(h(r));lt.setPressed(lt.getCorner(r)),lt.setCurrent(i),pt.activateHandlers(d(e,o),b,n)}function d(e,t){return function(n){if(J.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}lt.setCurrent(n),ft.update()}}function l(e){var t=e;return gt.watchKeys(),function(e){lt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ft.update()}}function h(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function f(e){return function(t){return J.disabled?!1:"move"!==e||J.allowMove?(P=a(Y),ot=!0,u(e,s(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function p(e,t,n){var o=e.width(),r=e.height();o>t&&t>0&&(o=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,o=n/e.height()*e.width()),tt=e.width()/o,nt=e.height()/r,e.width(o).height(r)}function g(e){return{x:e.x*tt,y:e.y*nt,x2:e.x2*tt,y2:e.y2*nt,w:e.w*tt,h:e.h*nt}}function b(){var e=lt.getFixed();e.w>J.minSelect[0]&&e.h>J.minSelect[1]?(ft.enableHandles(),ft.done()):ft.release(),pt.setCursor(J.allowSelect?"crosshair":"default")}function w(e){if(J.disabled)return!1;if(!J.allowSelect)return!1;ot=!0,P=a(Y),ft.disableHandles(),pt.setCursor("crosshair");var t=s(e);return lt.setPressed(t),ft.update(),pt.activateHandlers(v,b,"touch"===e.type.substring(0,5)),gt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function v(e){lt.setCurrent(e),ft.update()}function y(){var e=t("<div></div>").addClass(r("tracker"));return R&&e.css({opacity:0,backgroundColor:"white"}),e}function m(e){G.removeClass().addClass(r("holder")).addClass(e)}function x(e,t){function n(){window.setTimeout(v,l)}var o=e[0]/tt,r=e[1]/nt,i=e[2]/tt,a=e[3]/nt;if(!rt){var s=lt.flipCoords(o,r,i,a),c=lt.getFixed(),u=[c.x,c.y,c.x2,c.y2],d=u,l=J.animationDelay,h=s[0]-u[0],f=s[1]-u[1],p=s[2]-u[2],g=s[3]-u[3],b=0,w=J.swingSpeed;o=d[0],r=d[1],i=d[2],a=d[3],ft.animMode(!0);var v=function(){return function(){b+=(100-b)/w,d[0]=Math.round(o+b/100*h),d[1]=Math.round(r+b/100*f),d[2]=Math.round(i+b/100*p),d[3]=Math.round(a+b/100*g),b>=99.8&&(b=100),100>b?(S(d),n()):(ft.done(),ft.animMode(!1),"function"==typeof t&&t.call(bt))}}();n()}}function C(e){S([e[0]/tt,e[1]/nt,e[2]/tt,e[3]/nt]),J.onSelect.call(bt,g(lt.getFixed())),ft.enableHandles()}function S(e){lt.setPressed([e[0],e[1]]),lt.setCurrent([e[2],e[3]]),ft.update()}function k(){return g(lt.getFixed())}function z(){return lt.getFixed()}function M(e){c(e),B()}function O(){J.disabled=!0,ft.disableHandles(),ft.setCursor("default"),pt.setCursor("default")}function j(){J.disabled=!1,B()}function F(){ft.done(),pt.activateHandlers(null,null)}function H(){G.remove(),E.show(),E.css("visibility","visible"),t(e).removeData("Jcrop")}function D(e,t){ft.release(),O();var n=new Image;n.onload=function(){var o=n.width,r=n.height,i=J.boxWidth,a=J.boxHeight;Y.width(o).height(r),Y.attr("src",e),N.attr("src",e),p(Y,i,a),L=Y.width(),X=Y.height(),N.width(L).height(X),st.width(L+2*at).height(X+2*at),G.width(L).height(X),ht.resize(L,X),j(),"function"==typeof t&&t.call(bt)},n.src=e}function I(e,t,n){var o=t||J.bgColor;J.bgFade&&i()&&J.fadeTime&&!n?e.animate({backgroundColor:o},{queue:!1,duration:J.fadeTime}):e.css("backgroundColor",o)}function B(e){J.allowResize?e?ft.enableOnly():ft.enableHandles():ft.disableHandles(),pt.setCursor(J.allowSelect?"crosshair":"default"),ft.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(tt=J.trueSize[0]/L,nt=J.trueSize[1]/X),J.hasOwnProperty("setSelect")&&(C(J.setSelect),ft.done(),delete J.setSelect),ht.refresh(),J.bgColor!=ct&&(I(J.shade?ht.getShades():G,J.shade?J.shadeColor||J.bgColor:J.bgColor),ct=J.bgColor),ut!=J.bgOpacity&&(ut=J.bgOpacity,J.shade?ht.refresh():ft.setBgOpacity(ut)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,et=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(Y.attr("src",J.outerImage),delete J.outerImage),ft.refresh()}var P,J=t.extend({},t.Jcrop.defaults),A=navigator.userAgent.toLowerCase(),R=/msie/.test(A),T=/msie [1-6]\./.test(A);"object"!=typeof e&&(e=t(e)[0]),"object"!=typeof n&&(n={}),c(n);var K={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},E=t(e),q=!0;if("IMG"==e.tagName){if(0!=E[0].width&&0!=E[0].height)E.width(E[0].width),E.height(E[0].height);else{var W=new Image;W.src=E[0].src,E.width(W.width),E.height(W.height)}var Y=E.clone().removeAttr("id").css(K).show();Y.width(E.width()),Y.height(E.height()),E.after(Y).hide()}else Y=E.css(K).show(),q=!1,null===J.shade&&(J.shade=!0);p(Y,J.boxWidth,J.boxHeight);var L=Y.width(),X=Y.height(),G=t("<div />").width(L).height(X).addClass(r("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(E).append(Y);J.addClass&&G.addClass(J.addClass);var N=t("<div />"),V=t("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Q=t("<div />").width("100%").height("100%").css("zIndex",320),U=t("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=lt.getFixed();J.onDblClick.call(bt,e)}).insertBefore(Y).append(V,Q);q&&(N=t("<img />").attr("src",Y.attr("src")).css(K).width(L).height(X),V.append(N)),T&&U.css({overflowY:"hidden"});var Z,$,_,et,tt,nt,ot,rt,it,at=J.boundary,st=y().width(L+2*at).height(X+2*at).css({position:"absolute",top:o(-at),left:o(-at),zIndex:290}).mousedown(w),ct=J.bgColor,ut=J.bgOpacity;P=a(Y);var dt=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<n.length;e++){var r=n[e];r="on"+r;var i=r in o;i||(o.setAttribute(r,"return;"),i="function"==typeof o[r]),t[n[e]]=i}return t.touchstart&&t.touchend&&t.touchmove}catch(a){return!1}}function t(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:e()}return{createDragger:function(e){return function(t){return J.disabled?!1:"move"!==e||J.allowMove?(P=a(Y),ot=!0,u(e,s(dt.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return w(dt.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),lt=function(){function e(e){e=a(e),p=h=e[0],g=f=e[1]}function t(e){e=a(e),d=e[0]-p,l=e[1]-g,p=e[0],g=e[1]}function n(){return[d,l]}function o(e){var t=e[0],n=e[1];0>h+t&&(t-=t+h),0>f+n&&(n-=n+f),g+n>X&&(n+=X-(g+n)),p+t>L&&(t+=L-(p+t)),h+=t,p+=t,f+=n,g+=n}function r(e){var t=i();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function i(){if(!J.aspectRatio)return c();var e,t,n,o,r=J.aspectRatio,i=J.minSize[0]/tt,a=J.maxSize[0]/tt,d=J.maxSize[1]/nt,l=p-h,b=g-f,w=Math.abs(l),v=Math.abs(b),y=w/v;return 0===a&&(a=10*L),0===d&&(d=10*X),r>y?(t=g,n=v*r,e=0>l?h-n:n+h,0>e?(e=0,o=Math.abs((e-h)/r),t=0>b?f-o:o+f):e>L&&(e=L,o=Math.abs((e-h)/r),t=0>b?f-o:o+f)):(e=p,o=w/r,t=0>b?f-o:f+o,0>t?(t=0,n=Math.abs((t-f)*r),e=0>l?h-n:n+h):t>X&&(t=X,n=Math.abs(t-f)*r,e=0>l?h-n:n+h)),e>h?(i>e-h?e=h+i:e-h>a&&(e=h+a),t=t>f?f+(e-h)/r:f-(e-h)/r):h>e&&(i>h-e?e=h-i:h-e>a&&(e=h-a),t=t>f?f+(h-e)/r:f-(h-e)/r),0>e?(h-=e,e=0):e>L&&(h-=e-L,e=L),0>t?(f-=t,t=0):t>X&&(f-=t-X,t=X),u(s(h,f,e,t))}function a(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>L&&(e[0]=L),e[1]>X&&(e[1]=X),[Math.round(e[0]),Math.round(e[1])]}function s(e,t,n,o){var r=e,i=n,a=t,s=o;return e>n&&(r=n,i=e),t>o&&(a=o,s=t),[r,a,i,s]}function c(){var e,t=p-h,n=g-f;return Z&&Math.abs(t)>Z&&(p=t>0?h+Z:h-Z),$&&Math.abs(n)>$&&(g=n>0?f+$:f-$),et/nt&&Math.abs(n)<et/nt&&(g=n>0?f+et/nt:f-et/nt),_/tt&&Math.abs(t)<_/tt&&(p=t>0?h+_/tt:h-_/tt),0>h&&(p-=h,h-=h),0>f&&(g-=f,f-=f),0>p&&(h-=p,p-=p),0>g&&(f-=g,g-=g),p>L&&(e=p-L,h-=e,p-=e),g>X&&(e=g-X,f-=e,g-=e),h>L&&(e=h-X,g-=e,f-=e),f>X&&(e=f-X,g-=e,f-=e),u(s(h,f,p,g))}function u(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,l,h=0,f=0,p=0,g=0;return{flipCoords:s,setPressed:e,setCurrent:t,getOffset:n,moveOffset:o,getCorner:r,getFixed:i}}(),ht=function(){function e(e,t){p.left.css({height:o(t)}),p.right.css({height:o(t)})}function n(){return r(lt.getFixed())}function r(e){p.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),p.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(X-e.y2)}),p.right.css({left:o(e.x2),width:o(L-e.x2)}),p.left.css({width:o(e.x)})}function i(){return t("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(f)}function a(){h||(h=!0,f.insertBefore(Y),n(),ft.setBgOpacity(1,0,1),N.hide(),s(J.shadeColor||J.bgColor,1),ft.isAwake()?u(J.bgOpacity,1):u(1,1))}function s(e,t){I(l(),e,t)}function c(){h&&(f.remove(),N.show(),h=!1,ft.isAwake()?ft.setBgOpacity(J.bgOpacity,1,1):(ft.setBgOpacity(1,1,1),ft.disableHandles()),I(G,0,1))}function u(e,t){h&&(J.bgFade&&!t?f.animate({opacity:1-e},{queue:!1,duration:J.fadeTime}):f.css({opacity:1-e}))}function d(){J.shade?a():c(),ft.isAwake()&&u(J.bgOpacity)}function l(){return f.children()}var h=!1,f=t("<div />").css({position:"absolute",zIndex:240,opacity:0}),p={top:i(),left:i().height(X),right:i().height(X),bottom:i()};return{update:n,updateRaw:r,getShades:l,setBgColor:s,enable:a,disable:c,resize:e,refresh:d,opacity:u}}(),ft=function(){function e(e){var n=t("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(r(e));return V.append(n),n}function n(e,n){var o=t("<div />").mousedown(f(e)).css({cursor:e+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+e);return dt.support&&o.bind("touchstart.jcrop",dt.createDragger(e)),Q.append(o),o}function i(e){var t=J.handleSize,o=n(e,O++).css({opacity:J.handleOpacity}).addClass(r("handle"));return t&&o.width(t).height(t),o}function a(e){return n(e,O++).addClass("jcrop-dragbar")}function s(e){var t;for(t=0;t<e.length;t++)H[e[t]]=a(e[t])}function c(t){var n,o;for(o=0;o<t.length;o++){switch(t[o]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}j[t[o]]=e(n)}}function u(e){var t;for(t=0;t<e.length;t++)F[e[t]]=i(e[t])}function d(e,t){J.shade||N.css({top:o(-t),left:o(-e)}),U.css({top:o(t),left:o(e)})}function l(e,t){U.width(Math.round(e)).height(Math.round(t))}function h(){var e=lt.getFixed();lt.setPressed([e.x,e.y]),lt.setCurrent([e.x2,e.y2]),p()}function p(e){return M?b(e):void 0}function b(e){var t=lt.getFixed();l(t.w,t.h),d(t.x,t.y),J.shade&&ht.updateRaw(t),M||v(),e?J.onSelect.call(bt,g(t)):J.onChange.call(bt,g(t))}function w(e,t,n){(M||t)&&(J.bgFade&&!n?Y.animate({opacity:e},{queue:!1,duration:J.fadeTime}):Y.css("opacity",e))}function v(){U.show(),J.shade?ht.opacity(ut):w(ut,!0),M=!0}function m(){S(),U.hide(),J.shade?ht.opacity(1):w(1),M=!1,J.onRelease.call(bt)}function x(){D&&Q.show()}function C(){return D=!0,J.allowResize?(Q.show(),!0):void 0}function S(){D=!1,Q.hide()}function k(e){e?(rt=!0,S()):(rt=!1,C())}function z(){k(!1),h()}var M,O=370,j={},F={},H={},D=!1;J.dragEdges&&t.isArray(J.createDragbars)&&s(J.createDragbars),t.isArray(J.createHandles)&&u(J.createHandles),J.drawBorders&&t.isArray(J.createBorders)&&c(J.createBorders),t(document).bind("touchstart.jcrop-ios",function(e){t(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()});var I=y().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return dt.support&&I.bind("touchstart.jcrop",dt.createDragger("move")),V.append(I),S(),{updateVisible:p,update:b,release:m,refresh:h,isAwake:function(){return M},setCursor:function(e){I.css("cursor",e)},enableHandles:C,enableOnly:function(){D=!0},showHandles:x,disableHandles:S,animMode:k,setBgOpacity:w,done:z}}(),pt=function(){function e(e){st.css({zIndex:450}),e?t(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",c):h&&t(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",r)}function n(){st.css({zIndex:290}),t(document).unbind(".jcrop")}function o(e){return d(s(e)),!1}function r(e){return e.preventDefault(),e.stopPropagation(),ot&&(ot=!1,l(s(e)),ft.isAwake()&&J.onSelect.call(bt,g(lt.getFixed())),n(),d=function(){},l=function(){}),!1}function i(t,n,o){return ot=!0,d=t,l=n,e(o),!1}function a(e){return d(s(dt.cfilter(e))),!1}function c(e){return r(dt.cfilter(e))}function u(e){st.css("cursor",e)}var d=function(){},l=function(){},h=J.trackDocument;return h||st.mousemove(o).mouseup(r).mouseout(r),Y.before(st),{activateHandlers:i,setCursor:u}}(),gt=function(){function e(){J.keySupport&&(i.show(),i.focus())}function n(){i.hide()}function o(e,t,n){J.allowMove&&(lt.moveOffset([t,n]),ft.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function r(e){if(e.ctrlKey||e.metaKey)return!0;it=e.shiftKey?!0:!1;var t=it?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:J.allowSelect&&ft.release();break;case 9:return!0}return!1}var i=t('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),a=t("<div />").css({position:"absolute",overflow:"hidden"}).append(i);return J.keySupport&&(i.keydown(r).blur(n),T||!J.fixedSupport?(i.css({position:"absolute",left:"-20px"}),a.append(i).insertBefore(Y)):i.insertBefore(Y)),{watchKeys:e}}();dt.support&&st.bind("touchstart.jcrop",dt.newSelection),Q.hide(),B(!0);var bt={setImage:D,animateTo:x,setSelect:C,setOptions:M,tellSelect:k,tellScaled:z,setClass:m,disable:O,enable:j,cancel:F,release:ft.release,destroy:H,focus:gt.watchKeys,getBounds:function(){return[L*tt,X*nt]},getWidgetSize:function(){return[L,X]},getScaleFactor:function(){return[tt,nt]},getOptions:function(){return J},ui:{holder:G,selection:U}};return R&&G.bind("selectstart",function(){return!1}),E.data("Jcrop",bt),bt},t.fn.Jcrop=function(e,n){var o;return this.each(function(){if(t(this).data("Jcrop")){if("api"===e)return t(this).data("Jcrop");t(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?t.Jcrop.Loader(this,function(){t(this).css({display:"block",visibility:"hidden"}),o=t.Jcrop(this,e),t.isFunction(n)&&n.call(o)}):(t(this).css({display:"block",visibility:"hidden"}),o=t.Jcrop(this,e),t.isFunction(n)&&n.call(o))}),this},t.Jcrop.Loader=function(e,n,o){function r(){a.complete?(i.unbind(".jcloader"),t.isFunction(n)&&n.call(a)):window.setTimeout(r,50)}var i=t(e),a=i[0];i.bind("load.jcloader",r).bind("error.jcloader",function(){i.unbind(".jcloader"),t.isFunction(o)&&o.call(a)}),a.complete&&t.isFunction(n)&&(i.unbind(".jcloader"),n.call(a))},t.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}});
;define("ihome:widget/js/mini-pager/mini-pager.js",function(e,t,n){var a=e("common:widget/js/util/tangram/tangram.js"),i=e("common:widget/js/ui/base/base.js"),r=i(function(e){this.options=a.extend({totalPage:1},e),this.currentPage=1}).extend({render:function(e){var t=this;t.$el=a(e),t.$el.addClass("mini-pager").html('<a class="btn-prev" href="#"></a><span class="mini-pager-text"><strong>1</strong>/'+t.options.totalPage+'</span><a class="btn-next" href="#"></a>'),t.$el.on("click",".btn-prev",function(e){e.preventDefault(),1!=t.currentPage&&(t.currentPage-=1,t.$update())}),t.$el.on("click",".btn-next",function(e){e.preventDefault(),t.currentPage!=t.options.totalPage&&(t.currentPage+=1,t.$update())})},$update:function(){this.$el.find(".mini-pager-text strong").text(this.currentPage),this.fire("pagechange",{pageNum:this.currentPage})}});n.exports=r});
;define("ihome:widget/js/page/index.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js"),o=e("common:widget/js/logic/task/task.js"),n=t(".ihome-menu-tab").offset();"#waitingMeAnswer"==window.location.hash&&t(window).scrollTop(n.top-50),1==F.context("user").isLogin&&~location.href.indexOf("action=open_task_list")&&setTimeout(function(){o.openTaskListDialog()},1e3),t(".i-common-news-close")&&t(".i-common-news-close").on("click",function(e){e.preventDefault(),e.stopPropagation(),t(".a-common-news-wrapper").fadeOut();var o=(new Date).Format("yyyy-MM-dd");t.cookie.set("ifCommonClose",o,{path:"/",expires:31536e6})}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e}});
;define("ihome:widget/js/pop-tip/pop-tip.js",function(o,t,e){{var i=o("common:widget/js/util/tangram/tangram.js");o("common:widget/js/util/event/event.js")}e.exports=function(o,t){var e=i.extend({},t);i("#pop-layer-box").remove();var p=i("<div />").prop({id:"pop-layer-box"}).addClass("pop-layer-box").html(o).appendTo(document.body),a=i(window).height()/2+i(window).scrollTop()-100,n=(i(window).width()-p.width()-60)/2;a=a>50?a:50,n=n>400?n:400,p.css({left:n+"px",top:a+"px",opacity:0}),p.animate({top:a-25,opacity:1},200),setTimeout(function(){p.animate({top:a,opacity:0},200,function(){p.remove(),e.callback&&e.callback()})},2e3)}});
;define("ihome:widget/js/scrollbar/scrollbar.js",function(t,i,s){var o=t("common:widget/js/util/tangram/tangram.js"),e=function(t,i,s,e){var n=o(t);this.$bar=o(i,n),(this.overflow=!!s)?this.minLeft=n.width()-this.$bar.width():this.maxLeft=n.width()-this.$bar.width(),this.slave=e,this.left=0,this.init()};e.prototype={init:function(){this.bind()},bind:function(){this.$bar.on("mousedown",o.proxy(this._mousedown,this))},_mousedown:function(t){this.pageX=t.pageX,o(document.body).on("mousemove.scrollbar",o.proxy(this._mousemove,this)),o(document.body).on("mouseup.scrollbar",o.proxy(this._mouseup,this))},_mouseup:function(){o(document.body).off("mousemove.scrollbar")},sync:function(t){this.slave&&this.slave.ayncTo(t)},ayncTo:function(t){var i=(this.overflow?this.minLeft:this.maxLeft)*t;this.$bar.css("left",i),this.left=i},_mousemove:function(t){var i=t.pageX-this.pageX,s=this.left+i;this.pageX=t.pageX,s=this.overflow?Math.min(Math.max(this.minLeft,s),0):Math.min(Math.max(0,s),this.maxLeft),this.left=s,this.sync(s/(this.overflow?this.minLeft:this.maxLeft)),this.$bar.css("left",s)}},s.exports.init=function(t,i,s,o){return new e(t,i,s,o)}});
;define("ihome:widget/js/set-tag-new/set-tag-new.js",function(t,e,a){var s=t("common:widget/js/util/tangram/tangram.js"),n=(t("common:widget/js/util/event/event.js"),t("common:widget/js/ui/base/base.js")),o=(t("common:widget/js/util/template/template.js"),t("common:widget/js/ui/dialog/dialog.js")),i=t("common:widget/js/util/tangram/string.js"),r=n().extend({init:function(t){var e=this;e.tagIndex=0,e.tags={name:[],type:[],obj:[]},s(t.sortable).sortable({revert:!0}),e.fire("before",e)},search:function(t){var e=this,a=s(t).val();s(t).hasClass("error")||(""==s(t).val()&&s(t).addClass("error"),s.post("/api/gettag",{type:1,wd:a},function(t){t&&0==t.errno&&e.fire("searchSource",{kw:a,ret:t})},"json"))},submit:function(t){var e=this,a=t.tags,n=t.api||"/submit/ajax",o={cm:100522,tags:a.name.join("	")},i=F.context("user")&&F.context("user").stoken;i&&(o.stoken=i),s.post(n,o,function(n){if(n&&0==n.errorNo)e.fire("success",a.obj),t.successDeal&&"function"==typeof t.successDeal&&t.successDeal();else{var o="抱歉，未能找到您想添加的兴趣标签，请重新尝试";s("#tag-search-input").val(o).addClass("error"),t.errorDeal&&"function"==typeof t.errorDeal&&t.errorDeal()}},"json")},bindEvent:function(){},getTags:function(t){var e={name:[],type:[],obj:[]};return s(".tag-item.active, .tag-item i",t).each(function(){var t="A"==this.tagName?s(this):s(this).parent();e.name.push(t.text()),e.type.push(t.data("type")),e.obj.push({name:t.text(),type:t.data("type")})}),e},addTag:function(t,e,a,n){var o=this,r=s("<a />").addClass("tag-item").data("type",e).html("<span>"+i.encodeHTML(t)+"</span>").appendTo(a);return n?s("<i/>").addClass("i-del").on("click",function(){s(this).parent().remove(),o.fire("delTag",o)}).appendTo(r):r.on("click",function(){var t=s(this);t.hasClass("active")?t.removeClass("active"):t.addClass("active")}),n&&o.sortable&&r.css("cursor","move").draggable({containment:"parent",connectToSortable:o.sortable[0],revert:"invalid",start:function(){s(this).css("zIndex",o.tagIndex++)}}),r},delTag:function(){},html:function(){},dialog:function(t){var e=this,a=s.extend({title:t.title||"我的兴趣",dialogClass:"dialog-set-tag",content:e.html(t.type),autoDispose:!1});return new o(a)},show:function(){},close:function(){},reset:function(){}});a.exports=r});
;define("ihome:widget/js/set-tag/sortable.js",function(t){var e=t("common:widget/lib/jquery/jquery.js");t("common:widget/lib/jquery.ui/jquery.ui.core.js"),t("common:widget/lib/jquery.ui/jquery.ui.widget.js"),t("common:widget/lib/jquery.ui/jquery.ui.position.js"),t("common:widget/lib/jquery.ui/jquery.ui.mouse.js"),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(s=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(s=e(t.target)),s&&(!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,s){var o,r,n=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&"auto"!==n.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",n.cursor),this.storedStylesheet=e("<style>*{ cursor: "+n.cursor+" !important; }</style>").appendTo(r)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,o,r,n=this.options,h=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?h=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(h=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?h=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(h=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),h!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],o=s.item[0],r=this._intersectsWithPointer(s),r&&s.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,o=this.placeholder.offset(),r=this.options.axis,n={};r&&"x"!==r||(n.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(n.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(n,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,a=h+t.height,l=this.offset.click.top,c=this.offset.click.left,p="x"===this.options.axis||s+l>h&&a>s+l,f="y"===this.options.axis||e+c>r&&n>e+c,u=p&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function i(){h.push(this)}var s,o,r,n,h=[],a=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(r=e(l[s]),o=r.length-1;o>=0;o--)n=e.data(r[o],this.widgetFullName),n&&n!==this&&!n.options.disabled&&a.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=a.length-1;s>=0;s--)a[s][0].each(i);return e(h)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,o,r,n,h,a,l,c=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(i=f.length-1;i>=0;i--)for(o=e(f[i]),s=o.length-1;s>=0;s--)r=e.data(o[s],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(p.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=p.length-1;i>=0;i--)for(n=p[i][1],h=p[i][0],s=0,l=h.length;l>s;s++)a=e(h[s]),a.data(this.widgetName+"-item",n),c.push({item:a,instance:n,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,o,r;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=o.outerWidth(),s.height=o.outerHeight()),r=o.offset(),s.left=r.left,s.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===s&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||s.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,r,n,h,a,l,c,p,f=null,u=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(f&&e.contains(this.containers[i].element[0],f.element[0]))continue;f=this.containers[i],u=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(o=1e4,r=null,c=f.floating||this._isFloating(this.currentItem),n=c?"left":"top",h=c?"width":"height",p=c?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[u].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(a=this.items[s].item.offset()[n],l=!1,t[p]-a>this.items[s][h]/2&&(l=!0),Math.abs(t[p]-a)<o&&(o=Math.abs(t[p]-a),r=this.items[s],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[u])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[u].element,!0),this._trigger("change",t,this._uiHash()),this.containers[u]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*s}},_generatePosition:function(t){var i,s,o=this.options,r=t.pageX,n=t.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((n-this.originalPageY)/o.grid[1])*o.grid[1],n=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,s=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:h.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:h.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||o.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(o.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),s=0;s<o.length;s++)o[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;s<o.length;s++)o[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})});
;define("ihome:widget/js/set-tag/set-tag.js",function(t,a,e){var s=t("common:widget/js/util/tangram/tangram.js"),i=(t("common:widget/js/util/event/event.js"),t("common:widget/js/ui/base/base.js")),n=t("common:widget/js/util/template/template.js"),l=t("common:widget/js/ui/dialog/dialog.js"),o=t("common:widget/js/ui/scrollbar/scrollbar.js");t("ihome:widget/js/set-tag/sortable.js");var c,d=t("common:widget/js/util/tangram/string.js"),r=i(function(t){var a=this;a.options=s.extend({title:"我的兴趣",width:"582px",height:"471px",type:"add",askTitle:"",dialogClassName:"",success:function(){},error:function(){}},t),a.delTags=[]}).extend({init:function(t){this.render(t)},render:function(t){var a=this,t=s.extend(a.options,t);a.instance=new l({title:t.title,dialogClass:t.dialogClassName||"dialog-set-tag",content:a.html(t.type),autoDispose:!0,width:t.width,height:t.height,open:function(){s(".dialog-set-tag").delegate(".tag-search-input","focus",function(){s(this).hasClass("error")&&s(this).val("").removeClass("error")}),s(document).bind("keydown",function(t){var t=t||window.event,a=t.keyCode||t.which||t.charCode;13==a&&s(".dialog-set-tag .search-btn").click()})},close:function(){c=!1,s(document).unbind("keydown")},buttons:[{text:c?"保存":"完成",click:function(){"set"==t.type&&(s(a.delTags).each(function(){for(var t=a.tags.length-1;t>=0;t--)a.tags[t].name==this&&a.tags.splice(t,1)}),a.delTags.length=0),("set"==t.type||"add"==t.type)&&a.submit(c?function(){s(".wgt-ihome-filter .tag-setting").click()}:null)}},{text:c?"返回":"取消",click:function(){c&&(c=!1,s(".wgt-ihome-filter .tag-setting").click()),s(this).dialog("close")}}]}),a.instance.setSize({width:parseInt(t.width),height:parseInt(t.height)});var e=a.container=a.instance.getDialogContainer();if("add"==t.type)e.on("click",".search-btn",function(){a.search(s(this).prev())}),e.on("click",".tag-item",function(){var t=s(this);t.hasClass("active")?t.removeClass("active"):t.addClass("active")});else if("set"==t.type){e.on("click",".i-del",function(t){var e=s(this).parent();a.delTags.push(e.text()),e.remove(),t.stopPropagation()}),e.on("click",".addtag-btn",function(){a.close(),c=!0,s(".carousel-inner .tag-item:last").click()});e.find(".dialog-tags").sortable(),e.find(".dialog-tags").disableSelection().find(".tag-item").css("cursor","move")}else("uadmin"==t.type||"qualitysort"==t.type||"qualityTopic"==t.type)&&(e.delegate(".i-del","click",function(t){var e=s(this).parent();a.delTags.push(e.text()),e.remove(),t.stopPropagation()}),e.find(".item-checked").delegate(".tag-item, .third-tags .tags","click",function(){var t=s(this),a=s(".currentTag").find(".tag-item").length;if(a>=3)return s(this).hasClass("tags")?s(".more-labels").append(s(".red-tips")):s(this).parent().parent().prev().append(s(".red-tips")),s(".red-tips").show(),void setTimeout(function(){s(".red-tips").hide()},3e3);var e=!0;s(".currentTag .tag-item").each(function(a,i){s.trim(s(i).text())==s.trim(t.text())&&(e=!1)}),e&&s('<a class="tag-item"><i class="i-del"></i><span>'+t.text()+"</span></a>").insertAfter(".currentTag .currentTitle"),s(this).hasClass("tags")?t.parent().addClass("checked"):t.addClass("active")}))},submit:function(t){var a=this,e=a._getTag(),i={cm:100522,tags:e.name.join("	")},n=F.context("user")&&F.context("user").stoken;n&&(i.stoken=n),s.post("/submit/user",i,function(i){if(i&&0==i.errorNo)F.context("user").tags=a.tags=e.obj,a.close(),a.options.success.call(a,e.obj),s.isFunction(t)&&t();else if(i&&18001==i.errorNo){var n="对不起，您添加的tag过多，请重新选择";s("#tag-search-input").val(n).addClass("error")}else{var n="抱歉，未能找到您想添加的兴趣标签，请重新尝试";s("#tag-search-input").val(n).addClass("error")}},"json")},html:function(t){var a=[];return"add"==t?a.push('<div class="line mb-15">','<input name="tag-search" type="text" value="" placeholder="在此输入兴趣关键字" class="tag-search-input" id="tag-search-input" />','<a class="btn-32-green search-btn ml-10">搜索兴趣</a>',"</div>",'<h1 class="mt-10 mb-15">热门标签</h1>','<div class="dialog-tags-wp mt-15">','<div class="dialog-tags line">','<#if( "object" == typeof hot ){#>',"<#for(var i = 0;i < hot.length;i++){#>",'<a class="tag-item" data-type="<#=hot[i].legal#>">',"<span><#:=hot[i].name#></span>","</a>","<#}#>","<#}#>","</div>","</div>"):"uadmin"==t||"qualitysort"==t||"qualityTopic"==t?(a.push('<div class="tags-wrap">','<span class="red-tips">问题标签不能超过三个</span>','<div class="line question">','<span>问题描述：</span><span class="uadmin-question">',"<#=tags.title#>","</span>","</div>",'<div class="currentTag dialog-tags">','<h1 class="currentTitle">当前标签：</h1>','<#if( "object" == typeof tags.current ){#>',"<#for(var i = 0;i < tags.current.length;i++){#>",'<a class="tag-item" data-type="<#=tags.current[i].legal#>">','<i class="i-del"></i>',"<span><#:=tags.current[i].name#></span>","</a>","<#}#>","<#}#>",'<span class="tag-tips">至多3项</span>',"</div>",'<div class="commonused-tag">','<#if( "object" == typeof tags.commonused && tags.commonused.length > 0 ){#>','<h1 class="mt-15 mb-10">常用标签：</h1>','<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line">',"<#for(var i = 0;i < tags.commonused.length;i++){#>",'<a class="tag-item" data-type="<#=tags.commonused[i]#>">',"<span><#:=tags.commonused[i]#></span>","</a>","<#}#>","</div>","</div>","<#}#>","</div>",'<div class="recommend-tag">','<#if( "object" == typeof tags.recommend && tags.recommend.length > 0){#>','<h1 class="">推荐标签：</h1>','<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line">',"<#for(var i = 0;i < tags.recommend.length;i++){#>",'<a class="tag-item" data-type="<#=tags.recommend[i]#>">',"<span><#:=tags.recommend[i].tagname#></span>","</a>","<#}#>","</div>","</div>","<#}#>","</div>","</div>",'<h1 class="more-labels mt-10">更多标签：</h1>','<div class="line more-tags">','<div class="tag-input line">','<input type="text" placeholder="在此输入兴趣关键词" />',"</div>",'<a class="btn-32-green search-interest ml-10">搜索标签</a>','<a class="btn-32-green search-all ml-10">查看全部标签</a>',"</div>",'<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line more-tags-container">',"</div>","</div>",'<div class="dialog-tags-wp mt-15 ui-dialog-buttonset clearfix">'),"uadmin"==t?a.push('<a href="javascript:void(0)" class="btn-32-green save grid-r">保存</a>','<a href="javascript:void(0)" class="btn-32-white cancel grid-r">取消</a>'):(a.push('<label class="label q-bad"><input name="select" type="radio" value="bad"/><i></i><div class="info-wrapper"><div class="info-tri"></div><span class="info">提问不符合高质量规范</span></div>提问不够好</label>','<label class="label left"><input name="select" type="radio" value="good"/><i></i><div class="info-wrapper"><div class="info-tri"></div><span class="info">符合标准、难度大、较复杂的问题，推送给行家</span></div>专业提问</label>','<label class="label last right"><input name="select" type="radio" value="normal"/><i></i><div class="info-wrapper"><div class="info-tri"></div><span class="info">符合标准、难度小、较简单的问题，推送给普通用户及团队</span></div>一般提问</label>'),"qualityTopic"==t&&a.push('<label class="label last"><input name="select" type="radio" value="classic"/><i></i><div class="info-wrapper"><div class="info-tri"></div><span class="info">开放性、无固定答案的问题</span></div>知道精选</label>'),a.push('<a href="javascript:void(0)" class="btn-32-green qsort-submit">提交</a>')),a.push("</div>")):(s(this.options.tags).each(function(){this.dbLine=s.string(this.name).getByteLength()>8?"tag-db-line":""}),a.push('<p class="dialog-intro line">','<a class="addtag-btn grid"><i></i><span>添加兴趣</span></a>','<span class="grid-r mr-40">','<i class="i-tip"></i>',"直接拖动可改变标签顺序哦~","</span>","</p>",'<div class="dialog-tags-wp mt-15">','<div class="dialog-tags line">','<#if( "object" == typeof tags ){#>',"<#for(var i = 0;i < tags.length;i++){#>",'<a class="tag-item <#=tags[i].dbLine#>" data-type="<#=tags[i].legal#>">','<i class="i-del"></i>',"<span><#:=tags[i].name#></span>","</a>","<#}#>","<#}#>","</div>","</div>")),n(a.join(""),this.options)},show:function(){this.instance.show()},close:function(){this.instance.close()},search:function(t){var a=this;s(t).hasClass("error")||(""==s(t).val()&&s(t).addClass("error"),s.post("/api/gettag",{type:1,wd:t.val()},function(e){if(e&&0==e.errno){s("h1",a.container).empty();var i=s(".dialog-tags",a.container).empty(),n=t.val();s(e.data).each(function(){a.addTag({name:this.tagname,legal:1},i),n.toLocaleUpperCase()==this.tagname.toLocaleUpperCase()&&(n="")}),n&&a.addTag({name:n,legal:1},i),s(".dialog-tags-wp .scrollbar-wp").remove();var l=new o({scrollWrapper:s(".dialog-tags-wp"),scrollContent:s(".dialog-tags"),maxHeight:225});l.render()}},"json"))},getTags:function(){var t=[];return s(".tag-item.active",this.container).each(function(){t.push({name:s(this).text(),legal:s(this).data("type")})}),t},_getTag:function(){var t={name:[],type:[],obj:[]};if("set"==this.options.type)s(".tag-item",this.container).each(function(){t.name.push(s(this).text()),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")})});else{s(".carousel-inner .tag-item").each(function(){s(this).data("type")>=0&&(t.name.push(s(this).text()),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")}))});var a="|"+t.name.join("|")+"|";s(".tag-item.active",this.container).each(function(){var e=s(this).text();-1==a.indexOf("|"+e+"|")&&(t.name.push(e),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")}))})}return t},addTag:function(t,a){var e=t.name||t.tagname,i=s.string(e).getByteLength()>8;s("<a />").addClass("tag-item"+(i?" tag-db-line":"")).data("type",t.legal||0).html("<span>"+d.encodeHTML(e)+"</span>").appendTo(a)}});e.exports=r});
;define("ihome:widget/js/suggestion/suggestion.js",function(e,t,a){var n=e("common:widget/js/util/tangram/tangram.js"),s=(e("common:widget/lib/jquery.ui/jquery.ui.autocomplete.js"),e("common:widget/js/ui/base/base.js")),i={};baidu="undefined"==typeof baidu?{}:baidu,a.exports=s(function(){this.target=""}).extend({init:function(){var e=this;e.fire("beforeinit"),e.target&&!e.checkDisabled()&&n(e.target).keyup(function(t){t.keyCode>=37&&t.keyCode<=40||e.getData()}).on("paste",function(){setTimeout(function(){e.getData()},20)})},checkDisabled:function(){return!1},getData:function(){var e=this,t=e.checkDisabled(),a=n.trim(n(e.target).val()),s=e.url||"/usercenter/ajax/tagsearch?search=#word#";t||""==a||(i[e.guid]=i[e.guid]||{},n(e.target).autocomplete({source:function(t,a){var o=n.trim(t.term);i[e.guid][escape(o)]?a(i[e.guid][escape(o)]):n.ajax({url:s.replace("#word#",encodeURIComponent(o)),method:"get",dataType:"json",success:function(t){if(e.fire("dataloaded",t),0===t.errno||0==t.errno){var n=t.data.tagList.list;0===n.length&&n.push({isNone:!0})}i[e.guid][escape(o)]=n,a(n)}})},minLength:0,select:function(t,a){return e.fire("select",a),!1},create:function(t){return e.fire("create",t),!1},open:function(t){return e.fire("open",t),!1},response:function(t,a){e.fire("response",a)}}).autocomplete("search").data("ui-autocomplete")._renderItem=function(e,t){return t.isNone===!0?n("<li class='last new-sug-li'><a>添加“<span class='new-sug-tag'>"+t.label+"</span>”为新标签<span class='sug-close-opt'>关闭</></span></li>").appendTo(e):1===t.last?n("<li class='last'><a><span class='sug-tag'>"+t.tagname+"</span><i class='iconfont hot'>"+t.total+"</i><span class='sug-close-opt'>关闭</></span></li>").appendTo(e):n("<li><a><span class='sug-tag'>"+t.tagname+"</span><i class='iconfont hot'>"+t.total+"</i></a></li>").appendTo(e)})}})});
;define("ihome:widget/msg/list/list.js",function(s){var t=s("common:widget/js/util/tangram/tangram.js"),e=s("common:widget/js/logic/complain/complain.js"),i=s("common:widget/js/util/store/store.js"),a=s("common:widget/js/logic/msg-new/msg-new.js"),n=s("common:widget/js/ui/dialog/dialog.js"),o=s("common:widget/js/util/log/log.js"),c=[];t(".wgt-msg-list .msg-item").each(function(){t(this).hasClass("msg-disable")||(1009==t(this).data("srctype")&&t(this).data("r-uniq-id")?(c.push({srctype:t(this).data("srctype"),uniq_id:t(this).data("uniq-id")}),c.push({srctype:1018,uniq_id:t(this).data("r-uniq-id")})):c.push({srctype:t(this).data("srctype"),uniq_id:t(this).data("uniq-id")}))}),t(".wgt-msg-list .msg-item").click(function(s){var e=t(s.target),i=t(this).data("uniq-id");e[0].tagName&&"A"==e[0].tagName.toUpperCase()&&o.send({module:"ihome",page:"message"+F.context("pageType"),area:"message",action:"link-click",messageId:i,link:e.attr("href")})}),t.post("/notice/close/batch",{close_list:t.json.stringify(c)},function(){i.remove("ikmsg_data"),i.remove("ikmsg_time"),a.init()}),t(".wgt-msg-list-wp").on("click",".business-confirm-accept, .business-confirm-refuse",function(s){if(s.preventDefault(),F.context("ucloudBusinessId")>0)return void n.alert(" 您已经是机构行家帐号，无法进行此项操作！");var e,i=t(this),a=i.parents(".msg-item"),c=a.data("businessId"),m=a.data("businessCustomer"),u=a.data("businessAnswer"),r="",d=i.hasClass("business-confirm-accept");d?(r="确定接受邀请？",e=0):(r="确定拒绝邀请？",e=1);var g=n.confirm(r,{onaccept:function(){t.ajax({url:"/business/submit/bindaccountconfirm",type:"post",cache:!1,data:{businessId:c,customer:m,answer:u,opType:e},dataType:"json",success:function(s){0!=s.errno?(n.alert(s.errmsg),g.close(),setTimeout(function(){window.location.reload()},1e3)):(o.send({module:"ihome",page:"business-confirm",area:"message",action:"link-click",businessId:c,accept:"1",opType:e}),g.close(),d?setTimeout(function(){location.href="/business/admin/qlist"},1e3):setTimeout(function(){window.location.reload()},1e3))},error:function(){}})},oncancel:function(){}})}),t(".msg-item a[data-complain]").on("click",function(s){s.preventDefault();var t=this.getAttribute("data-rid"),i=this.getAttribute("data-qid"),a=this.getAttribute("data-complain");new e(i,+t,a)}),o.send({module:"ihome",page:"message."+F.context("pageType"),area:"message",action:"pv"})});
;define("ihome:widget/myanswer/js/list.js",function(t,e,n){var i=t("common:widget/js/util/tangram/tangram.js"),s=t("common:widget/js/util/template/template.js"),o=t("common:widget/js/ui/base/base.js"),a=t("common:widget/js/ui/tip/tip.js");normalPager=t("common:widget/js/ui/pager/normalPager.js");var r=F.context("push"),l=o(function(t){var e=this;e.pager=null,e.type=t&&t.type||"default",e.resultNone="",e.filterResultNone="","ask"==r.listType?(e.resultNone="您还没有在知道提过问题。",e.filterResultNone="暂时没有此类提问。"):"reply"==r.listType&&(e.resultNone="您还没有在知道回答过问题。",e.filterResultNone="暂时没有此类回答。")}).extend({getList:function(t,e){var n=this,o="",e=e,a={pn:0,rn:25,t:(new Date).getTime()};t&&i.extend(a,t),"ask"==r.listType?o="/ihome/api/myask":"reply"==r.listType&&(o="/ihome/api/myanswer",a.rn=12),i.get(o,a,function(t){t&&!t.errno&&(0==t.data.question.list.length?(i(".myanswer-list").html(""),i(".ihome-result-none").length<1&&i('<div class="ihome-result-none"><i class="i-null"></i><br /><span>'+n.filterResultNone+"</span></div>").insertBefore(i(".myanswer-list"))):(t.data.question.type||(t.data.question.type="default"),t.data.question.btTitleTruncate=n.btTitleTruncate,i(".ihome-result-none").remove(),i(".myanswer-list").html(s("t:myanswer-list",t.data.question))),e&&"function"==typeof e&&e(t.data))},"json")},pagerInit:function(t){var e=this;e.pager=new normalPager(i.extend({pContainer:i("#pager"),conTotalCount:100,conPerPage:25,pMaxCount:7,onIndexChange:function(t){e.getList({type:e.type,pn:(t-1)*this.conPerPage},function(){i(window).scrollTop(i(".ihome-atricle").offset().top-50)})}},t)),e.pager.show()},btTitleTruncate:function(t){var e=t,n=59;return i.string(t).getByteLength()>n&&(e=i.string(t).subByte(2*n,"...")),e},init:function(t){var e=this;t&&(0==t.list.length?i('<div class="ihome-result-none"><i class="i-null"></i><br /><span>'+e.resultNone+"</span></div>").insertBefore(i(".myanswer-list")):(t.type=t.type||"default",t.btTitleTruncate=e.btTitleTruncate,i(".myanswer-list").html(s("t:myanswer-list",t))),parseInt(t.listNum)>parseInt(t.rn)&&e.pagerInit({conTotalCount:t.listNum,conPerPage:t.rn}),i('.filter-classify input[type="radio"]').on("click",function(){var t=i(this);e.type=t.closest("label").attr("data-type"),i(".ihome-result-none")&&i(".ihome-result-none").remove(),e.getList({type:e.type},function(t){e.pager&&e.pager.destroy(),parseInt(t.question.listNum)>parseInt(t.question.rn)&&e.pagerInit({conTotalCount:t.question.listNum,conPerPage:t.question.rn})})}),i(".myanswer-list").delegate("li","mouseenter",function(){i(this).addClass("hover")}).delegate("li","mouseleave",function(){i(this).removeClass("hover")}).delegate(".hide-my-reply","click",function(t){t.preventDefault();var n=i(this).closest("li"),s="hidden"==e.type?100122:100121,o={cm:s,co:n.data("rid")+" "+n.data("checkcode")+" "+n.data("qid")};i.post("/submit/user",i.url.jsonToQuery(o),function(){setTimeout(function(){i(".ihome-result-none")&&i(".ihome-result-none").remove(),e.getList({type:e.type},function(t){e.pager&&e.pager.destroy(),parseInt(t.question.listNum)>parseInt(t.question.rn)&&e.pagerInit({conTotalCount:t.question.listNum,conPerPage:t.question.rn})})},500)})}).delegate(".iknow-base-hot","mouseenter",function(){e.iknow_base_tips_opt={direction:"top",tooltipClass:"iknow-base-hot-tips",content:'<div class="iknow-base-hot-tips-con">你好，该回答很精彩于'+i(this).data("rectime")+"被选入知道知识库中</div>",target:i(this),position:{my:"left-130 top+10",at:"left bottom"}},e.iknow_base_tips=new a(e.iknow_base_tips_opt)}).delegate(".iknow-base-hot","mouseleave",function(){e.iknow_base_tips.hide()}).delegate(".iknow-base-hot","click",function(t){t.preventDefault()}),i("body").append('<div id="itips" class="itips"></div>'),i(".myanswer-list").delegate(".myanswer-opt","mouseenter",function(t){if(i(t.target).attr("tipsname")){i("#itips").removeClass("my-long-tips").removeClass("my-short-tips"),i("#itips").addClass(i(t.target).attr("longtip")?"my-long-tips":"my-short-tips");var e=i("#itips"),n=i(this).offset().top-e.outerHeight(),s=i(this).offset().left-e.outerWidth()/2+i(this).outerWidth()/2;e.text(i(this).attr("tipsname")).css({top:n,left:s}).show()}}).delegate(".myanswer-opt","mouseleave",function(){i("#itips").hide()}))}});n.exports=new l});
;define("ihome:widget/myhistory/myhistory.js",function(t,e,r){var s=t("common:widget/js/util/tangram/tangram.js"),i=t("common:widget/js/ui/scrollbar/scrollbar.js"),o=t("common:widget/js/ui/base/base.js"),n=t("common:widget/lib/juicer/juicer.js");F.context("codeMsg",{1000060:"提问悬赏消耗",1000130:"删除问题扣除",1004e3:"回答用户追问",1005030:"管理员扣除",1010010:"上传资源被下载",1010011:"下载资源",1000080:"回答被用户采纳",1000081:"采纳回答奖励",1000090:"回答一个问题",1000160:"回答被删除",1001260:"答案被网友推荐",1005060:"商城消费",1009140:"新手奖励",1000010:"提问扣分",1000450:"关闭问题",1005050:"完成任务奖励",1001280:"回答被选为优质",1006690:"回答被赞",1001270:"取消推荐",1006750:"附件被下载",1006751:"下载附件",1005090:"签到任务",1005130:"手机知道加分",1005132:"手机知道减分",1010120:"认证高质量回答",1009230:"芝麻快跑",1000161:"回答被删除",1000170:"回答被恢复",1010150:"认证回答被取消认证",100512e3:"管理员基础奖励",100512001:"管理员分拣奖励",100512002:"管理员认证奖励"});var a=o().extend({init:function(){var t=this,e=s("#myhistory-tpl").html();n.register("getMsg",t.getMsg),n.register("str2num",t.str2num),s.get("/ihome/api/mydetails",function(t){if(!t.errno)if(t.detail.length>0&&s(".wgt-myhistory").removeClass("none"),s(".myhistory-wp").html(n(e,{data:t.detail})),t.detail.length>6){var r=new i({scrollWrapper:s(".myhistory-wp"),scrollContent:s(".myhistory-list"),maxHeight:410});r.render()}else s(".wgt-myhistory").addClass("no-scroll")},"json")},getMsg:function(t){var e="其他";return F.context("codeMsg")[t]&&(e=F.context("codeMsg")[t]),e},str2num:function(t){var e;return e=t>0?"+"+parseInt(t):parseInt(t)}});r.exports=a});
;define("ihome:widget/myitem/vcode/vcode.js",function(e,o,a){var s=e("common:widget/lib/jquery/jquery.js"),t=e("common:widget/js/ui/base/base.js"),i=(e("common:widget/js/util/event/event.js"),e("common:widget/js/util/template/template.js"),e("common:widget/js/ui/dialog/dialog.js")),n='<div class="dialog-body"><span>*</span>为了保护您的帐号安全，请先<a class="f-green" href="http://passport.baidu.com/center" target="_blank">前往帐号安全中心</a>进行手机绑定设置<div class="go-safe-wp"><a class="go-safe btn-35-green">立即前往</a></div></div>',d='<div class="dialog-body"><div class="info"><span>*</span>请输入您绑定手机中收到的验证码</div><div class="form"><label>手机验证码：<input name="vcode" type="text"> <a class="get-vcode btn-32-green">发送验证码</a></label></div><div><a class="submit btn-35-green">确认提交</a></div><div class="footer">如对您帐号的绑定手机有疑问，请前往<a class="f-green" href="http://passport.baidu.com/center" target="_blank">帐号安全中心</a>进行查看</div></div>',l='<div class="dialog-body"><span>*</span>很遗憾，您的验证机会已用完，今天无法进行需验证商品的兑换了<div class="footer">如对您帐号的绑定手机有疑问，请前往<a class="f-green" href="http://passport.baidu.com/center" target="_blank">帐号安全中心</a>进行查看</div>',c=!1,r=null,p=t(function(e){return this.o=e,c?void this.showVcodeDialog():(this.checkMobile(),1)}).extend({checkMobile:function(){var e=this;s.ajax({url:"/api/loginInfo",type:"POST",data:{t:(new Date).getTime()},success:function(o){var a="object"==typeof o?o:s.json.parse(o);return a&&a.isLogin?-1===a.mobile.search(/\d/)?(e.showMobileDialog(),1):(c=!0,e.showVcodeDialog(),2):0},error:function(){e.o.success()}})},showMobileDialog:function(){var e=new i({className:"no-mobile-dialog",autoDispose:!0,title:"知道提示",width:560,height:236,content:n});s(".no-mobile-dialog a").on("click",function(o){o.preventDefault(),window.open("http://passport.baidu.com/center"),e.close()})},showVcodeDialog:function(){var e=this,o=0,a=new i({className:"vcode-dialog",autoDispose:!0,title:"知道提示",width:560,height:328,content:d});s(".vcode-dialog .submit").on("click",function(t){t.preventDefault();var i=s.trim(s(".vcode-dialog input").val());return/^\d{6}$/.test(i)?void s.ajax({url:"/shop/ajax/verifyphonevcode",type:"POST",dataType:"json",data:{t:(new Date).getTime(),vcode:i},success:function(t){return window.clearTimeout(r),s(".vcode-dialog .get-vcode").html("发送验证码").removeClass("disabled"),o=0,t?200==t.errno?(s(".vcode-dialog .info").addClass("error").html("<span>*</span>很遗憾，您的验证码已失效，请重新获取"),200):0!==t.errno?(s(".vcode-dialog .info").addClass("error").html("<span>*</span>很遗憾，您的验证码输入有误，请重试"),1):(a.close(),void e.o.success()):(s(".vcode-dialog .info").addClass("error").html("<span>*</span>很遗憾，验证失败，请重试"),0)},error:function(){s(".vcode-dialog .info").addClass("error").html("<span>*</span>网络错误，请重试")}}):(s(".vcode-dialog .info").addClass("error").html("<span>*</span>请输入收到的6位验证码"),0)}),s(".vcode-dialog .get-vcode").on("click",function(e){function t(e){return 0===e?(n.html("发送验证码").removeClass("disabled"),o=0,0):(n.html(e+"秒后重发"),void(r=window.setTimeout(function(){t(e-1)},1e3)))}var n=s(this);return e.preventDefault(),o?0:void s.ajax({url:"/api/sendphonevcode",type:"GET",data:{t:(new Date).getTime(),ptype:1,mtype:3},dataType:"json",success:function(e){return e?3==e.errno?(a.close(),new i({className:"out-vcode-dialog",autoDispose:!0,title:"知道提示",width:560,height:218,content:l}),3):0!=e.errno?(s(".vcode-dialog .info").addClass("error").html("<span>*</span>获取失败，请重试"),100):(n.addClass("disabled"),o=1,void t(60)):(s(".vcode-dialog .info").addClass("error").html("<span>*</span>获取失败，请重试"),0)},error:function(){s(".vcode-dialog .info").addClass("error").html("<span>*</span>网络错误，请重试")}})}),s('.vcode-dialog input[name="vcode"]').on("keydown",function(){s(".vcode-dialog .info").removeClass("error").html("<span>*</span>请输入您绑定手机中收到的验证码")})}});a.exports=p});
;define("ihome:widget/myitem/myitem.js",function(t){function e(t){var n=null;o.ajax({type:"get",dataType:"json",data:{tradeId:t},url:"/shop/ajax/getsn"}).done(function(o){0===o.errno?n=new s({type:"alert",titleText:"查看验证码",content:"请勿将验证码透露给其他人："+o.data.SN,width:300,height:147}):200===o.errno||202===o.errno?new c({success:function(){e(t)}}):n=new s({type:"alert",titleText:"知道提示",content:o.errmsg,width:300})}).fail(function(){n=new s({type:"alert",titleText:"知道提示",content:"数据提交出错，请稍后再试",width:300,height:147})})}var o=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/util/template/template.js"),i=t("ihome:widget/js/mini-pager/mini-pager.js"),s=t("common:widget/js/ui/dialog/dialog.js"),a=t("common:widget/js/logic/address-dialog/address-dialog.js"),r=t("common:widget/js/ui/tip/tip.js"),p=t("common:widget/js/util/https/https.js"),c=(t("common:widget/js/util/event/event.js"),t("common:widget/js/logic/login/login.js"),t("ihome:widget/myitem/vcode/vcode.js")),h={};h.ShopList=F.context("realGifts"),h.userInfo=h.userInfo;var m={statistic:function(t){o(".wgt-shop-statistic").html(n("t:shop-statistic",t))},browse:function(t,e){var e=e||"";t.convertTime=function(t){return o.date.format(new Date(1e3*t),"yyyy.MM.dd")},t.isShowInfo=function(t){var e=window.F.context("exchangeShowInfo");return e&&t-e>0?!0:!1},0==t.ShopList.length?o(".wgt-shop-item").append():(e?(t.convertTime=function(t){return o.date.format(new Date(t-26784e5),"yyyy.MM.dd")},o(".wgt-shop-itemNa").html(n("t:shop-browseNa",t))):(o.each(t.ShopList,function(t,e){"string"==typeof e.goodsPicSmall&&(e.goodsPicSmall=p.autoTrans(e.goodsPicSmall),e.goodsPicSmall=e.goodsPicSmall.replace(/^http:/,""))}),o(".wgt-shop-item").html(n("t:shop-browse",t))),o(".wgt-shop-item .item-img img").one("load",function(){var t=o(this),e=t.width();e>76&&t.css("left",-(e-76)/2+"px")}).each(function(){this.complete&&o(this).load()}))},pager:function(t){if(t.pageNumList.length>0){var e=new i({totalPage:Math.ceil(t.userInfo.BuyNum/12)});e.on("pagechange",function(t,e){o.get("/shop/myshop?format=json&pn="+12*(e.pageNum-1)+"&rn=12",function(t){m.browse(t)},"json")}),e.render("#shop-browse-pager")}},pagerNa:function(t){if(t.ShopList.length>0){var e=new i({totalPage:Math.ceil(t.ShopList.length/12)});e.on("pagechange",function(e,o){var n={};n.userInfo=t.userInfo;for(var i=[],s=12*(o.pageNum-1);s<12*o.pageNum;s++)t.ShopList[s]&&i.push(t.ShopList[s]);n.ShopList=i,m.browse(n,!0)}),e.render("#shop-browse-pagerNa")}},bind:function(){o(document.body).on("mouseover",".good-img",function(){var t=o(this).data("title");this.tip?this.tip.show():this.tip=new r({direction:"bottom",content:t,target:this,position:{my:"left top",at:"left-18 top-40"}}),o(".tip-arrow-bottom",this.tip.getTipContainer()).css("left","20px")}).on("mouseout",".good-img",function(){this.tip&&this.tip.hide()})}};m.bind(),o.get("/shop/myshop?format=json&pn=0&rn=12",function(t){m.statistic(t),m.browse(t),m.pager(t)},"json"),o(".myitem-mod-tab span").on("click",function(){if(o(this).hasClass("na")){var t={};t.userInfo=h.userInfo;for(var e=[],n=0,i=Math.min(12,h.ShopList.length);i>n;n++)e.push(h.ShopList[n]);t.ShopList=e,o(".wgt-shop-item").empty(),o("#shop-browse-pager").hide(),o("#shop-browse-pagerNa").show(),o(this).css("color","#35b558").siblings().css("color","#353535"),m.browse(t,!0),m.pagerNa(h)}else o(".wgt-shop-itemNa").empty(),o("#shop-browse-pagerNa").hide(),o("#shop-browse-pager").show(),o(this).css("color","#35b558").siblings().css("color","#353535"),o.get("/shop/myshop?format=json&pn=0&rn=12",function(t){m.statistic(t),m.browse(t),m.pager(t)},"json")}),o(".wgt-shop-item").on("click",".sn",function(t){t.preventDefault();var n=o(this).data("tradeid");e(n)}).on("click",".cover",function(t){t.preventDefault();var e=o(this),n=e.attr("data-goodsType");a.init({sType:"noTitle",goodsType:n,params:{goodsId:e.attr("data-goodsId"),tradeId:e.attr("data-tradeId")},successDeal:function(t){var o=e.closest(".shop-item"),i=o.find(".cover");"3"===n?(i.remove(),o.find(".track-address-type").html("兑换信息：待发货")):"5"===n?(i.remove(),o.find(".show-type-num span").html(t.data.tele)):"6"===n&&(i.remove(),o.find(".show-type-num span").html(t.data.qq))},errorDeal:function(t){s.alert(t.errmsg)}})}),o(".wgt-shop-itemNa").on("click",".sn",function(t){t.preventDefault();new s({type:"alert",titleText:"查看验证码",content:"请勿将验证码透露给其他人："+o(this).data("sn"),width:300,height:147})}).on("click",".cover",function(t){t.preventDefault();var e=o(this),n=e.attr("data-giftValue"),i=0;0==n?i=3:10001==n?i=5:10002==n&&(i=6),a.init({sType:"noTitle",goodsType:i,params:{status:1,tradeId:e.attr("data-tradeId")},successDeal:function(t){var o=e.closest(".shop-item"),n=o.find(".cover");3==i?(n.remove(),o.find(".track-address-type").html("兑换信息：待发货")):5==i?(n.remove(),o.find(".show-type-num span").html(t.data.tele)):6==i&&(n.remove(),o.find(".show-type-num span").html(t.data.qq))},errorDeal:function(t){s.alert(t.errmsg)}})}),o(".na-item").on("click",function(t){t.preventDefault()}),o(".na-item-a").on("click",function(t){t.preventDefault()})});
;define("ihome:widget/myteam/recommend-team/recommend-team.js",function(i,t,e){var n=i("common:widget/js/util/tangram/tangram.js"),o=i("common:widget/js/ui/carousel/carousel.js");e.exports={init:function(){this.duration=800,this.interval=0,this.initCarousel()},initCarousel:function(){var i=n("#recommend-team-list"),t=i.find(".carousel-item"),e=new o({items:t,direction:"horizontal",controls:!0,interval:this.interval,duration:this.duration,indicators:!0});e.render(i[0])}}});
;define("ihome:widget/myteam/task-package/task-package.js",function(e,t,i){var n=e("common:widget/js/util/tangram/tangram.js"),s=e("common:widget/js/ui/pie/pie.js");i.exports={init:function(){this.$el=n("#team-task-package"),this.makePie(),this.bind()},makePie:function(){this.$el.find(".pie").each(function(e,t){var i=n(t),o=(parseFloat(i.prev(".percent").text())||0)/100;i.append(new s({pieR:31,donutR:26,rotation:-90,animation:!0,slices:[{color:"#f89f05",percent:o},{color:"#e8e8e8",percent:1-o}]}).getNode())})},bind:function(){this.$el.on("click",".see-more",function(){n(this).hasClass("see-more-down")?(n(this).removeClass("see-more-down").find("strong").html("查看更多"),n(this).prev("ul").slideUp()):(n(this).addClass("see-more-down").find("strong").html("收起更多"),n(this).prev("ul").slideDown())})}}});
;define("ihome:widget/recommend-tag/recommend-tag.js",function(t,e,i){{var n=t("common:widget/js/util/tangram/tangram.js");n.cookie.get("isFirstTag")?n.cookie.get("isFirstTag"):0,n.cookie.get("isShowTag")?n.cookie.get("isShowTag"):0}i.exports.init=function(){n("body").append('<div class="wgt-indivdual-center-tips"></div>'),null==n.cookie.get("isFirstTag")&&n.cookie.set("isFirstTag","1",{expires:31536e6,path:"/"})},n(".indivdual-center-tags").on("click",function(t){"A"==t.target.nodeName&&(n(t.target).hasClass("selected")?n(t.target).removeClass("selected"):n(t.target).addClass("selected"))});var a=function(t){var e=t.target,i=e.offset(),a=t.text,o=n(".wgt-indivdual-center-tips");o.text(a).css({top:i.top-e.outerHeight()-e.outerHeight()/2,left:i.left-e.outerWidth()-3,display:"block"})},o=function(t){n(".indivdual-center-tags").hide(),n(".indivdual-center-btns").hide(),n(".spilt-line").hide(),n(".wgt-indivdual-center-border").animate({width:"120px"},400,function(){n(".indivdual-center-title").text("订阅成功！"),setTimeout(function(){n(".wgt-indivdual-center-border").animate({height:"0px",paddingTop:"0px",paddingBottom:"0px"},1500,function(){n(".wgt-indivdual-center-border").remove(),n.isFunction(t)&&t()})},500)})},s=function(){var t={name:[],type:[],obj:[]};return n(".carousel-inner .tag-item").each(function(){n(this).data("type")>=0&&c(t,n(this).text(),n(this).data("type"))}),t},c=function(t,e,i){t.name.push(e),t.type.push(i),t.obj.push({name:e,legal:i})},d=function(t,e,i){n.ajax({url:"/ihome/api/tagrecommend",type:"POST",dataType:"json",data:{addtag:t,deltag:e}}).done(function(t){t&&0==t.errno?n.isFunction(i)&&i():alert("请重新提交")})},r=function(){n.isFunction(o)&&o(function(){n(".list-refresh").click()}),n.cookie.get("isShowTag")||n.cookie.set("isShowTag","1",{expires:72e5,path:"/"})},u=function(){n(".wgt-indivdual-center-tips").hide(),n(".wgt-indivdual-center-border").animate({height:"0px",paddingTop:"0px",paddingBottom:"0px"},1e3,function(){n(".wgt-indivdual-center-border").remove()}),n.cookie.get("isShowTag")||n.cookie.set("isShowTag","1",{expires:864e5,path:"/"})};n(".indivdual-center-submit").on("click",function(){var t=n(".indivdual-center-tags .selected"),e=n(".indivdual-center-tags a").not(".selected"),i=[],a=[];if(n.each(t,function(){i.push(n(this).text())}),n.each(e,function(){a.push(n(this).text())}),t.length>0){var o=s(),u={name:[],type:[],obj:[]};t.each(function(){c(o,n(this).text(),1),c(u,n(this).text(),1)}),n.ajax({url:"/submit/user",type:"POST",dataType:"json",data:{cm:100522,tags:o.name.join("	")}}).done(function(t){if(t&&0==t.errorNo){F.context("user").tags=o.obj;var e=n(".carousel-inner"),s=e.find(".tag-item:last").clone(!0);e.find(".tag-item:last").remove(),n.each(u.obj,function(t,i){n("<a/>").addClass("tag-item").data("type",i.legal||0).html("<span>"+i.name+"</span>").appendTo(e)}),s.appendTo(e),n.isFunction(d)&&d(i.join("_"),a.join("_"),r)}else alert("请重新提交")})}}).mouseenter(function(){a({target:n(this),text:"确认订阅"})}).mouseleave(function(){n(".wgt-indivdual-center-tips").hide()}),n(".indivdual-center-cancel").on("click",function(){var t=n(".indivdual-center-tags a"),e=[];n.each(t,function(){e.push(n(this).text())}),n.isFunction(d)&&d(null,e.join("_"),u)}).mouseenter(function(){a({target:n(this),text:"关闭推荐"})}).mouseleave(function(){n(".wgt-indivdual-center-tips").hide()})});
;define("ihome:widget/team/team.js",function(e,t,a){var i=e("common:widget/js/util/tangram/tangram.js"),m=e("common:widget/js/ui/base/base.js"),n=e("common:widget/lib/juicer/juicer.js"),o=e("common:widget/js/util/log/log.js"),c=m().extend({init:function(){var e=i("#team-tpl").html();i(".wgt-team").delegate(".team-avatar-log","click",function(){o.send({type:2072,pos:"team-link",action:"click",fr:"ihome"})}),i.ajax({url:"/uteam/ajax/myTeam",cache:!1,dataType:"json"}).done(function(t){if(!t.errno){var a=t.data;a.length>0&&(i.each(a,function(e,t){!t.picUrl&&(t.picUrl="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/userteam/onerror-b.jpg")}),i(".wgt-team").removeClass("none"),i(".team-main").html(n(e,{data:a})))}})}});a.exports=c});
;define("ihome:widget/reply-qts/list/list.js",function(t,e,i){var a=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/util/event/event.js"),s=t("common:widget/js/util/template/template.js"),o=t("common:widget/js/ui/base/base.js"),l=t("common:widget/js/ui/pager/normalPager.js"),r=t("ihome:widget/js/editor/editor.js"),d=t("common:widget/js/logic/submit/submit.js"),c=t("ihome:widget/js/pop-tip/pop-tip.js"),p=t("ihome:widget/myhistory/myhistory.js"),u=t("ihome:widget/team/team.js"),m=t("common:widget/js/util/log/log.js"),h=t("common:widget/js/ui/dialog/dialog.js"),f=t("common:widget/js/util/store/store.js"),g=t("common:widget/js/ui/tip/tip.js"),v={},y={};t("common:widget/js/logic/login/login.js");var w,q,b=t("common:widget/js/logic/task/task.js"),j={},x=0,k=0,C=F.context("user"),Q=a(".wgt-ihome-tag-item"),T=Q.height(),L=T+40,P="sep",H=o(function(){var t=this;t.hasPager=0,t.pageNum=0,t.viewPager=0,t.totalNum=0,t.tags=[]}).extend({getList:function(t){var e=this;v={},y={};var i=a.extend({pn:0,rn:25,api:"/ihome/api/push",callback:"",failback:""},t);t.isMavin&&(this.isMavin=1,"HQ"==t.type&&(i.api="/mavin/api/qualityqlist?cmd=getQlist",i.type="quality"));var n={pn:i.pn,rn:i.rn,type:i.type,keyInTag:1,filter:i.filter,t:(new Date).getTime()};P=i.type,i.tags&&(n.tags="string"===a.type(i.tags)?i.tags:t.isMavin&&"HQ"==t.type?i.tags?i.tags.join(","):"":i.tags?i.tags.join("	"):"");var o=i.api;a.get(o,n,function(n){n.data&&0===n.data.isTag||"recommend"===i.type||"help"===i.type||"HQ"===i.type?a('.filter-box input[type="radio"]').attr("disabled",!0).prev("i").addClass("disabled"):a('.filter-box input[type="radio"]').removeAttr("disabled").prev("i").removeClass("disabled"),"help"===i.type||"HQ"===i.type?a(".df-reply-qts-list>ul").addClass(i.type):a(".df-reply-qts-list>ul").removeClass(i.type),("HQ"===i.type||"quality"===i.type)&&m.send({page:"ihome",position:"hq-question-list",area:"question-list",action:"pv",exp:"hq-pv-exp",samp:F.context("samplowVal")});var o=[];if(n.data&&(n.data.isHQ=0,n.data.isMavin=t.isMavin||0,"HQ"===i.type||"quality"===i.type)){n.data.isHQ=1,n.data.isMavin&&(n.data.detail=n.data.list);for(var l,r=0;l=n.data.detail[r];r++)o.push(l.qid);a.ajax({url:"/api/qbpv",type:"GET",dataType:"json",data:{q:o.join(","),cmd:"get"}}).done(function(t){if(!t.errno)for(var e in t.data)a(".q-item-"+e).length&&a(".q-item-"+e).find(".pvCount").html(t.data[e]+"人关注此问题")})}if(!n||n.errno||!n.data||n.data&&!n.data.detail)return a(".df-reply-qts-list>ul").html(""),a(".loading").html('<i class="i-null mr-10"></i><br /><span class="f-16">当前没有适合您回答的问题，您可以尝试订阅更多兴趣标签。</span>'),void(i.failback&&"function"==typeof i.failback&&i.failback());a(".loading").empty(),e.totalNum=n.data.detail.length,x=n.data.detail.length;var d=["qb","ihome","tag"];"HQ"===i.type||"quality"===i.type?d=["qb","ihome",i.type]:"help"===i.type&&(d=["qb","ihome","help"]),i.keyword?(d.push(i.keyword),d.push(0),d.push(i.filter)):a(".tag-carousel").find(".tag-item").each(function(t){a(this).hasClass("active")&&(d.push(a(this).text()),d.push(t),d.push(i.filter))}),("qb"===a.url.getQueryValue(location.href,"referSrc")||"imsg"===a.url.getQueryValue(location.href,"referSrc"))&&(d=["qb","ihome","customtip"],a(".df-reply-qts-list").on("click",".title-area",function(){m.send({type:2072,page:"ihome",position:"question-item",action:"question-list-click",from:"custom-box"})})),n.data.entry=encodeURIComponent(d.join("_")),d.shift(),F.context("entry",encodeURIComponent(d.join("_"))),n.data.viewedList=f.get("ihomeViewedQuetions")||[],n.data.lowQualityOperate=F.context("user").answerNumber>=50,n.data.lowQualityList=f.get("ihomeLowQualityQuetions")||[],n.data.curPn=i.pn,k%3===0?a(".df-reply-qts-list>ul").html(s("t:reply-qts-list",n.data)):a(".df-reply-qts-list>ul").append(s("t:reply-qts-list",n.data)),a(".df-reply-qts-list .question-title").on("click",function(t){t.stopPropagation();var i=a(this).parents(".reply-qts-item"),n=i.find(".content-wp"),s=n.data("qid");i.addClass("viewed"),e.addQuestion(s,"ihomeViewedQuetions"),m.send({type:2072,page:"ihome",position:"question-item",action:"question-list-click",from:"custom-box"}),i.hasClass("is-hq-item")&&m.send({page:"ihome",position:"hq-question-list",area:"question-list",action:"click",exp:"hq-pv-exp",samp:F.context("samplowVal")})}),0===n.data.listNum?(a(".i-refresh").removeClass("i-refresh-loading").addClass("i-refresh"),a(".loading").html('<i class="i-null mr-10"></i><br /><span class="f-16">当前没有适合您回答的问题，您可以尝试订阅更多兴趣标签。</span>')):e.hasPager||e.pagerInit({conTotalCount:n.data.listNum,conPerPage:3*n.data.rn}),a(".pager").hide(),i.callback&&"function"==typeof i.callback&&i.callback()},"json")},updateList:function(t){var e=[];a(".df-reply-qts-list>ul .content-wp").each(function(t,i){var n=a(i).attr("data-qid");e.push(n)});var i="/api/getqinfo?qids="+e.join();a.get(i,function(e){var i=e.errNo;e=e.data,!i&&e.length>0&&a(".df-reply-qts-list>ul .reply-qts-item").each(function(i,n){a(e).each(function(e,i){if(i.qid===a(n).find(".content-wp").attr("data-qid")&&a(n).find(".title a").length>0){var s=a(n);i.isDel&&("remove"===t?(s.remove(),0===a(".df-reply-qts-list>ul .reply-qts-item").size()&&a(".list-refresh").click()):(s.attr("data-invalid","1").addClass("invalid"),s.find("title").prepend('<i class="i-invalid"></i>')))}})})},"json")},getDetail:function(t,e,i){var n=this,o="/question/api/imini",l={qid:t,t:(new Date).getTime()};a.get(o,l,function(o){if(o&&0===o.errno){o.data.qid=t;var l=o.data.reply;o.data.answerList=[],a([l.best||{},l.recommend||{},l.special||{},l.answers?l.answers.list||{}:{}]).each(function(){a.each(this,function(t,e){C.name===(e&&e.user&&e.user.name)?o.data.answerList.unshift(e):o.data.answerList.push(e)})});var d=s("t:detailTmpl",o.data);e.append(d),a(e).find(".detail").slideDown();var c=a(window).scrollTop()+a(window).height()-350;if(i.offset().top>c&&a(window).scrollTop(a(window).scrollTop()+(i.offset().top-c)),o.data.user&&0===o.data.user.isReplyer){var p={type:"answer",id:"mini-editor-"+t};y[t]&&(p.content=y[t]),n.editor=new r(p),n.editor.instance.addListener("contentchange",function(){y[t]=v[t].instance.getContent()}),v[t]=n.editor,n.editor.submitBtn.on("click",function(e){e.preventDefault(),n.editor=v[t],n.editorSubmit(t)})}}},"json")},editorSubmit:function(t){function e(e){new d({params:s,hasJump:!1,syncId:i.editor.type,authcode:i.editor.authcode||null,beforeJump:function(n){delete v[t],delete y[t],c('<i class="i-yes iknow_ihome_icons"></i>回答提交成功！',{callback:function(){var e=a(".q-item-"+t);e.removeClass("active").find(".detail").slideUp().remove(),e.find(".title").prepend('<i class="i-done"></i>'),e.find(".reply-num dd").text(parseInt(e.find(".reply-num dd").text())+1),e.offset().top<a(window).scrollTop()+L&&i.scrollByQid(t),delete y[t],b.loadAccomplishTask()}}),setTimeout(function(){new p,new u},3e3),m.send({module:"ihome",page:"ihome-reply",area:"submit",action:"submit-success",ncAnalyseCode:e.ncAnalyseCode,rid:n.aid,qid:t})}})}var i=this,s={cm:100009,qid:t,entry:F.context("entry")||"ihome_default"},o={};i.editor.checkEditor()&&(a.extend(s,i.editor.editorSubmit()),n.fire("login.check",{isLogin:function(){window.nccheck?nccheck(function(t){o.ncAnalyseCode=t&&t.code,e(o)}):e(o)},noLogin:function(){n.fire("login.log",{onLoginSuccess:function(){window.nccheck?nccheck(function(t){o.ncAnalyseCode=t&&t.code,e(o)}):e(o)}})}}))},pagerInit:function(t){var e=this,i=new l(a.extend({pContainer:a("#pager"),conTotalCount:100,conPerPage:10,pMaxCount:7,onIndexChange:function(t){m.send({type:2072,pos:"pager",action:"click",index:t}),e.getList(a.extend({pn:25*(t-1)*3,callback:function(){a(window).scrollTop(a(".ihome-content").offset().top-40),a(".pager").hide()}},j)),k=3*(t-1)}},t));i.show(),e.hasPager=1},bindEvent:function(){function t(t){return t.size()&&t.offset().top<a(window).scrollTop()+a(window).height()?!0:!1}function e(){var t=a(this),e=t.parents(".reply-qts-item");if(e.hasClass("active")){var n=t.parents(".content-wp"),s=t.parents(".detail"),o=n.data("qid");delete v[o],e.offset().top<a(window).scrollTop()+L&&i.scrollByQid(o),s.slideUp(200,function(){a(this).remove()}),i.addQuestion(o,"ihomeViewedQuetions"),e.removeClass("active").addClass("viewed")}}var i=this,n=1;a(window).scroll(function(){n&&(x>=25?(n=0,setTimeout(function(){t(a(".loading"))&&(k+1)%3!==0?(a(".loading").html('<img src="https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/ihome/loding.gif" />知道正在为您寻找更多问题...'),k+=1,i.getList(a.extend({pn:25*k,callback:function(){a(".loading").html(""),(k+1)%3===0?a(".pager").show():a(".pager").hide()}},j))):(k+1)%3!==0||a(".df-reply-qts-box .i-null").size()?a(".pager").hide():a(".pager").show(),n=1},500)):k>2&&a(".pager").show())}),a(".df-reply-qts-list>ul").on("click",".title-area",function(){var t=a(this).parents(".reply-qts-item");if(!t.hasClass("invalid")&&!t.hasClass("is-hq-item")){var e=t.find(".content-wp"),n=e.data("qid"),s=a(".reply-qts-item.active");if(t.hasClass("active"))return t.removeClass("active"),delete v[n],t.find(".detail").slideUp(200,function(){a(this).remove()}),t.offset().top<a(window).scrollTop()+L&&i.scrollByQid(n),i.addQuestion(n,"ihomeViewedQuetions"),void t.addClass("viewed");s.addClass("viewed").find(".detail").hide(),s.find(".qt-detail-shrink").click(),t.removeClass("hover").addClass("active"),i.getDetail(n,e,t);var o=parseInt(t.data("index"))+a(".hq-reply-list .reply-qts-item").length;m.send({module:"ihome",page:"index",type:2072,position:"question-title-area",action:"click",qid:n,filterType:P,index:o,uid:F.context("user").uid})}}),a(".df-reply-qts-list").on("click",".qt-detail-shrink",e),a(".df-reply-qts-list>ul").on("mouseenter",".reply-qts-item",function(){!a(this).hasClass("active")&&!a(this).hasClass("invalid")&&a(this).addClass("hover")}),a(".df-reply-qts-list>ul").on("mouseleave",".reply-qts-item",function(){a(this).removeClass("hover")}),w=!0,a(".df-reply-qts-list>ul").on("click",".delete-qt-op",function(t){t.stopPropagation();var e=a(this),i=e.parents(".content-wp").attr("data-qid");a.ajax({url:"/submit/user",type:"POST",dataType:"json",data:{em:i,cm:100571},success:function(t){t&&0===t.errorNo?(delete v[i],e.parents(".reply-qts-item").remove()):new h({content:t.errorMsg})},error:function(){new h({content:"网络错误！"})}})});var s;a(document).on("mouseover",".low-quality-btn",function(t){t.preventDefault(),s=new g({target:a(this),direction:"bottom",content:"描述不清，无法作答",position:{my:"center bottom",at:"center top-8"}})}),a(document).on("mouseout",".low-quality-btn",function(t){t.preventDefault(),s&&s.close()}),a(document).on("click",".low-quality-btn",function(t){t.preventDefault(),s&&s.close();var e=a(this).parents(".reply-qts-item"),i=e.find(".content-wp"),n=i.data("qid");a(this).remove(),a.ajax({url:"/submit/ajax",type:"POST",dataType:"json",data:{cm:100018,qid:n}}).done(function(){e.remove()}).fail(function(){}),m.send({type:2072,page:"zhidao-ihome",position:"low-quality-btn",action:"low-quality-click",from:"ihome-question-list"})})},scrollByQid:function(t){if(t){var e;e=a("string"===a.type(t)||"number"===a.type(t)?".q-item-"+t:t);var i,n=e.offset();i=Q.hasClass("fixed")?n.top-L:n.top-L-T,a(window).scrollTop(i)}},addQuestion:function(t,e){e=e||"ihomeUnkownQuestions";var i=f.get(e)||[];-1===i.indexOf(t)&&i.unshift(t),i.length>1e3&&(i.length=1e3),f.set(e,i)},init:function(t){var e=this;if(t=a.extend({rn:25},t||{}),t.tags&&!a.isString(t.tags[0])){var i=[];a(t.tags).each(function(){i.push(this.name)}),e.tags=t.tags=i}j=t,k=e.pageNum,e.getList(t),!w&&e.bindEvent(),clearInterval(q),q=setInterval(function(){e.updateList()},3e4)},bindHqEvent:function(){var t=this;a(".hq-list-refresh").click(function(){var e=a(".tag-item").filter(".selected").text();if(!e){var i=[];a(".tag-item").each(function(t,e){i.push(a(e).text())}),i.pop(),e=i}t.getHqList(e)}),a(".hq-list-content").click(".race-to-answer",function(t){var e=a(t.target),i=e.attr("href");if(i){var n=i.replace("/question/","").replace(/\.html.*$/,"");return a.ajax({url:"/uadmin/api/hqvalid",cache:!1,data:{strQids:n},dataType:"json",async:!1,success:function(t){return t.errno?void new h({title:"知道提示",content:'<div style="text-align: center;line-height: 80px">'+t.errmsg+"</div>"}):t.data[n]?void window.open(i,"_blank"):(new h({title:"知道提示",content:'<div style="text-align: center;line-height: 80px">该问题已经被回答！</div>'}),void e.removeClass("btn-36-green-new").addClass("btn-24-white1").text("已回答"))}}),!1}})},getHqList:function(t){a(".hq-list-refresh").find("i").removeClass().addClass("i-refresh-new-loading");var e={pn:0,rn:5,type:"HQ",keyInTag:1},i="/ihome/api/push",n="	",o=this.isMavin||0;if(o){e.type="quality";var l=[];a(".hq-list-content").find(".content-wp").each(function(t,e){l.push(a(e).data("qid"))}),l.length&&(e.qids=l.join()),n=",",i="/mavin/api/qualityqlist?cmd=getQlist"}e.tags="string"===a.type(t)?t:t?t.join(n):"",a.ajax({url:i,type:"get",data:e,dataType:"json",cache:"false",success:function(t){if(a(".hq-list-refresh").find("i").removeClass().addClass("i-refresh-new"),o&&t&&t.data&&t.data.list&&(t.data.detail=t.data.list),t.errno||!t.data||!t.data.detail)return void new h({title:"知道提示",content:t.errmsg});var e=t.data;if(e.isHQ=1,e.curPn=0,e.isMavin=o,e.assign=t.data.assign,e.viewedList="",!e.detail.length){var i=['<div style="margin: 0 20px;padding-bottom: 20px;background-color: #F4FEF6;','line-height: 60px;text-align: center;color:#666;">',"没有相关的高质问题，",'<span style="color:#2d64b6;cursor:pointer" class="tag-setting-trigger">设置兴趣</span>',"</div>"].join("");return void a(".hq-list-content").html(i)}a(".hq-list-content").html('<ul class="reply-qts-ul">'+s("t:reply-qts-list",e)+"</ul>")}})}});i.exports=H});
;define("ihome:widget/reply-qts/filter/filter.js",function(e,t,a){function i(e,t,a,i){if(s(e).length){a=a||20,i=i||200;for(var n=0;a>n;n++)!function(e,t,n){setTimeout(function(){s(e).animate({"margin-top":t}),a===n+1&&setTimeout(function(){s(e).fadeOut(function(){s(this).remove()})},500)},n*i)}(e,n%2?-t:t,n)}}var s=e("common:widget/js/util/tangram/tangram.js"),n=(e("common:widget/js/ui/base/base.js"),e("common:widget/js/ui/scrollbar/scrollbar.js")),o=e("common:widget/js/logic/set-tag-dialog/set-tag-dialog.js"),r=e("ihome:widget/reply-qts/list/list.js"),l=e("common:widget/js/util/log/log.js"),c=e("common:widget/js/util/tangram/cookie.js");e("ihome:widget/js/custom-style/custom-style.js"),window.highlight=function(e){if(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"),""==s.trim(s("#search-key-input").val()))return e;var t=new RegExp(s("#search-key-input").val().toLowerCase(),"gi"),a=t.exec(e);return e.replace(t,'<span style="color:red">'+a+"</span>")};var d=s(".wgt-ihome-filter"),h=s('.filter-classify input[type="radio"]',d);s.ajax({url:"/ihome/api/hottagrecommend",dataType:"json",async:!1,success:function(e){var t=F.context("user").hot=[];s(e.data.list).each(function(){t.push({name:this.tagName,legal:this.type})})}}),h.on("click",function(){s(".list-refresh").click()});var u=[];s(F.context("user").tags).each(function(){u.push(this.name)}),s("body").on("ihome.ask.terminal",function(){s(this).animate({scrollTop:s(".wgt-banner").outerHeight()},300)}),!c.get("ihomehq_tip_user")&&(c.set("ihomehq_tip_user",1),i(".tag-set-tip",3)),a.exports.init=function(){function e(e,t){if(v=d.length,v>h){for(var a=e;v>a;a++){if(w=d[a],p+w.outerWidth()+12>m)return b.width(p),C.animate({left:t},500),g++,j[g]={left:t,width:p,count:h},p=0,g>1?T.removeClass("unable-left"):T.addClass("unable-left"),void q.removeClass("unable-right");p+=w.outerWidth()+12,h++}b.width(m),C.animate({left:t},500),g++,j[g]={left:t,width:m,count:h},p=0,g>1?T.removeClass("unable-left"):T.addClass("unable-left"),f=g,q.addClass("unable-right")}}function t(){var e=s(window).scrollTop(),t=s(".wgt-ihome-filter .selected").data("type");"all"===t&&(e>k.outerHeight()+x.outerHeight()?y.hasClass("fixed")||(s(".wgt-banner-container").hide(),y.addClass("fixed").hide().show()):y.hasClass("fixed")&&(s(".wgt-banner-container").show(),y.removeClass("fixed").hide().show()))}var a,i=[],c=F.context("user");s(".wgt-ihome-filter").on("click","a:not(.button-control)",function(){var t=s(this).data("type");if(void 0!=t&&"add"!=t)if(s("#search-key-input").val(""),s("a",s(".wgt-ihome-filter")).each(function(){s(this).hasClass("selected")&&s(this).removeClass("selected")}),s("#tag-choose-all").removeClass("chiSelected"),s(this).addClass("selected"),parseInt(t)>=0||"alltag"==t){if(0==s(".tagSelected").length){var a=s('<a class="tagSelected hide" href="javascript:void(0);"></a>').text(s(".tag-button-container .selected").text());s(".tag-operate").append(a)}else s(".tagSelected").text(s(this).text());s("#tag-choose-all").addClass("chiSelected")}else("all"==t||"help"==t||"HQ"==t||"recommend"==t)&&(s(".tagSelected").remove(),"all"==t?function(){s(".wgt-ihome-tag-item").show(),s(".wgt-indivdual-center-border").show()}():function(){s(".wgt-ihome-tag-item").hide(),s(".wgt-indivdual-center-border").hide()}());if("add"==t){new o({type:"add",tags:c.tags,hot:c.hot,success:function(t){var a=this,i=s(".tag-button-container"),n=i.find("a:last").clone(!0);i.find("a:last").remove(),i.html(""),s(t).each(function(){a.addTag(this,i)}),s(n).appendTo(i),d=[],s(".tag-button-container a").each(function(){d.push(s(this))}),h=0,p=0,g=0,e(0,0),s(".list-refresh").click()}});var i=new n({scrollWrapper:s(".dialog-tags-wp"),scrollContent:s(".dialog-tags"),maxHeight:225});return void i.render()}t>=0&&(u.length=0,u.push(s(".button-misc").find(".selected").text())),void 0==t?void 0:s(".list-refresh").click()}),s(".list-refresh").on("click",function(e){var t={filter:s("#search-key-input").val(),type:"sep",callback:function(){a.removeClass("i-refresh-new-loading").addClass("i-refresh-new"),s(".df-reply-qts-list li").length<=25&&s("body").trigger("ihome.ask.terminal")},failback:function(){a.removeClass("i-refresh-new-loading").addClass("i-refresh-new")}},a=s(this).find("i"),i=s(".wgt-ihome-filter .selected").data("type");"all"==i||"alltag"==i?(u.length=0,s(c.tags).each(function(){u.push(this.name)})):("recommend"==i||"help"==i||"HQ"==i)&&(t.type=i),("sep"==t.type||"HQ"==t.type)&&(t.tags=u),t.isMavin=F.context("user").isMavin||0,a.removeClass("i-refresh-new").addClass("i-refresh-new-loading"),s(".hq-list-refresh").click(),setTimeout(function(){new r(t)},200),e.stopPropagation()}),s("#search-key-btn").click(function(e){var t=s(".i-refresh-new");t.removeClass("i-refresh-new").addClass("i-refresh-new-loading");var a=s("#search-key-input"),i={filter:a.val(),type:"sep",keyword:a.val(),callback:function(){t.removeClass("i-refresh-new-loading").addClass("i-refresh-new"),s(".df-reply-qts-list li").length<=25&&s("body").trigger("ihome.ask.terminal")},failback:function(){t.removeClass("i-refresh-new-loading").addClass("i-refresh-new")}};if(a.hasClass("error"))return void t.removeClass("i-refresh-new-loading").addClass("i-refresh-new");if(""==s.string(a.val()).trim())return t.removeClass("i-refresh-new-loading").addClass("i-refresh-new"),void a.addClass("error");var n=[];0!=s(".button-misc .selected").length?n=s(".button-misc .selected").text():s(c.tags).each(function(){n.push(this.name)}),i.tags=n,s("a",s(".wgt-ihome-filter")).each(function(){s(this).hasClass("selected")&&s(this).removeClass("selected")}),s("#tag-choose-all").addClass("selected"),s(".wgt-ihome-tag-item").show(),s(".wgt-indivdual-center-border").show(),setTimeout(function(){new r(i)},100),l.send({module:"ihome",page:"index",type:2072,pos:"search-keyword",fr:"ihome",action:"click",uid:F.context("user").uid,filter:a.val(),tags:s.isArray(n)?n.join("_"):n}),e.preventDefault()}),s("#search-key-input").blur(function(){s("#search-key-input").removeClass("focus error"),s(document).unbind("keydown")}).focus(function(){s("#search-key-input").addClass("focus").removeClass("error"),s(document).bind("keydown",function(e){var e=e||window.event,t=e.keyCode||e.which||e.charCode;13==t&&(e.preventDefault(),s("#search-key-btn").click())})}).on("input",function(){var e=s("#search-key-input");""!=s.string(e.val()).trim()&&e.removeClass("error")}),s(".wgt-ihome-filter .tag-setting").on("click",function(t){new o({type:"set",tags:c.tags,dialogClassName:"common-dialog-set-tag fixed-table",success:function(t){var a=this,i=s(".tag-button-container"),n=i.find("a:last").clone(!0);i.find("a:last").remove(),i.html(""),s(t).each(function(){a.addTag(this,i)}),s(n).appendTo(i),d=[],s(".tag-button-container a").each(function(){d.push(s(this))}),h=0,p=0,g=0,e(0,0),s(".list-refresh").click()}});var a=new n({scrollWrapper:s(".dialog-tags-wp"),scrollContent:s(".dialog-tags"),maxHeight:225});a.render(),t.stopPropagation()}),s(document.body).on("click",".tag-setting-trigger",function(){s(".wgt-ihome-filter .tag-setting")[0].click()});var d=[],h=0,g=0,f=0,m=530,p=0,w=null,v=0,b=s(".tag-buttons"),C=s(".tag-button-container"),y=(s(".wgt-ihome-filter"),s(".wgt-ihome-tag-item")),k=s(".wgt-banner"),x=(s("#header"),s(".tag-operation")),j=[];s(s.isArray(c.tags)?c.tags.concat():[]).each(function(){a=s.string(this.name).getByteLength()>20,a||i.push('<a class="tag-item" data-type="'+this.legal+'"><span>'+this.name+"</span></a>")}),i.push('<a class="tag-item" data-type="add"><span>添加+</span></a>'),s(".tag-button-container").append(i),s(".tag-button-container a").each(function(){d.push(s(this))});var T=s(".button-control-left"),q=s(".button-control-right");e(0,0);var H=0;s(".button-control-right").click(function(){clearTimeout(H),H=setTimeout(function(){var t=parseInt(b.outerWidth()),a=parseInt(C.css("left")),i=-t+a;e(h,i)},200)}),s(".button-control-left").click(function(){g>=2&&(g--,b.width(j[g].width),C.animate({left:j[g].left},500),h=j[g].count,q.removeClass("unable-right"),g>1?T.removeClass("unable-left"):T.addClass("unable-left"))});var S;s(window).on("resize scroll",function(){clearTimeout(S),S=setTimeout(t,50)})}});
;define("ihome:widget/reply-qts/list/newbie/newbie.js",function(t){var a=t("common:widget/js/util/tangram/tangram.js"),e="";a(".days-bonus-list li[data-canget] .bonus-get").hover(function(){var t=a(this),s=t.parent().attr("data-canget");0==s?a(".days-tip")&&a(".days-tip").show():1==s&&(e=t.html(),t.addClass("bonus-hover").html("领取奖励"))},function(){var t=a(this),s=t.parent().attr("data-canget");0==s?a(".days-tip")&&a(".days-tip").hide():1==s&&t.removeClass("bonus-hover").html(e)}),a(".days-bonus-list li[data-canget='1'] .bonus-get").click(function(){var t=a(this),s=t.parent(),n=t.attr("data-bonus");a.post("/submit/ajax",{cm:"100914",value:n,type:"0"},function(n){var n=a.parseJSON(n);0==n.errorNo&&(s.removeClass("to-get").addClass("has-get").removeAttr("data-canget"),t.removeClass("bonus-hover").html(e),alert("恭喜您领取成功！"))})}),a(".newer-gift-h").click(function(){var t=a(this);a.post("/submit/ajax",{cm:"100914",value:"1000",type:"1"},function(e){var e=a.parseJSON(e);0==e.errorNo&&(t.remove(),alert("恭喜您领取成功！"))})})});
;define("ihome:widget/set/interest/interest.js",function(t,e,a){var s=t("common:widget/js/util/tangram/tangram.js"),n=t("ihome:widget/js/set-tag-new/set-tag-new.js");t("ihome:widget/js/set-tag/sortable.js");var i=new n({searchSource:function(t,e){var a=this,n=e.kw,i=s(".ui-set-tag").eq(1);i.empty(),s(e.ret.data).each(function(){a.addTag(this.tagname,1,i),n.toLocaleUpperCase()==this.tagname.toLocaleUpperCase()&&(n="")}),n&&a.addTag(n,1,i)},delTag:function(){var t=i.getTags(s(".ui-set-tag").eq(0));i.submit({api:"/submit/user",tags:t})}}),r=s(".wgt-set-interest");s(".search-btn",r).on("click",function(){i.search(s(this).prev())}),s(".tag-search-input",r).focus(function(){var t=s(this);t.hasClass("error")&&t.val("").removeClass("error"),s(document).bind("keydown",function(t){var t=t||window.event,e=t.keyCode||t.which||t.charCode;13==e&&s(".search-btn",r).click()})}).blur(function(){var t=s(this);t.hasClass("error")&&t.val("").removeClass("error"),s(document).unbind("keydown")}),s(".btn-32-green",r).on("click",function(t){t.preventDefault(),i.submit({api:"/submit/user",tags:i.getTags(s(".wgt-set-interest")),errorDeal:function(){},successDeal:function(){var t=i.getTags(s(".ui-set-tag").eq(1)),e=i.getTags(s(".ui-set-tag").eq(0)),a=s(".my-set-tag",r);s(t.obj).each(function(){for(var t=this,s=0,n=0;n<e.name.length;n++)e.name[n]==t.name&&(s=1);s||i.addTag(t.name,t.legal,a,!0)})}})}),s(".my-set-tag").on("mouseup",".tag-item",function(){s(this);setTimeout(function(){i.submit({api:"/submit/user",tags:i.getTags(s(".my-set-tag"))})},100)}),a.exports.init=function(t){var e=s(".my-set-tag",r);s(t).each(function(){i.addTag(this.name,this.legal,e,!0)}),s(".my-set-tag").sortable()}});
;define("ihome:widget/set/msg/msg.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js"),n=(e("common:widget/js/util/event/event.js"),e("ihome:widget/js/pop-tip/pop-tip.js"));t(".set-accepted-wp label").click(function(){var e=t(this).find("input"),n=t('.set-radio-wp input[name="num"]');1==e.val()?(n.prop("disabled",!1),n.siblings().removeClass("disabled")):(n.prop("disabled",!0),n.siblings().addClass("disabled"))});var s=function(e){var n={};return t(e).find("input[type=checkbox]").each(function(e,s){n[t(s).attr("name")]=t(s).prev("i").hasClass("checked")?1:0}),n};t("#msgSetBtn").click(function(){var e=s("#setMsgForm"),i=t.form.json(t("#setHelpForm")[0]),o={switches:JSON.stringify(e)},r={cm:"100570",word:1==i.accepted?i.num:0},c=F.context("user")&&F.context("user").stoken;c&&(o.stoken=c)&&(r.stoken=c),t.post("/notice/switch/set",o,function(e){"0"==e.errno?t.post("/submit/user",r,function(e){"object"!=t.type(e)&&(e=new Function("return "+t.trim(e))()),"0"==e.errorNo?n("设置成功！"):"265"==e.errorNo?location.reload():n("设置失败，请重试")}):n("设置失败，请重试")})})});
;define("ihome:widget/set/profile/avatar.js",function(t,e,a){var i=t("common:widget/js/util/tangram/tangram.js"),r=t("common:widget/js/util/event/event.js"),c=t("common:widget/js/logic/submit/submit.js"),o=t("ihome:widget/js/pop-tip/pop-tip.js"),n=t("common:widget/js/util/https/https.js");a.exports.init=function(){function e(t){i(document).unbind("mousemove",e);var a=F.context("user");if("custom"==t.data.ac){var r="https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+a.imId+".jpg";r=n.autoTrans(r),i(".set-avatar-img-wp img").attr("src",r)}}var a=i(".title-radio:checked").val();r.on("check.submit",function(r,n){r.preventDefault();var s=13!=n?i(".title-"+n+"-"+F.context("user").gradeIndex)[0].innerHTML:"",m={cm:100520,role:n};new c({url:"/submit/user",params:m,hasJump:!1,beforeJump:function(){t.async("common:widget/js/util/tangram/tangram.js",function(){if(13==n){var t={ac:"custom",roleValue:13};i("#cus-avatar-tip").text("已同步百度帐号头像").css("color","#009900"),setTimeout(function(){i(document).unbind("mousemove",e),i(document).bind("mousemove",t,e)},800)}else i("#cus-avatar-tip").empty(),o("设置已保存"),e({data:{roleValue:n,roleTitle:s}})})},errorDeal:function(){13==n?i("#cus-avatar-tip").text("同步百度帐号头像失败").css("color","red"):(i("#title-"+n).removeAttr("checked"),i("#cus-avatar-tip").empty(),o("设置保存失败")),a=null}})});var s=i(".area-check").find(".i-darrow-up").size();i(".avatar-cb-wp label").eq(0).click(function(){r.fire("area.shrink",{flag:s=!1}),i(".set-avatar-img-wp img").attr("src").indexOf("default-avatar")<0?13!=a&&(a=13,r.fire("check.submit",13)):i(".upload-avatar-wp .btn-36-green-new").click()}),i(".avatar-cb-wp label:eq(1)").click(function(){r.fire("area.shrink",{flag:s=!0}),13==a&&i(".title-radio:checked").click()})}});
;define("ihome:widget/set/profile/contact.js",function(e){var i=e("common:widget/js/util/tangram/tangram.js"),t=(e("common:widget/js/logic/login/login.js"),e("common:widget/js/util/event/event.js")),c=e("ihome:widget/js/pop-tip/pop-tip.js"),n={config:{mobileSwitch:0,emailSwitch:0},init:function(){var e=this;t.fire("login.check",{isLogin:function(t){var c="";""!=t.mobile&&"*******"!=t.mobile&&(c=t.mobile),(c||"***"!=t.mail)&&i.get("/api/remindinfo?t="+(new Date).getTime(),function(t){var c=null;try{c=i.json.parse(t)}catch(n){c=t}c&&1==c.status&&(1==c.mobile&&(i("#mobileAnswer").get(0).checked=!0,i("#mobileAnswer").prev().addClass("checked"),e.config.mobileSwitch=1),1==c.email&&(i("#mailAnswer").get(0).checked=!0,i("#mailAnswer").prev().addClass("checked"),e.config.emailSwitch=1))})},noLogin:function(){t.fire("login.log",{onLoginSuccess:function(){}})}}),this.bindEvent()},bindEvent:function(){var e=this;i("#mobileAnswer").on("click",function(){e.remindSet("mobile",1==this.checked?"on":"off")}),i("#mailAnswer").on("click",function(){e.remindSet("email",1==this.checked?"on":"off")}),i(".set-secrecy").on("click",function(){var t=i(this).data("type");e.secrecySet(t)}),i(".secrecy-change").on("click",function(){i(".set-secrecy").data("type","2"),i(".secrecy-modify").show(),i(".secrecy-btn").show()})},secrecySet:function(e){if(1==e)var t=i(".secrecy select").val(),n=i(".secrecy input").val();else var t=i(".secrecy-modq").val(),n=i(".secrecy-moda").val(),o=i(".secrecy-oldq").data("q"),s=i(".secrecy-olda").val();var a={cm:100508,uflag:"set_secInfo",q:t,a:n,oldQ:o||"",oldA:s||""},r=F.context("user")&&F.context("user").stoken;r&&(a.stoken=r),i.post("/submit/user",a,function(e){var i="";switch(e.errorNo){case 0:i="保存成功",setTimeout(function(){window.location.reload()},2e3);break;default:i=e.errorMsg}c(i)})},remindSet:function(e,t){var n=this,o="/api/remindset?flag="+e+"&status="+t+"&t="+(new Date).getTime();i.get(o,function(o){var s=null;try{s=i.json.parse(o)}catch(a){s=o}var r="";switch(s.status){case 1:r="保存成功",n.config[e+"Switch"]="on"==t?1:0;break;case-2:r="请您登陆后再设置"+("mobile"==e?"短信":"邮箱")+"开关。";break;case-1:case-3:default:r=("mobile"==e?"短信":"邮箱")+"开关设置错误。"}c(r)})}};i(function(){n.init()})});
;define("ihome:widget/set/profile/profile.js",function(e){function t(e){var t,r=e.x1,i=e.y1,s=e.width,a=e.height;N=t=document.createElement("canvas"),t.width=s,t.height=a;var o=t.getContext("2d");return o.drawImage(D,r,i,s,a,0,0,s,a),t.toDataURL("image/png")}function r(){var e=N;D.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,N=null),D.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",D=null}function s(e){var t=_.width,r=_.height,i=_.ratio,s=D=new Image;s.src=e,s.onload=function(){function s(t){var r=_;k.x1=t.x,k.y1=t.y,k.x2=t.x2,k.y2=t.y2,k.width=t.w,k.height=t.h,d={x1:k.x1/M,y1:k.y1/M,x2:k.x2/M,y2:k.y2/M,width:k.width/M,height:k.height/M};var i=r.pre1_width/d.width,s=r.pre2_width/d.width,o={src:e,left:-(d.x1*i),top:-(d.y1*i),width:a*i,height:n*i},c={src:e,left:-(d.x1*s),top:-(d.y1*s),width:a*s,height:n*s};p(".avatar-show-wp .show-big img").css({width:o.width+"px",height:o.height+"px",left:o.left+"px",top:o.top+"px"}),p(".avatar-show-wp .show-small img").css({width:c.width+"px",height:c.height+"px",left:c.left+"px",top:c.top+"px"})}var a,n,c,l,u=10,h=10;M=-1;var d=null;a=this.width,n=this.height,a/n>=i?(c=t,l=c/a*n,M=c/a):(l=r,c=l/n*a,M=l/n);var m={src:e,width:c,height:l,zoom:M};p(".user-define-con").empty().append(y("t:img-show",m)),o(m),k={x1:-1,y1:-1,x2:-1,y2:-1,width:-1,height:-1},setTimeout(function(){p("#jcrop-target").Jcrop({onChange:s,onSelect:s,minSize:[u*M,h*M],aspectRatio:i},function(){A=this;var e,t;c/l>i?(e=c,t=e/c*l):(t=l,e=t/l*c),A.setSelect([0,0,e,t])})},100)}}function a(e){var t=e.split(",")[1];t=window.atob(t);for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);var s=new Blob([r],{type:"image/png"}),a=new FormData;a.append("file",s),a.append("cm",100508),a.append("uflag","set_icon"),p.ajax({url:"/submit/user",type:"post",data:a,processData:!1,contentType:!1}).done(function(e){0===e.errorNo||0==e.errorNo?h("https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+e.data.sign+".jpg?cdnversion="+Math.floor(1e4*Math.random())):v("设置保存失败")})}function o(e){var t=e,r=_,i={src:t.src,width:t.width/r.width*r.pre1_width,height:t.height/r.height*r.pre1_height,top:0,left:0},s={src:t.src,width:t.width/r.width*r.pre2_width,height:t.height/r.height*r.pre2_height,top:0,left:0};p(".avatar-show-wp .show-big").empty().append(y("t:pre1-show",i)),p(".avatar-show-wp .show-small").empty().append(y("t:pre2-show",s))}function n(){var e=Math.floor(1e4*Math.random()),t={self:F.context("user").selfDefinePhoto,imId:"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+F.context("user").imId+"?cdnversion="+e};C=new f({title:"上传头像",dialogClass:"ihome-set-avatar",content:y("t:upload-avatar",t),autoDispose:!0,width:691,open:function(){var e=p(".tab-item.choosed").data("type"),t=null,a=null;p("input.title-radio").customStyle("radio"),"system"==e&&null==a&&(a=new b({scrollWrapper:p(".system-con"),scrollContent:p(".system-con ul.line"),maxHeight:330}),a.render()),"user"==e&&(F.context("user").selfDefinePhoto=1,null!=t||l()&&u()||(t=x.create({swf:j.webuploaderSwf,server:"/submit/user",pick:"#avatar-picker",fileVal:"file",resize:!1,auto:!0,method:"POST",duplicate:!0,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/*"},formData:{cm:100508,uflag:"set_icon"}}),t.on("uploadSuccess",function(e,t){0===t.errorNo||0==t.errorNo?(h("https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+t.data.sign+".jpg?"+Math.floor(1e4*Math.random())),C.close(),v("设置保存成功")):v("设置保存失败")}))),l()&&u()&&(p(".avatar-upload-btn").on("click",function(){p("#avatar-file").trigger("click")}),p("#avatar-file").on("change",function(e){var t="",r=this.files[0];if(r.size>2097152)return f.close(),void f.alert("文件大小超过2M的限制。");if("undefined"==typeof FileReader)p.browser.msie===!0?t=e.target.value:p.browser.mozilla===!0&&(t=e.target.files.item(i).getAsDataURL()),s(t);else{var a=e.target.files.item(0);if(!/^image\/.*$/i.test(a.type))return f.close(),void f.alert("请上传图片格式的文件！");var o=new FileReader;o.readAsDataURL(a),o.onload=function(e){t=e.target.result,s(t)}}})),p(".tab-item").on("click",function(){e=p(this).data("type"),p(".tab-item").removeClass("choosed"),p(this).addClass("choosed"),p(this).hasClass("choosed")||c();var r={value:13,src:""};"user"==e?(F.context("user").selfDefinePhoto=1,p(".user-define-con").show(),p(".system-con").hide(),p(".avatar-upload-btn").show(),p(".system-show-wp").hide(),p(".avatar-show-wp").show(),null!=t||l()&&u()||(g.fire("check.submit",r),t=x.create({swf:j.webuploaderSwf,server:"/submit/user",pick:"#avatar-picker",fileVal:"file",resize:!1,auto:!0,method:"POST",duplicate:!0,accept:{title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/*"},formData:{cm:100508,uflag:"set_icon"}}),t.on("uploadSuccess",function(e,t){0===t.errorNo||0==t.errorNo?(h("https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+t.data.sign+".jpg?"+Math.floor(1e4*Math.random())),C.close(),v("设置保存成功")):v("设置保存失败")}))):"system"==e&&(F.context("user").selfDefinePhoto=0,p(".user-define-con").hide(),p(".system-con").show(),p(".avatar-upload-btn").hide(),p(".system-show-wp").show(),p(".avatar-show-wp").hide(),null==a&&(a=new b({scrollWrapper:p(".system-con"),scrollContent:p(".system-con ul.line"),maxHeight:330}),a.render()))}),p(".title-radio").on("click",function(){var e=p(this),t=e.parents(".title-list").find(".title-img").attr("src"),r={src:t,width:_.pre1_width,height:_.pre1_height,top:0,left:0},i={src:t,width:_.pre2_width,height:_.pre2_height,top:0,left:0};p(".system-show-wp .show-big").empty().append(y("t:pre1-show",r)),p(".system-show-wp .show-small").empty().append(y("t:pre2-show",i))}),p(".avatar-confirm").one("click",function(){if("user"===e)l()&&u()&&(p(".user-define-con").find("img").hasClass("origin")?g.fire("check.submit",{value:13,src:"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/"+F.context("user").imId+".jpg?cdnversion="+Math.floor(1e4*Math.random()),rectObj:null,isCrop:!1}):g.fire("check.submit",{value:13,src:"",rectObj:k,isCrop:!0})),C.close(),C=null;else if("system"===e){var t=p(".title-radio:checked"),r=t.val(),i=t.parents(".title-list").find(".title-img").attr("src"),r=13==r?6:r,s={value:r,src:i};g.fire("check.submit",s),C.close(),C=null}}),p(".avatar-reject").on("click",function(){D&&r(),C.close(),C=null})}})}function c(){var e=F.context("user").selfDefinePhoto,t={src:"",left:0,top:0,width:120,height:120},r={src:"",left:0,top:0,width:50,height:50};1==e&&(p(".user-define-con").find("img").hasClass("origin")||(t.src=r.src="")),p(".avatar-show-wp .show-big").empty().append(y("t:pre1-show",t)),p(".avatar-show-wp .show-small").empty().append(y("t:pre2-show",r))}function l(){return!!document.createElement("canvas").getContext}function u(){return window.File&&window.FileList&&window.FileReader&&window.Blob&&window.atob?!0:!1}function h(e){setTimeout(function(){p(".image-show-wp img").attr("src",e)},200)}function d(e){for(var t=e,r="",i=0;i<t.length;i++){var s=t.charAt(i);r+=m(s)}return r}function m(e){var t=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),r=!0,i=e.charCodeAt(0);switch(i){case 10:return"<br/>";case 32:return"&nbsp;";case 34:return"&quot;";case 38:return"&amp;";case 39:return"&#x27;";case 47:return"&#x2F;";case 60:return"&lt;";case 62:return"&gt;";case 198:return"&AElig;";case 193:return"&Aacute;";case 194:return"&Acirc;";case 192:return"&Agrave;";case 197:return"&Aring;";case 195:return"&Atilde;";case 196:return"&Auml;";case 199:return"&Ccedil;";case 208:return"&ETH;";case 201:return"&Eacute;";case 202:return"&Ecirc;";case 200:return"&Egrave;";case 203:return"&Euml;";case 205:return"&Iacute;";case 206:return"&Icirc;";case 204:return"&Igrave;";case 207:return"&Iuml;";case 209:return"&Ntilde;";case 211:return"&Oacute;";case 212:return"&Ocirc;";case 210:return"&Ograve;";case 216:return"&Oslash;";case 213:return"&Otilde;";case 214:return"&Ouml;";case 222:return"&THORN;";case 218:return"&Uacute;";case 219:return"&Ucirc;";case 217:return"&Ugrave;";case 220:return"&Uuml;";case 221:return"&Yacute;";case 225:return"&aacute;";case 226:return"&acirc;";case 230:return"&aelig;";case 224:return"&agrave;";case 229:return"&aring;";case 227:return"&atilde;";case 228:return"&auml;";case 231:return"&ccedil;";case 233:return"&eacute;";case 234:return"&ecirc;";case 232:return"&egrave;";case 240:return"&eth;";case 235:return"&euml;";case 237:return"&iacute;";case 238:return"&icirc;";case 236:return"&igrave;";case 239:return"&iuml;";case 241:return"&ntilde;";case 243:return"&oacute;";case 244:return"&ocirc;";case 242:return"&ograve;";case 248:return"&oslash;";case 245:return"&otilde;";case 246:return"&ouml;";case 223:return"&szlig;";case 254:return"&thorn;";case 250:return"&uacute;";case 251:return"&ucirc;";case 249:return"&ugrave;";case 252:return"&uuml;";case 253:return"&yacute;";case 255:return"&yuml;";case 162:return"&cent;";case"\r":break;default:r=!1}if(!r){if(i>127){var s=i,a=s%16;s=Math.floor(s/16);var o=s%16;s=Math.floor(s/16);var n=s%16;s=Math.floor(s/16);var c=s%16;return"&#x"+t[c]+t[n]+t[o]+t[a]+";"}return e}}var p=e("common:widget/js/util/tangram/tangram.js"),g=(e("common:widget/js/logic/login/login.js"),e("common:widget/js/util/event/event.js")),f=e("common:widget/js/ui/dialog/dialog.js"),w=e("common:widget/js/logic/submit/submit.js"),v=e("ihome:widget/js/pop-tip/pop-tip.js"),y=e("common:widget/js/util/template/template.js"),b=e("common:widget/js/ui/scrollbar/scrollbar.js"),x=e("common:widget/js/util/webuploader/webuploader.js"),j=e("common:widget/js/util/uri/uri.js"),b=e("common:widget/js/ui/scrollbar/scrollbar.js");e("ihome:widget/js/jcrop/jcrop.jquery.js");var C,A,k=null,M=-1,_={width:330,height:330,ratio:1,pre1_height:120,pre1_width:120,pre2_height:50,pre2_width:50},D=null,N=null;p(".avatar-mdf").on("click",function(){n()}),p("#sign-confirm").on("click",function(){var e=p(this),t=e.parents(".edit-set-mod"),r=p("#sign-div"),i=p(".show-sign"),s=p(".sign-num"),a=p(".sign-tips"),o=p("#sign-div input"),n=0;n=parseInt(o.val().length),n>20?v("个人简介不超过20个字"):p.ajax({url:"/submit/user",type:"post",data:{uflag:"set_profile",intro:p.trim(o.val()),cm:100508},success:function(e){0===e.errorNo||0==e.errorNo?(s.removeClass("editing"),r.removeClass("editing"),t.removeClass("editing"),a.removeClass("red"),i.html(d(p.trim(o.val()))).show(),o.remove(),v("设置已保存")):v(""!=e.errorMsg?e.errorMsg:"设置保存失败")}})}),p("#sign-reject").on("click",function(){var e=p(this),t=e.parents(".edit-set-mod"),r=p("#sign-div"),i=(p(".show-sign"),p(".sign-num")),s=p(".sign-tips");r.find("input").remove(),i.removeClass("editing"),r.removeClass("editing"),t.removeClass("editing"),s.removeClass("red")}),p("#sign-mdf").on("click",function(){var e,t=p(this),r=t.parents(".edit-set-mod"),i=p("#sign-div"),s=(p(".show-sign"),p(".sign-num")),a=p(".sign-tips"),o=null,n=0;i.find("input").remove(),e=p.trim(p("p",i).html()),o=p('<input type="text">'),o.val(e),i.prepend(o),o.focus(),n=parseInt(o.val().length),s.html(n),s.addClass("editing"),i.addClass("editing"),r.addClass("editing"),a.removeClass("red")}),p("#sign-div").on("input","input",function(){var e=parseInt(p.trim(p(this).val()).length);return p(".sign-num").html(e),e>20?(p(this).val(p.trim(p(this).val()).slice(0,20)),p(".sign-num").html(20),void p(".sign-tips").addClass("red")):void p(".sign-tips").removeClass("red")}),p(".set-item-official").on("click",function(){var e=p(this).html(),t=p(this);t.hasClass("choosed")?p.post("/submit/user",{cm:100508,uflag:"set_profile",officialTitle:"none"},function(e){0===e.errorNo||0==e.errorNo?(v("设置已保存"),p(".set-item-official").removeClass("choosed")):v(""!=e.errorMsg?e.errorMsg:"设置保存失败")}):p.post("/submit/user",{cm:100508,uflag:"set_profile",officialTitle:e},function(e){0===e.errorNo||0==e.errorNo?(v("设置已保存"),p(".set-item-official").removeClass("choosed"),t.addClass("choosed")):v(""!=e.errorMsg?e.errorMsg:"设置保存失败")})}),p(".sex-radio").on("click",function(e){e.preventDefault();var t=p(this).val();p.post("/submit/user",{cm:100508,uflag:"set_profile",sex:t},function(e){v(0===e.errorNo||0==e.errorNo?"设置已保存":""!=e.errorMsg?e.errorMsg:"设置保存失败")})}),g.on("check.submit",function(e,t){e.preventDefault();var r=t.value,i={cm:100520,role:r};new w({url:"/submit/user",params:i,hasJump:!1,beforeJump:function(){13!=t.value?(h(t.src),v("设置已保存")):1==t.isCrop?g.fire("crop.upload",t.rectObj):h(t.src)},errorDeal:function(){13!=t.value&&v("设置保存失败")}})}),g.on("avatar.success",function(e,t){p(".image-show-wp").find("img").attr("src",t)}),g.on("file.complete",function(e,t){v(0===t.errno||0==t.errno?"设置头像成功！":"设置头像失败")}),g.on("crop.upload",function(e,i){var s={x1:i.x1/M,y1:i.y1/M,x2:i.x2/M,y2:i.y2/M,width:i.width/M,height:i.height/M},o=t(s);f.close(),r(),a(o)})});
;define("ihome:widget/set/profile/sug.js",function(t){function e(t){v={tags:[],pos:0};for(var e="",n=0,a=t.data.tagList.list.length;a>n;n++)n%10==0&&(v.tags[n/10]={},v.tags[n/10].list=[]),e=t.data.tagList.list[n],h.tagList[encodeURIComponent(e)]||(v.tags[parseInt(n/10)].list[n%10]=e);return v}function n(t){var t=t;void 0==t&&(t=[]);for(var e=0,n=t.length;n>e;e++)h.tagList[encodeURIComponent(d.trim(t[e]))]=!0,h.origin.push({encode:encodeURIComponent(d.trim(t[e])),origin:d.trim(t[e])})}function a(t){var e=/</g,n=/>/g,a=/'/g,i=/"/g;return t.toString().replace(e,"&lt;").replace(n,"&gt;").replace(a,"&#39;").replace(i,"&#34;")}function i(t){return t=encodeURIComponent(d.trim(t)),h.tagList[t]?!1:g()?(0==d(".show-tag-wp").find(".set-item-tag").length&&d(".tag-tips-none").hide(),h.tagList[t]=!0,!0):(l("最多添加4个标签！"),!1)}function o(t){return t=encodeURIComponent(d.trim(t)),h.tagList[t]?(delete h.tagList[t],!0):!1}function g(){var t=0;for(var e in h.tagList)t++;return t>=4?!1:!0}function r(){var t=(h.tagList,[]);return d(".show-tag-wp .item-tag").each(function(e){t.push(decodeURIComponent(d(".show-tag-wp .item-tag").eq(e).data("origin")))}),n(t),t.join(",")}function s(){var t=h.tagList;h.origin=[];for(var e in t)h.origin.push({encode:e,origin:decodeURIComponent(e)})}function c(){h.tagList={};for(var t=0,e=h.origin.length;e>t;t++)h.tagList[encodeURIComponent(h.origin[t].origin)]=!0}function l(t){var e=d("#tag-warn");e.empty().html(t).show()}function m(){d("#tag-warn").hide()}{var d=t("common:widget/js/util/tangram/tangram.js"),p=t("ihome:widget/js/suggestion/suggestion.js"),u=(t("common:widget/js/util/event/event.js"),t("common:widget/js/util/form/form.js"),t("common:widget/js/util/log/log.js"),t("common:widget/js/ui/dialog/dialog.js"),t("common:widget/js/util/template/template.js")),f=t("ihome:widget/js/pop-tip/pop-tip.js"),h={modified:!1,tagList:{},origin:[]},v=null;new p({target:"#tagSearch",beforeinit:function(){this.checkDisabled=function(){return"1"==d.cookie.get("IK_SUG")}},open:function(){d(this.target).autocomplete("widget"),d.trim(d(this.target).val())},create:function(){var t=this,e=d(t.target).autocomplete("widget");e.delegate(".sug-close-opt","click",function(e){e.preventDefault(),e.stopPropagation(),d(t.target).autocomplete("close")})},response:function(t,e){var n=this;if(null!=e.content)if(1==e.content.length&&e.content[0].isNone===!0)e.content[0].value=d(n.target).val(),e.content[0].label=a(d(n.target).val());else for(var i=0,o=e.content.length;o>i;i++)e.content[i].value=e.content[i].tagname,e.content[i].tagname=a(e.content[i].tagname),e.content[i].label=e.content[i].tagname,i===o-1&&(e.content[i].last=1)},select:function(t,e){var n=this;t.preventDefault(),t.stopPropagation();var a=d.trim(e.item.label),o=d.trim(e.item.value);d(n.target).val(a),$targetEl=d(".show-tag-wp");var e={tagname:a,realtag:o};1==i(o)&&($targetEl.append(u("t:add-tag",e)),d(n.target).val("")),d(n.target).val("").autocomplete("close")}})}d("#tag-confirm").on("click",function(){var t=d(this),e=d(this).parents(".set-mod-line"),n=d(".tag-mdf-wp"),a=(n.find(".rec-tag-wp"),t.parents(".edit-set-mod")),i=r();d.post("/submit/user",{cm:100508,uflag:"set_userTags",userTags:i},function(t){0===t.errorNo||0==t.errorNo?(v=null,m(),s(),n.hide(),e.removeClass("editing"),a.removeClass("editing"),f("设置已保存")):f(""!=t.errorMsg?t.errorMsg:"设置保存失败")}).fail(function(){f("设置保存失败")})}),d("#tag-reject").on("click",function(t){t.preventDefault();var e=d(this),n=d(this).parents(".set-mod-line"),a=d(".tag-mdf-wp"),i=(a.find(".rec-tag-wp"),e.parents(".edit-set-mod"));v=null,m(),a.hide(),n.removeClass("editing"),i.removeClass("editing"),c(),d(".show-tag-wp").find(".set-item-tag").remove(),d(".show-tag-wp").append(u("t:new-tag",h)),0==d(".show-tag-wp").find(".set-item-tag").length?d(".tag-tips-none").show():d(".tag-tips-none").hide()}),d("#tag-mdf").on("click",function(){var t=d(this),n=d(this).parents(".set-mod-line"),a=d(".tag-mdf-wp"),i=a.find(".rec-tag-wp"),o=t.parents(".edit-set-mod");d.get("/usercenter/ajax/getrectagsforuser",function(t){if(0===t.errno||0==t.errno){var g=e(t,i);i.html(u("t:rec-tag",g.tags[0])),a.show(),n.addClass("editing"),o.addClass("editing")}else f(t.errmsg)})}),d(".tag-mdf-wp").on("click",".change-tag",function(t){t.preventDefault();var e=d(".tag-mdf-wp"),n=e.find(".rec-tag-wp");if(null!=v){var a=v.tags.length;a>0&&n.html(u("t:rec-tag",v.tags[parseInt(++v.pos%a)]))}else f("操作错误")}),n(F.context("user").usertags),d(".show-tag-wp").on("click",".tag-delete",function(t){t.preventDefault(),t.stopPropagation(),m();var e=d(this).parents(".set-item-tag").find(".item-tag"),n=decodeURIComponent(e.data("origin"));o(n),d(this).parents(".set-item-tag").remove(),0==d(".show-tag-wp").find(".set-item-tag").length&&d(".tag-tips-none").show()}),d(".rec-tag-wp").on("click",".set-item-tag.rec",function(){var t=d(this),e=d(".show-tag-wp"),n=d.trim(t.html()),a=decodeURIComponent(t.data("origin")),o={tagname:n,realtag:a};1==i(a)&&e.append(u("t:add-tag",o))})});
;define("ihome:widget/set/sns/sns.js",function(n){function t(n){var t="http://passport.baidu.com/phoenix/account/startlogin?display=popup&act=bind",o="ik",e=window.location.href,s="http://zhidao.baidu.com/html/xd.html#display=popup";return t+="&type="+n+"&tpl="+o+"&u="+encodeURIComponent(e),t+="&xd="+encodeURIComponent(s),i.XD._active=window.open(t,"newwindow","height=400,width=600,toolbar=no,menubar=no,location=no,status=no"),!1}var o=n("common:widget/js/util/tangram/tangram.js"),i=(n("common:widget/js/util/event/event.js"),n("common:widget/js/logic/submit/submit.js"),n("ihome:widget/js/pop-tip/pop-tip.js"),n("common:widget/js/ui/dialog/dialog.js"),i||{});i.XD=i.XD||{},window.BD=i,i.XD.postMessage=function(n){i.XD._active.close(),1==n.success&&setTimeout(function(){window.location.reload(!0)},500)},o(".sns-renren-bind").click(function(n){n.preventDefault(),t(1)}),o(".sns-sina-bind").click(function(n){n.preventDefault(),t(2)}),o(".sns-tencent-bind").click(function(n){n.preventDefault(),t(4)})});
;define("ihome:widget/set/verify/verify.js",function(i){function e(i,e,t){new n({container:"account-verify",type:i||"bind",phoneToShow:e||"",phoneToSubmit:t||"",successObj:['<div class="callback-success-info"',"<h1>验证成功！</h1>",'<p>请<a href="/ihome" class="ml-10 mr-10">点此</a>返回个人中心继续回答吧~</p>',"</div>"].join("")});o("#account-verify .bind-tip").html(c?'注：<br/>1.如果您无法通过此手机接受短信，请反馈至邮箱：<a href="mailto:zhidaozhuanjia@baidu.com">zhidaozhuanjia@baidu.com</a><br/>2.同一手机号24小时内最多可获取5次验证码，每个账号每天只能验证解封一次':'注：<br/>1.如果您无法通过此手机接受短信，请通过<a href="http://tousu.baidu.com/zhidao#2" target="_top">人工申诉</a>完成验证<br/>2.同一手机号24小时内最多可获取5次验证码，每个账号每天只能验证解封一次')}var o=i("common:widget/js/util/tangram/tangram.js"),t=(i("common:widget/js/logic/login/login.js"),i("common:widget/js/util/event/event.js")),n=i("common:widget/js/logic/phone-bind/phone-bind.js"),c=F.context("pgcMobile");t.fire("login.check",{isLogin:function(i){var t="",n="";c?(t=c.slice(0,3)+"****"+c.slice(-4),n=c):"*******"!=i.mobile&&(t=i.mobile,n=F.context("securemobil")),t&&n?(o("#account-verify-title").html("由于您的账号存在异常，请使用您绑定的手机完成身份验证："),e("verify",t,n)):(o("#account-verify-title").html("由于您的账号存在异常，请绑定您的手机完成身份验证："),e("verify"))}})});
;define("ihome:widget/simple-guide/simple-guide.js",function(e,t,i){var n=e("common:widget/lib/jquery/jquery.js"),o=e("common:widget/js/ui/base/base.js"),r=bkgTimer=null,a=o(function(){var e=this;e.step=1,e.oriHeight=n("body").height(),e.targetTop="auto",e.targetLeft="auto"}).extend({init:function(){if(1==F.context("user").isLogin&&1!=n.cookie.get("IK_IHOME_GUIDE")&&(n.cookie.set("IK_IHOME_GUIDE","1",{path:"/",expires:2592e6}),6!=n.browser.ie)){var e=this,t=n(window).width(),i=n(window).height();scrollElem=n.browser.ie||n.browser.firefox?document.documentElement:document.body,e.layer=n("<div/>").prop({"class":"simple-guide-layer",id:"simple-guide-layer"}).appendTo("body"),e.container=n("<div/>").prop({"class":"wgt-simple-guide star-3",id:"wgt-simple-guide"}).html(['<div class="guide-content"></div>','<a href="#" class="next-guide"></a>','<a href="#" class="close-guide"></a>','<div class="expand-tip none"></div>'].join("")).appendTo("body").css({width:t,height:i}),bkgTimer=setInterval(function(){var e=n("#wgt-simple-guide"),t=e.attr("class").replace(/[^\d]/gi,"");t++,t>3&&(t=1),e.removeClass().addClass("wgt-simple-guide star-"+t),n(scrollElem).scrollTop(0)},1e3),e.content=n(e.container.find(".guide-content")),e.render(e.step),e.eventHandler(),n("body").css({height:i,overflow:"hidden"}),n(scrollElem).scrollTop(0)}},render:function(e){var t=this,i=n("#tpl-guide-"+e).html();t.content.html(i),t.resize(e)},resize:function(){var e=this,t=n(window).height(),i=n(window).width(),o=e.content.height(),a=e.content.width(),s=(t-o)/2,l=(i-a)/2;switch(e.container.css({width:i,height:t}),e.step){case 1:e.targetTop="auto",e.targetLeft="auto";break;case 2:n(".banner-shrink-btn").find(".i-incline-down").size()&&n(".banner-shrink-btn").click(),n(".expand-tip").css({left:n(".banner-shrink-btn").offset().left-33,top:78}).removeClass("none"),e.breath(".expand-tip");var c=n(".ihome-menu");e.targetTop=114,e.targetLeft=c.offset().left-26;break;case 3:clearInterval(r),n(".expand-tip").addClass("none");var c=n(".wgt-ihome-filter");e.targetTop=c.offset().top-25,e.targetLeft=c.offset().left-29;break;case 4:var c=n(".ihome-menu");e.targetTop=-3,e.targetLeft=c.offset().left;break;case 5:e.breath(".start-now"),e.targetTop="auto",e.targetLeft="auto",n(".next-guide").remove(),n(".close-guide").remove()}"auto"!=e.targetTop&&(s=e.targetTop),"auto"!=e.targetLeft&&(l=e.targetLeft),e.content.css({top:s,left:l}),n(".close-guide").css("left",n(".ihome-menu").offset().left)},close:function(){var e=this;clearInterval(r),clearInterval(bkgTimer),e.layer.remove(),e.container.remove(),n("body").css({height:e.oriHeight,overflow:""})},eventHandler:function(){var e=this;e.container.delegate(".close-guide","click",function(t){t.preventDefault(),e.close()}).delegate(".next-guide","click",function(t){t.preventDefault(),e.step+=1,2==e.step&&n(".banner-shrink-btn").find(".i-incline-down").size()&&n(".banner-shrink-btn").click(),e.render(e.step)}).delegate(".start-now","click",function(){e.close()}),n(window).on("resize",function(){e.resize()})},breath:function(e){var t=0,i=1;clearInterval(r),r=setInterval(function(){10>t&&1==i?t+=.5:(i=0,t>5&&0==i?t-=.5:i=1),n(e).css({opacity:.1*t,filter:"alpha(opacity="+20*t+")"})},120)}});i.exports=new a});
;define("ihome:widget/task/achievement/achievement.js",function(e,i,t){function n(e){new a({fromTask:!0,autoRender:!0,target:e})}var a=(e("common:widget/lib/jquery/jquery.js"),e("ihome:widget/js/item-display/item-display.js"));t.exports.init=n});
;define("ihome:widget/task/daily/daily.js",function(t,i,e){function n(t){o(".daily-get-award",t).on("click",function(t){t.preventDefault();var i=o(this);if(!i.hasClass("done")){var e=i.data("id");s.getTaskAward({taskId:e},function(){if(i.text("").removeClass("btn-orange-s").addClass("done"),i.parents("li").removeClass("award-get").addClass("done"),~location.href.indexOf("from=rock_task_task")&&117===+e){var t=['<div style="text-align:center;font-size:16px;line-height: 4">已完成攀岩任务第4关！</div>','<div style="text-align:center;padding-bottom: 20px">','<a class="btn-32-green" href="/activity/panyan?act=index">',"继续闯关</a></div>"];new a({title:"知道提示",width:400,content:t.join("")})}})}}),o(".detail em",t).mouseover(function(){this.tip||(this.tip=new d({direction:"top",content:"<p>如何回答高质量问题？</p><p>①加入团队内有任务包可回答高质量问题</p><p>②八级以上用户个人中心可回答高质问题</p>",target:this,position:{my:"left top",at:"left-10 bottom+10"}})),this.tip.show(),o(".tip-arrow-top",this.tip.getTipContainer()).css("left","12px")}).mouseout(function(){this.tip.hide()})}var o=t("common:widget/lib/jquery/jquery.js"),a=t("common:widget/js/ui/dialog/dialog.js"),s=t("common:widget/js/logic/task/task.js"),d=t("common:widget/js/ui/tip/tip.js");e.exports.init=n});
;define("ihome:widget/task/growth/growth.js",function(t,e,a){function n(t){var e=o(".tabcnts",t),a=e.find(".level"),n=e.find(".level-branch"),r=e.find(".level-road"),s=o(".growth-inner",t),c=s.find(".level"),d=c.length,f=c.eq(0).width();s.find("ul").css({width:(f+105)*d+105+"px"});var h=o(".knowledge-inner",t),v=h.find(".level"),g=v.length,w=v.eq(0).width();h.find("ul").css({width:(w+105)*g+105+"px"}),o.each(a,function(t,e){var a=parseInt(o(e).data("index"),10);o(e).css({left:210*a+6*Math.floor(a/2)+"px",top:a%2===0?"76px":"128px"}).fadeIn()}),o.each(n,function(t,e){var a=parseInt(o(e).data("index"),10);o(e).css({left:114+210*a+6*Math.floor(a/2)+"px",top:a%2===0?"52px":"164px"}).fadeIn()}),setTimeout(function(){o.each(r,function(t,e){var a=parseInt(o(e).data("index"),10);o(e).css({left:52+210*a+6*Math.floor(a/2)+"px",top:a%2===0?"134px":"50px"}).fadeIn()})},100),i(t),o(".awards-get").on("click",function(){var t=o(this),e=t.data("id");l.getTaskAward({taskId:e},function(){t.parents(".tips").hide()})});var p=0;o(".level, .level-branch",e).on("mouseenter",function(t){var e=this;p=setTimeout(function(){if(0===o(t.target).closest(".tips").length){var a=o(e).find(".detail-tips");a.fadeIn()}},200)}).on("mouseleave",function(t){var e=this;if(clearTimeout(p),0===o(t.target).closest(".tips").length){var a=o(e).find(".detail-tips");a.fadeOut()}}),o(".task-open").on("click",function(){var t=o(this),e=t.data("type");l.startGrowthTask({tgroup:t.data("type")},function(){"adoptUp"===e&&o.cookie.set("IK_IHOME_TASK_ADOPT",1),window.location.reload()})});var u=o(".task-mod-growth .tabs span"),m=o(".task-mod-growth .tabcnts");u.on("click",function(){var t=o(this),e=t.data("index");u.removeClass("active"),t.addClass("active"),m.hide(),m.eq(e).fadeIn()});var k=o(".growth-cover",h);0===k.length&&o.cookie.get("IK_IHOME_TASK_ADOPT")&&(o.cookie.remove("IK_IHOME_TASK_ADOPT"),u.eq(1).click())}function i(t){o(".growth-scrollbar").fadeIn(),o(".knowledge-scrollbar").fadeIn();var e=r.init("#wgt-task-growth",".growth-inner ul",1),a=r.init(".growth-scrollbar",".scrollbar-face");e.slave=a,a.slave=e;var n=r.init("#wgt-task-growth",".knowledge-inner ul",1),i=r.init(".knowledge-scrollbar",".scrollbar-face");n.slave=i,i.slave=n;var l=o(".growth-inner",t),s=o(".level.done",l),c=s.length;if(c>1){var d=-210*c+6*Math.floor(c/2)+216;d=Math.min(Math.max(e.minLeft,d),0),e.sync(d/a.minLeft),e.$bar.css("left",d),e.left=d,a.ayncTo(d/e.minLeft)}var f=o(".knowledge-inner",t),h=o(".level.done",f),v=h.length;if(v>1){var g=-210*v+6*Math.floor(v/2)+216;g=Math.min(Math.max(n.minLeft,g),0),n.sync(d/a.minLeft),n.$bar.css("left",g),n.left=g,i.ayncTo(g/n.minLeft)}}var o=t("common:widget/lib/jquery/jquery.js"),r=(t("common:widget/js/ui/dialog/dialog.js"),t("ihome:widget/js/scrollbar/scrollbar.js")),l=t("common:widget/js/logic/task/task.js");a.exports.init=n});
;define("ihome:widget/task/rank/rank.js",function(a,t,e){function i(a){s(".task-award-btn",a).on("click",function(t){t.preventDefault();var e=s(this);e.hasClass("disabled")||n.getTaskAward({type:"weekAdoptReward"},function(){e.addClass("disabled"),s(".current-rewards",a).html(0)})})}var s=a("common:widget/lib/jquery/jquery.js"),n=(a("common:widget/js/ui/dialog/dialog.js"),a("common:widget/js/logic/task/task.js"));e.exports.init=i});
;define("ihome:widget/uadmin/tag-list/tag-list.js",function(t,e,a){var n=($=t("common:widget/js/util/tangram/tangram.js"),t("common:widget/js/util/template/template.js")),i=t("common:widget/js/ui/base/base.js"),s=t("common:widget/js/ui/dialog/dialog.js"),o=t("common:widget/js/util/event/event.js"),r=t("common:widget/js/util/num2chinese/num2chinese.js"),d=i(function(){}).extend({init:function(t){var e=this;e.options=t,e.ajaxEvent(),e.bindEvent(),o.fire("get.taglist",t)},ajaxEvent:function(){var t=this;o.on("get.taglist",function(e,a){$($.browser.ie||$.browser.firefox?document.documentElement:document.body).animate({scrollTop:"0px"},500);var i={cid:F.context("currCid"),type:a.type,_t:(new Date).getTime()},s=!1;"qualityauth"==a.type&&$("#tag-content .content-auth").hasClass("content-auth-zoom")&&(s=!0),$("#tag-content").html('<div class="load-next"><div class="load-next-icon"></div></div>'),$.get("/uadmin/api/getdata",i,function(e){if(data="object"==typeof e?e:$.json.parse(e),!data.data||null==data.data||data.data&&data.data.length<1)return void setTimeout(function(){$("#tag-content").html('<div class="no-data"><div class="no-data-txt">当前分类下没有可供处理的问题<br/>可以切换到其他分类试一试</div></div>'),$(".load-next").removeClass("loading")},500);var i=[];if("recommend"==a.type||"historyRecommend"==a.type){i.push(data.data.qid);for(var o=0;o<data.data.answers.length;o++)data.data.answers[o].level&&(data.data.answers[o].level=r(data.data.answers[o].level))}else if("qualityauth"==a.type||"topicAuth"==a.type){if(!data.data.qid||void 0==data.data.qid)return void setTimeout(function(){$("#tag-content").html('<div class="no-data"><div class="no-data-txt">当前分类下没有可供处理的问题<br/>可以切换到其他分类试一试</div></div>'),$(".load-next").removeClass("loading")},500);i.push(data.data.qid),data.data.authAnswer.ansContent=data.data.authAnswer.ansContent.replace(/<script.*?>/gi,"&lt;script&gt;"),data.data.authAnswer.ansContent=data.data.authAnswer.ansContent.replace("</script>","&lt;/script&gt;"),data.data.authAnswer.ansContent=data.data.authAnswer.ansContent.replace(/<style.*?>/gi,"&lt;style&gt;"),data.data.authAnswer.ansContent=data.data.authAnswer.ansContent.replace("</style>","&lt;/style&gt;"),data.data.authAnswer.lastReply&&(data.data.authAnswer.lastReply=data.data.authAnswer.lastReply.replace(/<script.*?>/gi,"&lt;script&gt;"),data.data.authAnswer.lastReply=data.data.authAnswer.lastReply.replace("</script>","&lt;/script&gt;"),data.data.authAnswer.lastReply=data.data.authAnswer.lastReply.replace(/<style.*?>/gi,"&lt;style&gt;"),data.data.authAnswer.lastReply=data.data.authAnswer.lastReply.replace("</style>","&lt;/style&gt;")),data.data.simReply.ansContent&&(data.data.simReply.ansContent=data.data.simReply.ansContent.replace(/<script.*?>/gi,"&lt;script&gt;"),data.data.simReply.ansContent=data.data.simReply.ansContent.replace("</script>","&lt;/script&gt;"),data.data.simReply.ansContent=data.data.simReply.ansContent.replace(/<style.*?>/gi,"&lt;style&gt;"),data.data.simReply.ansContent=data.data.simReply.ansContent.replace("</style>","&lt;/style&gt;"),data.data.authAnswer.ansContent=data.data.authAnswer.ansContent.replace(/<img/gi,'<img width="100%"'),data.data.simReply.ansContent=data.data.simReply.ansContent.replace(/<img/gi,'<img width="100%"')),data.data.qualityAuthZoom=s}else{for(var d=0;d<data.data.length;d++)"qualitysort"==a.type?data.data[d].tag="qualitysort":"qualityTopic"==a.type&&(data.data[d].tag="qualityTopic"),data.data[d].titleall=data.data[d].title,data.data[d].title=t._truncate(data.data[d].title,30),i.push(data.data[d].qid);$(".load-next").removeClass("loading")}F.context("postQid",i.join("_")),data.data.authnum=F.context("authnum"),$("#tag-content").html(n("t:tag-content-list",data))})}),o.on("set.report",function(t,e){{var a={typeid:0,itemid:e.params.qid,userid:e.params.uid},n={contentType:"frame",content:"/smartmis/click?"+$.url.jsonToQuery(a,encodeURIComponent),title:"我来检举",width:400,height:370,autoDispose:!0};s.iframe(n)}}),o.on("set.encrypt",function(t,e){$.post("/uadmin/submit/deletereply",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})}),o.on("set.historydeletereply",function(t,e){$.post("/uadmin/submit/historydeletereply",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})}),o.on("set.tag",function(e,a){var n="/uadmin/submit/settag";"historyRecommend"==t.options.type&&(n="/uadmin/submit/sethistorytag"),$.post(n,a.params,function(t){0==t.errno?a.onsuccess(t):a.onfail(t)})}),o.on("set.recommend",function(t,e){$.post("/uadmin/submit/recommend",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})}),o.on("set.historyrecommend",function(t,e){$.post("/uadmin/submit/historyrecommend",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})}),o.on("set.finish",function(t,e){$.post("/uadmin/submit/complete",e,function(){o.fire("get.taglist",e)})}),o.on("set.drop",function(e,a){var n="/uadmin/submit/release";"historyRecommend"==t.options.type&&(n="/uadmin/submit/historyrelease"),a.qid?$.post(n,{qid:a.qid,type:a.options.type},function(){o.fire("get.taglist",a.options)}):o.fire("get.taglist",a.options)}),o.on("set.qsort",function(t,e){$.post("/uadmin/submit/setqsort",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})}),o.on("set.qauth",function(t,e){$.post("/uadmin/submit/setqauth",e.params,function(t){0==t.errno?e.onsuccess(t):e.onfail(t)})})},_truncate:function(t,e){return t.length>e?t.substr(0,e)+"...":t},bindEvent:function(){var t=this,e=!1,a=function(){e=!0,setTimeout(function(){e=!1},1e3)};$("#tag-content").delegate(".q-list-item","mouseenter",function(){$(this).find(".q-list-item-operate").fadeIn(100)}).delegate(".q-list-item","mouseleave",function(){$(this).find(".q-list-item-operate").fadeOut(100)}).delegate(".operate-report","click",function(t){t.preventDefault();var e=$(this);qid=$(t.target).data("qid"),uid=$(t.target).data("uid"),o.fire("set.report",{params:{qid:qid,uid:uid}}),window._accuseSuccessCallback=function(){e.parent().parent().append('<div class="q-list-item-operate-hasdone"></div>').css("background-color","#efefef"),e.parent().remove(),e=null}}).delegate(".operate-badq","click",function(t){t.preventDefault();var e=$(t.target),a={qid:e.data("qid"),optype:"drop"};s.confirm("确定将该问题设置为提问不够好吗？",{onaccept:function(){o.fire("set.qsort",{params:a,onsuccess:function(){var t=e.parent().parent();t.css("background-color","#efefef").append('<div class="q-list-item-operate-hasdone"></div>'),t.find(".operate-badq").remove(),t.find(".operate-pushq").remove(),s.close()},onfail:function(t){s.alert(t.errmsg)}})}})}),$(".tag-list-recommend").delegate(".answer-area-item .recommend-answer","click",function(e){e.preventDefault();var a=$(e.target),n=a.data("qid"),i=a.data("rid");s.alert("确定推荐该答案吗？",{onaccept:function(){o.fire("set.recommend",{params:{qid:n,rid:i},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}})}).delegate(".recans-bar .btn-uadmin-green, .recans-footer-bar .btn-uadmin-green","click",function(e){e.preventDefault();var a=($(e.target),F.context("postQid")||"");s.alert("确定该问题暂无答案吗？",{onaccept:function(){s.close(),o.fire("set.recommend",{params:{qid:a,rid:0,discard:1},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}})}).delegate(".answer-area-item .operate-encrypt","click",function(t){function e(t){s.close(),o.fire("set.encrypt",{params:t,onsuccess:function(){var t=a.parent().parent();t.css("background-color","#efefef").append('<div class="q-list-item-operate-hasdone"></div>'),t.find(".recommend-answer").remove(),t.find(".operate-encrypt").remove()},onfail:function(t){s.alert(t.errmsg)}})}t.preventDefault();var a=$(t.target),n=a.data("qid"),i=a.data("rid");s.alert("请对该回答进行以下加密操作",{width:500,buttons:[{text:"广告，黄反内容",className:"btn-uadmin-whrite mr-10",click:function(){e({qid:n,rid:i,reason:0})}},{text:"无意义灌水",className:"btn-uadmin-whrite mr-10",click:function(){e({qid:n,rid:i,reason:1})}},{text:"恶意重复",className:"btn-uadmin-whrite",click:function(){e({qid:n,rid:i,reason:2})}}]})}).delegate(".ask-area-btn .btn-uadmin-whrite","click",function(t){t.preventDefault();var e=$(t.target).data("qid"),a=$(t.target).data("uid");o.fire("set.report",{params:{qid:e,uid:a}})}),$(".tag-list-history").delegate(".content-history .answer-area-item .history-recommend-answer","click",function(e){e.preventDefault();var a=$(e.target),n=a.data("qid"),i=a.data("rid");s.alert("确定推荐该答案吗？",{onaccept:function(){o.fire("set.historyrecommend",{params:{qid:n,rid:i},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}})}).delegate(".history-bar .btn-uadmin-green, .history-footer-bar .btn-uadmin-green","click",function(e){e.preventDefault();var a=($(e.target),F.context("postQid")||"");s.alert("确定该问题暂无答案吗？",{onaccept:function(){s.close(),o.fire("set.historyrecommend",{params:{qid:a,rid:0,discard:1},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}})}).delegate(".content-history .answer-area-item .operate-encrypt","click",function(t){function e(t){s.close(),o.fire("set.historydeletereply",{params:t,onsuccess:function(){var t=a.parent().parent();t.css("background-color","#efefef").append('<div class="q-list-item-operate-hasdone"></div>'),t.find(".recommend-answer").remove(),t.find(".operate-encrypt").remove()},onfail:function(t){s.alert(t.errmsg)}})}t.preventDefault();var a=$(t.target),n=a.data("qid"),i=a.data("rid");s.alert("请对该回答进行以下加密操作",{width:500,buttons:[{text:"广告，黄反内容",className:"btn-uadmin-whrite mr-10",click:function(){e({qid:n,rid:i,reason:0})}},{text:"无意义灌水",className:"btn-uadmin-whrite mr-10",click:function(){e({qid:n,rid:i,reason:1})}},{text:"恶意重复",className:"btn-uadmin-whrite",click:function(){e({qid:n,rid:i,reason:2})}}]})}).delegate(".ask-area-btn .btn-uadmin-whrite","click",function(t){t.preventDefault();var e=$(t.target).data("qid"),a=$(t.target).data("uid");o.fire("set.report",{params:{qid:e,uid:a}})}),$(".tag-list").delegate(".content-auth .answer-area-btns .btn-uadmin-green","click",function(n){if(n.preventDefault(),!e&&(a(),!$(this).hasClass("disabled"))){var i=$(this).parent().data("qid"),r=$(this).parent().data("rid");o.fire("set.qauth",{params:{qid:i,rid:r,optype:"pass"},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}}).delegate(".content-auth .answer-area-btns .btn-uadmin-whrite","click",function(n){if(n.preventDefault(),!e&&(a(),!$(this).hasClass("disabled"))){var i=[],r=$(this).parent().data("qid"),d=$(this).parent().data("rid");$(".answer-ban-reason .selected").each(function(){i.push($(this).data("reasonid"))});var l=$(".reason-txt").val(),c=300;if(l.length>c)return void s.alert("补充内容已超过字数限制，请修改后再提交哦。");o.fire("set.qauth",{params:{qid:r,rid:d,optype:"refuse",reason:i.join(),reasonTxt:l},onsuccess:function(){o.fire("get.taglist",t.options)},onfail:function(t){s.alert(t.errmsg)}})}}).delegate(".answer-ban-reason .level-one-item","click",function(){return $(".level-one-item.selected").length>2&&!$(this).hasClass("selected")?void s.alert("拒绝理由最多可以选三个~"):($(this).toggleClass("selected"),$(this).hasClass("selected")?($(".answer-ban-reason").find(".level-two-wrap").hide(),$(this).parent().find(".level-two-wrap").slideDown(50),$(this).parent().find(".level-two-wrap li:first").addClass("selected")):($(this).parent().find(".level-two-wrap li").removeClass("selected"),$(this).parent().find(".level-two-wrap").slideUp(50)),void($(".answer-ban-reason").find(".selected").length>0||$(".reason-txt").val().length>0?$(".answer-area-btns .btn-uadmin-green").addClass("disabled"):$(".answer-area-btns .btn-uadmin-green").removeClass("disabled")))}).delegate(".answer-ban-reason .level-two-wrap li","click",function(){$(this).toggleClass("selected"),$(this).hasClass("selected")&&$(this).parent().parent().find(".level-one-item").addClass("selected")}).delegate(".reason-txt","keyup",function(){$(".answer-ban-reason").find(".selected").length>0||$(".reason-txt").val().length>0?$(".answer-area-btns .btn-uadmin-green").addClass("disabled"):$(".answer-area-btns .btn-uadmin-green").removeClass("disabled")}).delegate(".content-auth .auth-zoom-btn","click",function(){var t=$(this),e=t.closest(".content-auth"),a=t.closest(".uadmin-content"),n=$(".uadmin-aside"),i=$(".auth-zoom-text",t);t.hasClass("auth-zoom-in")?(n.show(),a.animate({width:"833px"},500,function(){e.removeClass("content-auth-zoom"),t.removeClass("auth-zoom-in"),i.text("进入放大模式")})):(n.hide(),a.animate({width:"100%"},500,function(){e.addClass("content-auth-zoom"),t.addClass("auth-zoom-in"),i.text("返回普通模式")}))}),$(".tag-list").delegate(".load-next","click",function(){t.options.cid=F.context("currCid"),$(".load-next").addClass("loading"),o.fire("set.finish",{qids:F.context("postQid"),cid:t.options.cid,type:t.options.type})}),$(".tag-list").delegate(".tag-list-right .btn-sort-hq","click",function(e){e.preventDefault(),t.options.type="qualitysort",$(this).removeClass("btn-uadmin-whrite").addClass("btn-uadmin-green"),$(".btn-sort-jingxuan").removeClass("btn-uadmin-green").addClass("btn-uadmin-whrite"),F.context("currTag","qualitysort"),o.fire("set.finish",{qids:F.context("postQid"),cid:t.options.cid,type:t.options.type})}).delegate(".tag-list-right .btn-sort-jingxuan","click",function(e){e.preventDefault(),t.options.type="qualityTopic",$(this).removeClass("btn-uadmin-whrite").addClass("btn-uadmin-green"),$(".btn-sort-hq").removeClass("btn-uadmin-green").addClass("btn-uadmin-whrite"),F.context("currTag","qualityTopic"),o.fire("set.finish",{qids:F.context("postQid"),cid:t.options.cid,type:t.options.type})}),$(".tag-list").delegate(".recans-bar .btn-auth-hq","click",function(e){e.preventDefault(),t.options.type="qualityauth",$(this).removeClass("btn-util-white").addClass("btn-util-green"),$(".btn-auth-good-question").removeClass("btn-util-green").addClass("btn-util-white"),F.context("currTag","qualityauth"),o.fire("set.drop",{qid:F.context("postQid"),options:t.options})}).delegate(".recans-bar .btn-auth-good-question","click",function(e){e.preventDefault(),t.options.type="topicAuth",$(this).removeClass("btn-util-white").addClass("btn-util-green"),$(".btn-auth-hq").removeClass("btn-util-green").addClass("btn-util-white"),F.context("currTag","topicAuth"),o.fire("set.drop",{qid:F.context("postQid"),options:t.options})}),$(".tag-list").delegate(".recans-bar .btn-uadmin-whrite, .recans-footer-bar .btn-uadmin-whrite, .history-bar .btn-uadmin-whrite, .history-footer-bar .btn-uadmin-whrite","click",function(e){e.preventDefault(),t.options.cid=F.context("currCid"),o.fire("set.drop",{qid:F.context("postQid"),options:t.options})})}});a.exports=d});
;define("ihome:widget/uadmin/tagevent/tag-event.js",function(t,a,e){var s=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/ui/base/base.js"),i=t("common:widget/js/util/event/event.js"),c=t("common:widget/js/ui/dialog/dialog.js"),r=t("ihome:widget/js/set-tag/set-tag.js"),o=n(function(){}).extend({init:function(){var t=this;t.bindEvent()},_truncate:function(t,a,e){return t.length>a?t.substr(0,a)+e:t},bindEvent:function(){var t=this;s("#tag-content").on("click",".operate-trans-tag, .operate-pushq",function(a){a.preventDefault(),s(a.target).hasClass("operate-pushq")&&F.context("push-qid",s(a.target).data("qid"));var e=s(this),n=s(".tag-select .selected").text(),o=e.data("title");s.ajax({type:"POST",url:"/api/gettag",async:!1,data:{type:0,title:o,has_pic:0},dataType:"json",success:function(a){var d={};if(0==a.errno){var l=F.context("recentTags"),g="uadmin";if(d.commonused=l,d.recommend=a.data,d.current=[],"转移标签"==n){var p=e.parent().parent().find(".q-list-item-tag .tag-item");d.title=o,p.each(function(){d.current.push({name:s(this).text()})})}else if("推荐答案"==n){d.title=s(".ask-area-title a").text();var p=s(".ask-area-info-tags").text().split(",");s.each(p,function(t,a){d.current.push({name:a})})}else if("历史推优"==n){d.title=s(".ask-area-title a").text();var p=s(".ask-area-info-tags").text().split(",");s.each(p,function(t,a){d.current.push({name:a})})}else if("优质分拣"==n){var p=e.parent().parent().find(".q-list-item-tag .tag-item");g=F.context("currTag"),d.title=o,p.each(function(){d.current.push({name:s(this).text()})})}var u=new r({width:556,height:545,type:g,tags:d,dialogClassName:"uadmin-dialog dialog-set-tag",title:"编辑标签",success:function(){}});s(".uadmin-dialog").on("click",".search-interest",function(t){return t.preventDefault(),""==s(".tag-input input").val()?void s(".tag-input input").css("border-color","#f93535").focus():(s(".tag-input input").css("border-color","#5dd04a"),void s.ajax({type:"POST",url:"/api/gettag",async:!1,data:{type:1,wd:s(".tag-input input").val()},success:function(t){var a=[];if(t=s.json.parse(t),t.data.length>0){for(var e=0;e<t.data.length;e++)a.push('<a class="tag-item" data-type=""><span>'+t.data[e].tagname+"</span></a>");s(".more-tags-container").empty().append(a.join(""))}else s(".more-tags-container").html('<div class="no-tags-tip">暂时没有检索到标签，请您换个关键词试试吧~~</div>');s(".ui-dialog-content").scrollTop(s(".ui-dialog-content").height())}}))}).on("click",".search-all",function(){return""!=s(".more-tags-container").html()?void s(".more-tags-container").html(""):void s.ajax({type:"POST",url:"/uadmin/api/getalltag",async:!1,data:{},success:function(a){a=s.json.parse(a),s(".more-tags-container").empty().append('<div class="allTagTop"></div>'),s(".more-tags-container").append('<table class="tags-table"><tr><td class="first-tags"></td><td class="second-tags"></td><td class="third-tags"></td></tr></table>');for(var e=0;e<a.data.length;e++)s(".first-tags").append('<p class="first-tag-name first-tag'+e+'"><span class="tags">'+a.data[e].name+'</span><span class="next"></span></p>'),s(".first-tag"+e).val(a.data[e]);s(".ui-dialog-content").scrollTop(s(".tags-wrap").height()+10),s(".first-tags").on("click",".first-tag-name",function(){if(!s(this).hasClass("checked")){s(".second-tags").empty(),s(".third-tags").empty(),s(".first-tag-name").removeClass("checked"),s(this).addClass("checked");for(var t=s(this).val().child,a=0;a<t.length;a++)s(".second-tags").append('<p class="second-tag-name second-tag'+a+'"><span class="tags">'+t[a].name+'</span><span class="next"></span></p>'),s(".second-tag"+a).val(t[a])}}),s(".second-tags").on("click",".second-tag-name",function(){if(!s(this).hasClass("checked")){s(".third-tags").empty(),s(".second-tag-name").removeClass("checked"),s(this).addClass("checked");for(var a=s(this).val().tags,e=0;e<a.length;e++)s(".third-tags").append(e%2==0?'<p class="third-tag-name second-tag'+e+'" style="float: left"><span class="tags">'+t._truncate(a[e],5,"")+"</span></p>":'<p class="third-tag-name second-tag'+e+'" style="float: right"><span class="tags">'+t._truncate(a[e],5,"")+"</span></p>")}}),s(".third-tags").on("click",".third-tag-name",function(){})}})}).on("click",".cancel",function(){u.close()}).on("click",".save",function(){var t=[],a=[],n="recommend"===F.context("currTag")?F.context("postQid"):e.data("qid");return s(".currentTag .tag-item").each(function(e,n){var i=s.trim(s(n).text());t.push(i),a.push('<span class="tag-item">'+i+"</span>")}),t=t.join(","),a=a.join(""),""==t?void s(".currentTag .tag-tips").html("请至少给问题设置一个标签").css("color","red"):void i.fire("set.tag",{params:{qid:n,tag:t,from:F.context("currTag")},onsuccess:function(){u.close(),e.parent().parent().append('<div class="q-list-item-operate-hasdone"></div>').css("background-color","#efefef"),e.parent().parent().find(".q-list-item-tag").html(a),e.parent().remove(),s(".recans-bar .btn-uadmin-whrite").trigger("click")},onfail:function(t){u.close(),c.alert(t.errmsg)}})}).on("keypress",".tag-input input",function(t){"13"==t.keyCode&&s(".search-interest").trigger("click")}).on("click",".qsort-submit",function(t){t.preventDefault();var a=s('input[name="select"]:checked'),n=[],r=[],o={};return s(".currentTag .tag-item").each(function(t,a){var e=s.trim(s(a).text());n.push(e),r.push('<span class="tag-item">'+e+"</span>")}),n=n.join(","),r=r.join(""),""!=n||a.hasClass("qsort-bad")?("normal"==a.val()?o={qid:F.context("push-qid"),optype:"send",assign:1,tag:n}:"good"==a.val()?o={qid:F.context("push-qid"),optype:"send",assign:2,tag:n}:"bad"==a.val()?o={qid:F.context("push-qid"),optype:"drop"}:"classic"==a.val()&&(o={qid:F.context("push-qid"),optype:"send",assign:3,tag:n}),void i.fire("set.qsort",{params:o,onsuccess:function(){u.close(),e.parent().parent().append('<div class="q-list-item-operate-hasdone"></div>').css("background-color","#efefef"),e.parent().parent().find(".q-list-item-tag").html(r),e.parent().remove(),s(".recans-bar .btn-uadmin-whrite").trigger("click")},onfail:function(t){u.close(),c.alert(t.errmsg)}})):void s(".currentTag .tag-tips").html("请至少给问题设置一个标签").css("color","red")})}}})})}});e.exports=o});
;define("ihome:widget/uadmin/uadmin-list/uadmin-list.js",function(e,t,a){var i=e("common:widget/js/util/tangram/tangram.js"),n=e("common:widget/js/util/template/template.js"),r=e("common:widget/js/ui/base/base.js"),o=e("common:widget/js/ui/dialog/dialog.js"),d=e("common:widget/js/util/event/event.js"),s=e("common:widget/js/ui/pager/normalPager.js"),m=e("common:widget/js/ui/datePicker/datePicker.js"),c=e("common:widget/js/ui/combobox/combobox.js"),p=e("common:widget/js/util/tangram/timeFormater.js"),l=r(function(e){var t=this;t.type=e.type,t.startTime=e.startTime||p.format(new Date,"yyyy-MM-01"),t.endTime=e.endTime||p.format(new Date,"yyyy-MM-dd"),t.operate=e.operate||0,t.username=e.username||"",t.cid=e.cid||"",t.pn=0,t.rn=20}).extend({init:function(){var e=this;e.initCombobox(),e.initDatePicker(),e.ajaxEvent(),e.bindEvent()},initCombobox:function(){var e=this,t=new c({target:"#op-type-combobox",width:"155px"});if(t.target.on("change",function(t){e.operate=i(t.target).find("option:selected")[0].value}),i("#op-cid-picker")){var a=new c({target:"#op-cid-picker-combobox",width:"155px"});a.target.on("change",function(t){e.cid=i(t.target).find("option:selected")[0].value})}},initDatePicker:function(){var e=this;i("#op-date-picker .op-date-picker-starttime").val(e.startTime),i("#op-date-picker .op-date-picker-endtime").val(e.endTime),new m({host:i("#op-date-picker .op-date-picker-starttime"),pos:"bottomLeft",hostAutoFill:!0,marginFromHost:4,onSelect:function(t){e.startTime=p.format(t,"yyyy-MM-dd")}}),new m({host:i("#op-date-picker .op-date-picker-endtime"),pos:"bottomLeft",hostAutoFill:!0,marginFromHost:4,onSelect:function(t){e.endTime=p.format(t,"yyyy-MM-dd")}})},ajaxEvent:function(){function e(e,t){return e.length>t?e.substr(0,t)+"...":e}var t=this;d.on("get.data",function(a,r){var o=["/uadmin/api/operatelist","/uadmin/api/operatedetail","/uadmin/api/supalarms?mode=1"],d=o[r.type-1],s={startTime:r.startTime,endTime:r.endTime,username:encodeURIComponent(r.username),operate:t.operate,pn:r.pn,rn:r.rn};t.cid&&(s.cid=t.cid),i.get(d,s,function(a){var o="object"==typeof a?a:i.json.parse(a);if("1"===t.type)for(var d=0;d<o.data.length;d++)o.data[d].cids&&(o.data[d].cidsTruncate=e(o.data[d].cids,10),o.data[d].startTime=t.startTime,o.data[d].endTime=t.endTime),t.cid&&(o.data[d].cid=t.cid);else if("2"===t.type)for(var s=0;s<o.data.length;s++)o.data[s].title&&(o.data[s].titleTruncate=e(o.data[s].title,32));else"3"===t.type;i("#uadmin-list").html(n("t:uadmin-list-u",o)),parseInt(o.total,10)>t.rn?r.needBuildPager&&(t.buildPager({total:o.total,activeIndex:1}),i(".pageSelect").show()):(i("#pager").html(""),i(".pageSelect").hide())})}),d.on("set.undo",function(e,t){var a=["/uadmin/submit/unsettag","/uadmin/submit/unrecommend","/uadmin/submit/undeletereply"],n=a[t.type-2],r={qid:t.qid,opUname:t.opUname,recordId:t.recordId};"2"!==t.type&&(r.rid=t.rid),i.post(n,r,function(e){var a="object"==typeof e?e:i.json.parse(e);0===a.errno?t.target.removeClass("operate-cancel").removeClass("btn-green").addClass("btn-grey"):o.alert(a.errmsg)})}),d.on("get.excel",function(e,a){var i="/uadmin/api/downloadoperatelist",n={startTime:a.startTime,endTime:a.endTime,username:encodeURIComponent(a.username)};t.cid?(n.cid=t.cid,window.open(i+"?startTime="+n.startTime+"&endTime="+n.endTime+"&username="+n.username+"&cid="+n.cid)):window.open(i+"?startTime="+n.startTime+"&endTime="+n.endTime+"&username="+n.username)})},buildPager:function(e){var t=this,a=new s({pContainer:i("#pager"),conTotalCount:e.total||0,conPerPage:t.rn,pMaxCount:5,activeIndex:e.activeIndex||1,onIndexChange:function(e){d.fire("get.data",{type:t.type,startTime:t.startTime.replace(/-/g,""),endTime:t.endTime.replace(/-/g,""),username:t.username,pn:(e-1)*t.rn,rn:t.rn})}});a.show(),i("#totalPage").val(e.total||0)},bindEvent:function(){var e=this;d.fire("get.data",{type:e.type,startTime:e.startTime.replace(/-/g,""),endTime:e.endTime.replace(/-/g,""),username:e.username,pn:e.pn,rn:e.rn,needBuildPager:!0}),i("#uadmin-list").delegate("tr","mouseover",function(){i(this).addClass("highlight")}).delegate("tr","mouseout",function(){i(this).removeClass("highlight")}),i("#search-list-btn").on("click",function(){if(e.username=i.trim(i("#op-id-picker input").val()),"2"===e.type){if(""===e.username)return void i("#op-id-picker input").addClass("highlight-red").focus();i("#op-id-picker input").removeClass("highlight-red")}d.fire("get.data",{type:e.type,startTime:e.startTime.replace(/-/g,""),endTime:e.endTime.replace(/-/g,""),username:e.username,pn:e.pn,rn:e.rn,needBuildPager:!0})}),i("#goNewPage").on("click",function(){var t=i("#pagerInput").val().trim(),a=+i("#totalPage").val().trim();/^[1-9]\d*$/.test(t)&&t<=Math.ceil(a/e.rn)?(d.fire("get.data",{type:e.type,startTime:e.startTime.replace(/-/g,""),endTime:e.endTime.replace(/-/g,""),username:e.username,pn:(t-1)*e.rn,rn:e.rn}),e.buildPager({total:a,activeIndex:t}),i("#pagerInput").val("")):alert("页码输入有误，请检查后重新输入。")}),i("#export-list-btn").on("click",function(t){t.preventDefault(),d.fire("get.excel",{startTime:e.startTime.replace(/-/g,""),endTime:e.endTime.replace(/-/g,""),username:e.username})}),i("#uadmin-list").delegate(".operate-cancel","click",function(){var e=i(this),t=e.data("qid"),a=e.data("rid"),n=e.data("recordid"),r=e.data("opuname"),s=e.data("processtypeid"),m={type:s,qid:t,recordId:n,opUname:r,target:e};"2"!==s&&(m.rid=a),new o({title:"百度知道提示",content:"确认取消操作？",autoDispose:!0,width:300,height:150,buttons:[{text:"确认取消",click:function(){d.fire("set.undo",m),o.close()}}]})}),i("#uadmin-list").delegate(".alarms-bind, .alarms-deal","click",function(){var e={dbid:i(this).data("dbid"),status:i(this).data("status"),opinion:""};new o({title:"百度知道提示",content:"确认处理该条报警？",autoDispose:!0,width:300,height:150,buttons:[{text:"确认处理",click:function(){i.post("/uadmin/submit/dealalarm",e,function(e){var t="object"==typeof e?e:i.json.parse(e);0===t.errno?(o.close(),o.alert("您已处理成功，3秒后刷新页面...",{onaccept:function(){window.location.reload()}}),setTimeout(function(){window.location.reload()},3e3)):o.alert(t.errmsg)})}}]})})}});a.exports=l});
;define("ihome:widget/uadmin/uadmin.js",function(o,i,n){var t=o("common:widget/js/util/tangram/tangram.js"),e=o("common:widget/js/ui/combobox/combobox.js"),c=o("common:widget/js/util/event/event.js"),a=o("common:widget/js/ui/dialog/dialog.js"),r=(o("common:widget/js/logic/login/login.js"),o("common:widget/js/util/tangram/cookie.js")),d=function(o){c.fire("login.check",{isLogin:function(){"1"==o.type&&(o.isUadmin&&"0"!=o.isUadmin||a.alert("您目前的身份不是管理员",{onaccept:function(){window.location.href="/ihome"},close:function(){window.location.href="/ihome"}}),o.isCurrentPage&&"0"!=o.isCurrentPage||a.alert("您目前暂无此权限",{onaccept:function(){window.location.href="/ihome"},close:function(){window.location.href="/ihome"}})),"2"==o.type&&(o.isUadmin&&"4"==o.isUadmin||a.alert("您目前暂无此权限",{onaccept:function(){window.location.href="/ihome"},close:function(){window.location.href="/ihome"}}))},notLogin:function(){c.fire("login.log",{onLoginSuccess:function(){window.location.reload()}})}});var i=new e({target:"#category-combox",width:"155px"});i.target.on("change",function(o){F.context("currCid",t(o.target).find("option:selected")[0].value),F.context("currCname",t(o.target).find("option:selected")[0].text),r.set("historyCid",F.context("currCid")),c.fire("get.taglist",{cid:F.context("currCid"),type:F.context("currTag")})})};n.exports=d});
;define("ihome:widget/uadmin/userinfo/userinfo.js",function(t,s,e){var n=t("common:widget/js/util/tangram/tangram.js"),a=t("common:widget/js/util/template/template.js"),i=t("common:widget/js/util/event/event.js"),d=t("common:widget/js/ui/base/base.js"),r=t("common:widget/js/ui/tip/tip.js"),o=t("common:widget/js/ui/dialog/dialog.js"),l=t("ihome:widget/js/card/card.js"),c=d(function(){}).extend({init:function(t){me=this,me.level=t.level,me.cid=t.cid,me.bindEvent(),me.ajaxEvent()},bindEvent:function(){function t(){o.alert('<div class="user-answer-con">数据加载中......</div>',{title:"新回答剩余量",width:"300px",className:"corp-mode-dialog",autoDispose:!0,open:function(){s()}})}function s(t){var e=t||0;n.ajax({url:"/uadmin/api/newanswer",data:{pn:e},success:function(t){var e="object"==typeof t?t:n.json.parse(t),i=a("t:user-answer-list",e);n(".user-answer-con").html(i),n(".user-answer-pn a").on("click",function(){var t=n(this).attr("data-pn");n(".user-answer-con").html("数据加载中......"),s(t)})},error:function(){n(".user-answer-con").html("请求超时！")}})}var e=1==me.level?"转移标签":"推荐答案",i=['<div class="tips-title"><div class="title-container"><span class="devide">',e,"</span>",'<span class="devide">系统奖励</br><span class="auto">（自动发放）</span></span></div></div>','<table id="tips-table">',"<tr>",'<td><span class="number">1</span>个',"</td>",'<td><span class="number">20</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">5</span>个',"</td>",'<td><span class="number">50</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">20</span>个',"</td>",'<td><span class="number">120</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">50</span>个',"</td>",'<td><span class="number">200</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">100</span>个',"</td>",'<td><span class="number">300</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">200</span>个',"</td>",'<td><span class="number">500</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">400</span>个',"</td>",'<td><span class="number">800</span>财富值',"</td>","</tr>","<tr>",'<td><span class="number">600</span>个',"</td>",'<td><span class="number">1000</span>财富值',"</td>","</tr>"].join("");F.context("user").isUserAdmin&&n(".level-manager").each(function(){new l({target:this,type:"uadmin"})});var d=new r({position:{my:"left-245 bottom+240"},target:n(".grow-tip"),direction:"right center",arrow:"true",radius:!0,width:230,tooltipClass:"grows-tips",content:i,shadow:!0,skin:"tipA"});d.hide(),n("#user-info").on("click",".all-cat-btn",function(){var t=n(this).hasClass("tag");t?(n(this).removeClass("tag"),window.attachEvent?n(this).parent().find(".devide-btns-hide").hide():n(this).parent().find(".devide-btns-hide").slideUp(300),n(this).html("展开全部分类"),n(this).removeClass("down").addClass("up")):(n(this).addClass("tag"),window.attachEvent?n(this).parent().find(".devide-btns-hide").show():n(this).parent().find(".devide-btns-hide").slideDown(300),n(this).html("收起"),n(this).removeClass("up").addClass("down"))}).on("click",".signout-btn",function(){var t=n(this);t.hasClass("disabled")||(t.addClass("disabled"),n.get("/uadmin/submit/signin",function(){n(".total-task").slideDown(500),t.removeClass("signout-btn").addClass("signin-btn"),t.html("已签到"),t.removeClass("disabled")}))}).on("mouseover",".grow-tip",function(){d.show()}).on("mouseout",".grow-tip",function(){d.hide()}).on("click","#user-answer-btn",function(){t()}),4==me.level&&n.get("/uadmin/api/supalarms",{},function(t){var s="object"==typeof t?t:n.json.parse(t);n(".alert-num").html(s.data.listnum).show()})},ajaxEvent:function(){i.on("get.userrank",function(t,s){var e="/uadmin/api/rank",i={type:s.type,mode:s.mode,cid:s.cid||0,_t:(new Date).getTime()};n.get(e,i,function(t){var e="object"==typeof t?t:n.json.parse(t),i="t:rank-list";"authenticNum"===s.type&&(i="t:rank-auth-list"),n("#rank-list-table").html(a(i,e))})}),i.fire("get.userrank",{type:"score",mode:"self"}),n(".rank-title-total").on("click",function(){n(".rank-title .rank-item").removeClass("selected"),n(this).addClass("selected"),i.fire("get.userrank",{type:"score",mode:"self"})}),n(".rank-title-cid").on("click",function(){n(".rank-title .rank-item").removeClass("selected"),n(this).addClass("selected"),i.fire("get.userrank",{type:"score",mode:"self",cid:me.cid})});var t=n(".rank-title-auth");t.length&&t.on("click",function(){n(".rank-title .rank-item").removeClass("selected"),n(this).addClass("selected"),i.fire("get.userrank",{type:"authenticNum",mode:"self"})})}});e.exports=c});
;define("ihome:widget/usercard/admin-info/admin-info.js",function(i,n,e){var t=i("common:widget/js/util/tangram/tangram.js"),a=i("common:widget/js/util/template/template.js"),o=i("common:widget/js/util/num2chinese/num2chinese.js");e.exports.init=function(i){t.sio("/uadmin/api/score?un="+i).callByServer(function(i){0===i.errno&&1===i.data.isShow?(i.data.levelZh=o(i.data.level),t("#admin-info").html(a("t:admin-info",{info:i.data}))):(t("#admin-info").hide(),t("#admin-info").prev().hide()),t.isFunction(autoIfrHeight)&&autoIfrHeight()})}});
;define("ihome:widget/usercard/aside/aside.js",function(e){function a(){if("undefined"!=typeof t){var e={exp:[0,80,400,800,2e3,4e3,7e3,1e4,14e3,18e3,22e3,32e3,45e3,6e4,1e5,15e4,25e4,4e5,7e5,1e6],bst:[0,2,5,10,30,70,120,200,300,450,650,900,1300,1800,2500,3500,5e3,7e3,1e4,15e3]},a={exp:"experience",bst:"adoptno"},r={exp:["还需获得","经验值"],bst:["还需获得","个采纳答案"]},i=0,n=0,d=91;s(["exp","bst"]).each(function(o,l){i=e[l][t.grade]?t[a[l]]/e[l][t.grade]:1,i=Math.min(i,1),n=Math.ceil(i*d)+"px",s("#"+l+"-bar").css("width",n),s("#"+l+"-display").html(t.grade>=e[l].length?t[a[l]]+(2==o?"%":""):t[a[l]]+(2==o?"%":"")+" / "+e[l][t.grade]+(2==o?"%":"")),1==i&&s("#"+l+"-bar").addClass("full"),s("#"+l+"-display").on("mouseover",function(){var i=e[l][t.grade]-t[a[l]],n=2==o?e[l][t.grade]:i,d=s(this).prev("span");i>0?(this.title="升级"+r[l][0]+n+r[l][1],d.addClass("hover")):(this.title="升级条件已满足",d.addClass("full-hover"))}).on("mouseout",function(){var e=s(this).prev("span");e.removeClass("hover").removeClass("full-hover")})})}}var s=e("common:widget/js/util/tangram/tangram.js"),t=F.context("page").user;a()});
;define("ihome:widget/usercard/basic-info/basic-info.js",function(e){var n=e("common:widget/js/util/tangram/tangram.js");e&&e.async&&e.async(["common:widget/js/util/event/event.js","common:widget/js/logic/set-carefield/set-carefield.js"],function(e,i){n("#set-keyword, #set-category").click(function(e){e.preventDefault(),new i({expand:"set-keyword"==this.id?"onlyKey":"onlyCid",onclose:function(){location.reload()}})})})});
;define("ihome:widget/usercard/detail-info/detail-info.js",function(a){var e=a("common:widget/js/util/tangram/tangram.js"),t=F.context("page").user.name;window.showAccuse=function(a){e("#accuse-total").html(a.total),e("#accuse-rate").html(a.rate)},e.sio.callByBrowser("/smartmis/view?un="+t+"&pv=rem"),e.sio.callByServer("/iask/api/ikcardhelpnum?un="+t,function(a){if(a&&0==a.status){var t=a.data;e("#fixed-accept").html(t.accept),e("#fixed-answer").html(t.answer)}})});
;define("ihome:widget/usercard/item-info/item-info.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js");t.sio("/ihome/myitem/uicenter?un="+encodeURIComponent(F.context("page").user.name)).callByServer(function(e){var i=[],n=[];i=i.concat(e.honour).concat(e.treasure).concat(e.property),i.length>0?t(i).each(function(e,t){n.push(['<a class="item-link line" target="_blank" href="/html/item/showItem.html?itemId='+t.item_id+"&view=1&show=2&un="+F.context("page").user.name+'&lv=0">',"<div class='item-container mt-5 grid "+("0"==t.number?"item-gray":"")+"' style='background: url(http://iknow01.bosstatic.bdimg.com/item_img/s_"+t.item_id+".gif) center 0 no-repeat;'>","<div class='item-text f-black'><div class='item-name'>"+decodeURI(t.item_name)+"</div>",1==t.number?"":"<div class='item-num'>"+t.number+"</div>","</div></div></a>"].join(""))}):n=["TA还没有获得物品！"],t("#usercard-item-info").html(n.join("")),t.isFunction(autoIfrHeight)&&autoIfrHeight()})});
;define("ihome:widget/usercard/rank-info/rank-info.js",function(e){var n=e("common:widget/js/util/tangram/tangram.js");e&&e.async&&e.async(["common:widget/js/logic/set-carefield/set-carefield.js","common:widget/js/util/event/event.js"],function(e){n("#set-category").click(function(i){i.preventDefault(),n("#setCareField-wrap").size()||new e({expand:"onlyCid",onclose:function(){location.reload()}})})})});
;define("ihome:widget/usercard/team-info/team-info.js",function(t,e,a){var n=t("common:widget/js/util/tangram/tangram.js"),o=t("common:widget/js/util/template/template.js"),i=function(){var t="/uteam/ajax/myTeam?un="+encodeURIComponent(F.context("page").user.name);n.ajax({url:t,cache:!1,dataType:"json"}).done(function(t){t.errno||(n(".team-info").html(o("t:team-info",{teams:t.data})),n(".team-info .team-pic img").on("error",function(){this.src="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/userteam/onerror-s.jpg"}),n.isFunction(autoIfrHeight)&&autoIfrHeight())})};a.exports=i});
;define("ihome:widget/userinfo/userinfo.js",function(e){var t=e("common:widget/js/util/tangram/tangram.js"),n=e("common:widget/js/util/event/event.js"),i=t(".wgt-achievement .achievement-list").height();if(t(".wgt-achievement .achievement-expand").on("click",function(){var e=t(this),n=t(".wgt-achievement .achievement-offset").height();e.find("i").hasClass("arrow-green-down")?(t(".wgt-achievement .achievement-list").height(n),e.find("i").removeClass("arrow-green-down").addClass("arrow-green-up").prev()):(t(".wgt-achievement .achievement-list").height(i),e.find("i").removeClass("arrow-green-up").addClass("arrow-green-down").prev())}),t(".wgt-userinfo .set-unsername-btn").click(function(e){n.fire("login.setUsername"),e.preventDefault()}),1==F.context("user").isLogin){var r,s=F.context("user").gradeIndex,a=F.context("user").experience,o=F.context("user").adoptNum,c=a/F.context("user").pubExp[s]*100,g=o/F.context("user").pubBst[s]*100;r=c>g?g:c,r=r>100?100:r,t(".level-rate").css("width",r+"%")}});