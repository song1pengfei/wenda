var bdRes2exeHref=decodeURI(encodeURI(window.location.href.replace(/%22/g,'"'))),bdRes2exeResult=bdRes2exeHref.indexOf("bdres2exe=")!==-1&&bdRes2exeHref.split("bdres2exe=")[1],bdres2exe=null;if(bdRes2exeResult){try{window.parent.res2exeCallme(bdRes2exeResult);if(window.stop){window.stop()}else{document.execCommand("Stop")}}catch(e){}}else{bdRes2Exe=function(global){typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,o=gap,s,l=t[e];l&&typeof l=="object"&&typeof l.toJSON=="function"&&(l=l.toJSON(e)),typeof rep=="function"&&(l=rep.call(t,e,l));switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";gap+=indent,s=[];if(Object.prototype.toString.apply(l)==="[object Array]"){a=l.length;for(n=0;n<a;n+=1)s[n]=str(n,l)||"null";return r=s.length===0?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,r}if(rep&&typeof rep=="object"){a=rep.length;for(n=0;n<a;n+=1)typeof rep[n]=="string"&&(i=rep[n],r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r))}else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));return r=s.length===0?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,r}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var i;gap="",indent="";if(typeof n=="number")for(i=0;i<n;i+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&typeof r=="object")for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),i!==undefined?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var doc=document,head=doc.getElementsByTagName("head")[0],bodyNode=null,thisScript=doc.getElementById("bdres2exejs"),isWindows=navigator.platform==="Win32",isIe6=!!global.ActiveXObject&&!global.XMLHttpRequest,isWorking=false;var addEvent=function(e,t,n){if(global.addEventListener){e.addEventListener(t,n,false)}else if(global.attachEvent){e.attachEvent("on"+t,n)}},removeEvent=function(e,t,n){if(global.removeEventListener){e.removeEventListener(t,n,false)}else if(global.detachEvent){e.detachEvent("on"+t,n)}};var addClass=function(e,t){if(e.className==""){e.className=t}else{e.className+=" "+t}},removeClass=function(e,t){if(e.className==""){return}else if(e.className==t){e.className=""}else{var n=e.className.split(" "),i=n.length;if(i==1){return}for(var r=0;r<i;r++){if(n[r]==t){n.splice(r,1);e.className=n.join(" ");return}}}};var $=function(e,t,n){var i=doc.createElement(e);if(attr){attr(i,t)}if(n){css(i,n)}return i},attr=function(e,t){var n=null;if(typeof e=="string"){n=doc.getElementById(e)}else{n=e}for(var i in t){n[i]=t[i]}},css=function(e,t){for(var n in t){e.style[n]=t[n]}};var getWindowSize=function(){return{w:global.innerWidth||bodyAttr("clientWidth"),h:global.innerHeight||bodyAttr("clientHeight")}},getDocumentSize=function(){var e=getWindowSize(),t={w:bodyAttr("scrollWidth"),h:bodyAttr("scrollHeight")};return{w:e.w>=t.w?e.w:t.w,h:e.h>=t.h?e.h:t.h}},getScrollPosition=function(){return{l:global.pageXOffset||bodyAttr("scrollLeft")||0,t:global.pageYOffset||bodyAttr("scrollTop")||0}};var jsonpMethods=[],jsonParse=function(e){try{return JSON.parse(e.replace(/\'/g,'"'))}catch(t){return null}},jsonToQueryString=function(e){var t=[];for(var n in e){if(typeof e[n]=="object"){t.push(encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(e[n])))}else{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}}return t.join("&")},get=function(e,t,n,i,r){var a=null;switch(t){case"log":if(!defaultConfig.log){return}a=$("script",{src:e+jsonToQueryString(addValue(n,"t",Math.random())),onload:function(){head.removeChild(a)}});break;case"stylesheet":a=$("link",{href:e,rel:"stylesheet",type:"text/css"});break;case"jsonp":var o="jsonp_"+(new Date).getTime();a=$("script",{src:e+(e.indexOf("?")!==-1?"&":"?")+i+"=bdRes2Exe.jsonpMethods."+o+"&"+jsonToQueryString(n)});jsonpMethods[o]=function(e){r(e);delete jsonpMethods[o];head.removeChild(a)};break;default:}a.charset="UTF-8";head.appendChild(a)};var addValue=function(e,t,n,i){if(n){e[t]=n}else if(i){e[t]=i}return e},notEmpty=function(e){for(var t in e){if(e.hasOwnProperty(t)){return true}}return false},bodyAttr=function(e){if(e in doc.documentElement&&doc.documentElement[e]){return doc.documentElement[e]}else if(e in doc.body&&doc.body[e]){return doc.body[e]}else{return 0}};var logUrl="http://as.baidu.com/a/res2exe?";var defaultConfig={displayname:"\u6211\u7684\u4e0b\u8f7d",from:"",log:false,notWindows:false};var recList=null,recTypeId=function e(e){switch(e){case"music":return"1";case"video":return"2";case"picture":return"3";case"book":return"4";case"other":return"9";default:return"0"}};var mini=function(){var e=function(){var e=this;var t="http://127.0.0.1:",n=[5808,6808,7808,8808,9808];var i={portIndex:0,initialized:false,callId:0,appId:-1};this.request=function(e,r,a,o){r.call_id=i.callId++;r.app_id=i.appId;get(t+n[a]+e,"jsonp",r,"jsoncallback",o)};this.check=function(t,r,a){setTimeout(function(){var o;if(i.initialized){return}if(r!==undefined&&r!==null){o=r+1}else{i.initialized=false;o=0}if(o<n.length){e.request("/jsonp/checkversion.php",{},o,function(e){if(e&&e.mini){i.initialized=true;i.portIndex=o;t(e.mini.split("."))}});if(!a){setTimeout(function(){e.check(t,o)},300)}}else{t(false);return}},300)};this.sendMessage=function(t){e.request("/jsonp/message.php",{from_app:"",app_name:"baiduapkinstall",msg_body:JSON.stringify(t)},i.portIndex,function(){})}};var t=new e,n=false,i=isIe6?1:3;function r(e){t.sendMessage({type:"webinstall",info:{tasktype:"webtask",taskfrom:"from_web",taskinfo:e}})}function a(){return n}function o(e){if(n){return}t.check(function(e){if(e){var t=thisScript&&thisScript.getAttribute("data-version")?thisScript.getAttribute("data-version").split("."):[2,0,172,10244];for(var i=0;i<e.length;++i){if(e[i]==t[i]){continue}else if(e[i]>t[i]){n=true;return}else{n=false;return}}n=e.length==t.length}else{n=false}},e?null:0,e?true:false)}function s(e,t){var n=e.length,a=t||0;recursion=false;if(a){if(n-a<=i){r(e.slice(a))}else{r(e.slice(a,a+i));recursion=true}}else{if(n<=i){r(e)}else{r(e.slice(0,i));recursion=true}}if(recursion){setTimeout(function(){s(e,a+i)},200)}}return{check:o,isPass:a,addTask:s}}();var packServer=function(){var e=30;var t=false,n=null;var i={main:null,content:null,init:function(){var e=/MSIE (6|7|8)/.test(navigator.userAgent)?$('<iframe name="bdres2exeFrame">'):$("iframe");e.name="bdres2exeFrame";e.style.display="none";this.main=$("form",{method:"post",target:"bdres2exeFrame",action:"http://appsrv.baidu.com/res2exepro"},{display:"none"});this.content=$("input",{name:"resinfo"});this.main.appendChild(this.content);bodyNode.appendChild(this.main);bodyNode.appendChild(e)},send:function(e){this.content.value=e;this.main.submit()}};function r(r,a,o){if(!t){i.init();t=true}r=r.length>e?r.slice(0,e):r;var s=encodeURIComponent(jsonToQueryString(addValue({displayname:a["displayname"],from:a["from"],"icon-url":a["icon-url"],"res-info":{taskinfo:r}},"loc",n))),l=false,u=0;i.send(s);global.res2exeCallme=function(e){if(l){return}e=e.replace("%7B","{");e=e.replace("%7D","}");e=JSON.parse(e);if(e.status=="success"&&e.url){l=true;var t=decodeURI(e.url).replace(/\\\//g,"/"),n=t.lastIndexOf("/")+1,r=t.slice(0,n),a=t.slice(n);a=unescape(a.replace(/\\u/g,"%u"));t=r+a;o(t)}else if(e.err_no==1||e.err_no==2||e.err_no==3){l=true;o(false)}else{setTimeout(function(){if(!l){l=true;o(false)}},8e3);if(9>u++){setTimeout(function(){if(!l&&isWorking){i.send(s)}},500)}else{l=true;o(false)}}}}function a(e){n=e}return{addTask:r,setting:a}}();var ui=function(){var e=true,t=null,n=null;var i={},r={},a={},o={x:0,y:0};var s=null,l=null,u="";function c(){get("http://m.baidu.com/static/as/res2exe/css/res2exe_1.0.4.min.css?v=20131108","stylesheet");setTimeout(function(){addEvent(bodyNode,"click",d)},500);if(!t||!n){t=$("div",{innerHTML:'<div class="res2exe_head" hidefocus="true"><span>\u6e29\u99a8\u63d0\u793a</span><a class="res2exe_close" href="javascript:;" hidefocus="true"></a></div><div class="res2exe_body"><p class="res2exe_tip1">\u6b63\u5728\u542f\u52a8\u767e\u5ea6\u624b\u673a\u52a9\u624b\u4e3a\u60a8\u5b89\u88c5\u201c<span id="res2exe_name"></span>\u201d</p><p class="res2exe_tip2"><img id="res2exe_icon" width="38" height="38" /><span id="res2exe_name_small"></span></p><p class="res2exe_tip3">\u4e0b\u8f7d\u540e\u53cc\u51fb\u6781\u901f\u5b89\u88c5\u5305\u5373\u53ef\u54e6~</p><a href="javascript:;" hidefocus="true" id="res2exe_btn" class="res2exe_btn_normal">3\u79d2\u6781\u901f\u4e0b\u8f7d</a></div>',className:"res2exe_pop"});n=$("div",{className:"res2exe_pop_container"});t.onclick=function(e){var t=e||window.event,n=t.target||t.srcElement;if(n.className=="res2exe_close"){d()}if(t.stopPropagation){t.stopPropagation()}else if("cancelBubble"in t){t.cancelBubble=true}};n.appendChild(t);bodyNode.appendChild(n)}}function f(o,s){if(!e){return}c();l=typeof s=="function"?s:null;u=o.from?o.from:"";url="";var f=o["displayname"],d="";if(f.length>8){f=f.substring(0,7)+"...";d=f.substring(0,3)+"..."}else if(f.length>4){d=f.substring(0,3)+"..."}else{d=f}attr("res2exe_icon",{src:o["icon-url"]});attr("res2exe_name",{innerHTML:f});attr("res2exe_name_small",{innerHTML:d});if(isIe6){i=getWindowSize();r=getDocumentSize();a=getScrollPosition();css(n,{display:"block",height:r.h+"px"});css(t,{top:a.t+i.h/2+"px"})}else{css(n,{display:"block"})}}function d(t){if(e&&n){isWorking=false;n.style.display="none";removeEvent(bodyNode,"click",d);attr("res2exe_btn",{className:"res2exe_btn_normal",onclick:function(){}});if(t&&typeof t=="function"){t()}}}function p(t){if(!e||!t){return}attr("res2exe_btn",{className:"res2exe_btn_success",onclick:function(){if(isIe6){global.open(t)}else{global.location.href=t}get(logUrl,"log",{event:"user_download",qd:u},0);d(l)}})}function g(t){e=t}return{need:e,show:f,update:p,setting:g}}();function getDomAttribute(e,t){var n={},i={},r={};addValue(n,"name",e.getAttribute(t+"_name"));addValue(n,"package",e.getAttribute(t+"_package"));addValue(n,"url",e.getAttribute(t+"_url"));if(n.name&&n.url){addValue(n,"type",e.getAttribute(t+"_type"),"apk");addValue(n,"icon",e.getAttribute(t+"_icon"),"http://m.baidu.com/static/as/res2exe/img/default_"+n.type+".png");addValue(n,"size",parseInt(e.getAttribute(t+"_size")),1048576);addValue(n,"cmd",e.getAttribute(t+"_cmd"));addValue(n,"from",e.getAttribute(t+"_from"),defaultConfig.from);addValue(n,"showtitle",e.getAttribute(t+"_showtitle"));addValue(i,"type",e.getAttribute(t+"_detail_type"));addValue(i,"source",e.getAttribute(t+"_detail_source"));var a=jsonParse(e.getAttribute(t+"_detail_app"));if(n.type!=="apk"&&i.source&&a&&a.app&&recList&&recList[a.app]){r["package"]=recList[a.app];r["package"]["source"]=i.source+a.encrypt;r["package"]["type"]=a.type;i.source=i.source+a.encrypt+recTypeId(n.type)+"."}if(n.type==="apk"){if(n.package){addValue(n,"versionname",e.getAttribute(t+"_versionname"));addValue(n,"versioncode",e.getAttribute(t+"_versioncode"))}else{return false}}if(notEmpty(r)){i.appinfo=r}if(notEmpty(i)){n.fileinfo=i}return n}else{return false}}function getPackageByDom(e){var t=getDomAttribute(e,"data");if(t&&e.getAttribute("ext_type")==="apk"){t.annexation=getDomAttribute(e,"ext");if(!t.annexation){t.annexation=undefined}}return t}function addTask(e,t,n,i,r){if(isWorking){return}get(logUrl,"log",{event:"user_click",qd:t.from});isWorking=true;if(!bodyNode){bodyNode=doc.getElementsByTagName("body")[0]}if(false&&!isWindows&&defaultConfig.notWindows){global.location.href=e[0]["url"];isWorking=false;return}if(mini.isPass()){n(true);mini.addTask(e);get(logUrl,"log",{event:"task_mini",qd:t.from});isWorking=false}else{ui.show(t,r);n(false);packServer.addTask(e,t,function(e){isWorking=false;i(e?e:"fail");ui.update(e)});get(logUrl,"log",{event:"task_pack",qd:t.from})}}if(isWindows){mini.check(true)}if(thisScript){if(thisScript.getAttribute("data-proxy")){packServer.setting(thisScript.getAttribute("data-proxy"))}if(thisScript.getAttribute("data-ui")==="0"){ui.setting(false)}if(thisScript.getAttribute("data-from")){defaultConfig.from=thisScript.getAttribute("data-from")}if(thisScript.getAttribute("data-log")==="1"){defaultConfig.log=true}if(thisScript.getAttribute("data-notWindows")==="1"){defaultConfig.notWindows=true}}addEvent(global,"load",function(){if(isWindows){setTimeout(function(){mini.check()},300);if(thisScript&&thisScript.getAttribute("data-reclist")==="1"){get("http://m.baidu.com/app?action=cms&service=getmobresapplist","jsonp",{},"callback",function(e){recList=e})}}});return{jsonpMethods:jsonpMethods,config:defaultConfig,getPackageByDom:getPackageByDom,addTask:addTask}}(window);function bd_app_dl(e,t,n,i,r){if(window.event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}}var a=e.nodeType&&e.nodeType==1?[bdRes2Exe.getPackageByDom(e)]:e;if(a.length&&a[0]){bdRes2Exe.addTask(a,{displayname:t&&t["displayname"]||a.length==1?a[0].name:bdRes2Exe.config["displayname"],from:t&&t["from"]||bdRes2Exe.config["from"]||a[0].from||"","icon-url":t&&t["icon-url"]||a[0].icon},n?n:function(){},i?i:function(){},r?r:function(){})}else{return false}}}